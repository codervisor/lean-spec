var kc=Object.defineProperty;var Cc=(e,t,n)=>t in e?kc(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var oe=(e,t,n)=>Cc(e,typeof t!="symbol"?t+"":t,n);import{j as Q}from"./jsx-runtime-D_zvdyIk.js";import{g as ws,b as xs,R as P,r as q}from"./index-DhY--VwN.js";import{c as Et}from"./utils-CDN07tui.js";import"./index-CE4oAmmT.js";import{A as Ic}from"./archive-ClFtL5lN.js";import{C as Mc,a as Ac,b as vs}from"./clock-psjzWXVS.js";import{A as Rc,C as Tc}from"./circle-alert-C6t9kq2b.js";import{M as bs}from"./minus-B91E08-W.js";import{A as Oc}from"./arrow-up-CxjmGgh_.js";import"./index-BoxsY6nR.js";import"./createLucideIcon-CmAQLPQa.js";var Sn,mi;function Yr(){if(mi)return Sn;mi=1;var e="\0",t="\0",n="";class i{constructor(a){oe(this,"_isDirected",!0);oe(this,"_isMultigraph",!1);oe(this,"_isCompound",!1);oe(this,"_label");oe(this,"_defaultNodeLabelFn",()=>{});oe(this,"_defaultEdgeLabelFn",()=>{});oe(this,"_nodes",{});oe(this,"_in",{});oe(this,"_preds",{});oe(this,"_out",{});oe(this,"_sucs",{});oe(this,"_edgeObjs",{});oe(this,"_edgeLabels",{});oe(this,"_nodeCount",0);oe(this,"_edgeCount",0);oe(this,"_parent");oe(this,"_children");a&&(this._isDirected=Object.hasOwn(a,"directed")?a.directed:!0,this._isMultigraph=Object.hasOwn(a,"multigraph")?a.multigraph:!1,this._isCompound=Object.hasOwn(a,"compound")?a.compound:!1),this._isCompound&&(this._parent={},this._children={},this._children[t]={})}isDirected(){return this._isDirected}isMultigraph(){return this._isMultigraph}isCompound(){return this._isCompound}setGraph(a){return this._label=a,this}graph(){return this._label}setDefaultNodeLabel(a){return this._defaultNodeLabelFn=a,typeof a!="function"&&(this._defaultNodeLabelFn=()=>a),this}nodeCount(){return this._nodeCount}nodes(){return Object.keys(this._nodes)}sources(){var a=this;return this.nodes().filter(l=>Object.keys(a._in[l]).length===0)}sinks(){var a=this;return this.nodes().filter(l=>Object.keys(a._out[l]).length===0)}setNodes(a,l){var f=arguments,h=this;return a.forEach(function(w){f.length>1?h.setNode(w,l):h.setNode(w)}),this}setNode(a,l){return Object.hasOwn(this._nodes,a)?(arguments.length>1&&(this._nodes[a]=l),this):(this._nodes[a]=arguments.length>1?l:this._defaultNodeLabelFn(a),this._isCompound&&(this._parent[a]=t,this._children[a]={},this._children[t][a]=!0),this._in[a]={},this._preds[a]={},this._out[a]={},this._sucs[a]={},++this._nodeCount,this)}node(a){return this._nodes[a]}hasNode(a){return Object.hasOwn(this._nodes,a)}removeNode(a){var l=this;if(Object.hasOwn(this._nodes,a)){var f=h=>l.removeEdge(l._edgeObjs[h]);delete this._nodes[a],this._isCompound&&(this._removeFromParentsChildList(a),delete this._parent[a],this.children(a).forEach(function(h){l.setParent(h)}),delete this._children[a]),Object.keys(this._in[a]).forEach(f),delete this._in[a],delete this._preds[a],Object.keys(this._out[a]).forEach(f),delete this._out[a],delete this._sucs[a],--this._nodeCount}return this}setParent(a,l){if(!this._isCompound)throw new Error("Cannot set parent in a non-compound graph");if(l===void 0)l=t;else{l+="";for(var f=l;f!==void 0;f=this.parent(f))if(f===a)throw new Error("Setting "+l+" as parent of "+a+" would create a cycle");this.setNode(l)}return this.setNode(a),this._removeFromParentsChildList(a),this._parent[a]=l,this._children[l][a]=!0,this}_removeFromParentsChildList(a){delete this._children[this._parent[a]][a]}parent(a){if(this._isCompound){var l=this._parent[a];if(l!==t)return l}}children(a=t){if(this._isCompound){var l=this._children[a];if(l)return Object.keys(l)}else{if(a===t)return this.nodes();if(this.hasNode(a))return[]}}predecessors(a){var l=this._preds[a];if(l)return Object.keys(l)}successors(a){var l=this._sucs[a];if(l)return Object.keys(l)}neighbors(a){var l=this.predecessors(a);if(l){const h=new Set(l);for(var f of this.successors(a))h.add(f);return Array.from(h.values())}}isLeaf(a){var l;return this.isDirected()?l=this.successors(a):l=this.neighbors(a),l.length===0}filterNodes(a){var l=new this.constructor({directed:this._isDirected,multigraph:this._isMultigraph,compound:this._isCompound});l.setGraph(this.graph());var f=this;Object.entries(this._nodes).forEach(function([y,p]){a(y)&&l.setNode(y,p)}),Object.values(this._edgeObjs).forEach(function(y){l.hasNode(y.v)&&l.hasNode(y.w)&&l.setEdge(y,f.edge(y))});var h={};function w(y){var p=f.parent(y);return p===void 0||l.hasNode(p)?(h[y]=p,p):p in h?h[p]:w(p)}return this._isCompound&&l.nodes().forEach(y=>l.setParent(y,w(y))),l}setDefaultEdgeLabel(a){return this._defaultEdgeLabelFn=a,typeof a!="function"&&(this._defaultEdgeLabelFn=()=>a),this}edgeCount(){return this._edgeCount}edges(){return Object.values(this._edgeObjs)}setPath(a,l){var f=this,h=arguments;return a.reduce(function(w,y){return h.length>1?f.setEdge(w,y,l):f.setEdge(w,y),y}),this}setEdge(){var a,l,f,h,w=!1,y=arguments[0];typeof y=="object"&&y!==null&&"v"in y?(a=y.v,l=y.w,f=y.name,arguments.length===2&&(h=arguments[1],w=!0)):(a=y,l=arguments[1],f=arguments[3],arguments.length>2&&(h=arguments[2],w=!0)),a=""+a,l=""+l,f!==void 0&&(f=""+f);var p=o(this._isDirected,a,l,f);if(Object.hasOwn(this._edgeLabels,p))return w&&(this._edgeLabels[p]=h),this;if(f!==void 0&&!this._isMultigraph)throw new Error("Cannot set a named edge when isMultigraph = false");this.setNode(a),this.setNode(l),this._edgeLabels[p]=w?h:this._defaultEdgeLabelFn(a,l,f);var m=c(this._isDirected,a,l,f);return a=m.v,l=m.w,Object.freeze(m),this._edgeObjs[p]=m,r(this._preds[l],a),r(this._sucs[a],l),this._in[l][p]=m,this._out[a][p]=m,this._edgeCount++,this}edge(a,l,f){var h=arguments.length===1?u(this._isDirected,arguments[0]):o(this._isDirected,a,l,f);return this._edgeLabels[h]}edgeAsObj(){const a=this.edge(...arguments);return typeof a!="object"?{label:a}:a}hasEdge(a,l,f){var h=arguments.length===1?u(this._isDirected,arguments[0]):o(this._isDirected,a,l,f);return Object.hasOwn(this._edgeLabels,h)}removeEdge(a,l,f){var h=arguments.length===1?u(this._isDirected,arguments[0]):o(this._isDirected,a,l,f),w=this._edgeObjs[h];return w&&(a=w.v,l=w.w,delete this._edgeLabels[h],delete this._edgeObjs[h],s(this._preds[l],a),s(this._sucs[a],l),delete this._in[l][h],delete this._out[a][h],this._edgeCount--),this}inEdges(a,l){var f=this._in[a];if(f){var h=Object.values(f);return l?h.filter(w=>w.v===l):h}}outEdges(a,l){var f=this._out[a];if(f){var h=Object.values(f);return l?h.filter(w=>w.w===l):h}}nodeEdges(a,l){var f=this.inEdges(a,l);if(f)return f.concat(this.outEdges(a,l))}}function r(d,a){d[a]?d[a]++:d[a]=1}function s(d,a){--d[a]||delete d[a]}function o(d,a,l,f){var h=""+a,w=""+l;if(!d&&h>w){var y=h;h=w,w=y}return h+n+w+n+(f===void 0?e:f)}function c(d,a,l,f){var h=""+a,w=""+l;if(!d&&h>w){var y=h;h=w,w=y}var p={v:h,w};return f&&(p.name=f),p}function u(d,a){return o(d,a.v,a.w,a.name)}return Sn=i,Sn}var Nn,yi;function $c(){return yi||(yi=1,Nn="2.2.4"),Nn}var kn,wi;function Dc(){return wi||(wi=1,kn={Graph:Yr(),version:$c()}),kn}var Cn,xi;function Pc(){if(xi)return Cn;xi=1;var e=Yr();Cn={write:t,read:r};function t(s){var o={options:{directed:s.isDirected(),multigraph:s.isMultigraph(),compound:s.isCompound()},nodes:n(s),edges:i(s)};return s.graph()!==void 0&&(o.value=structuredClone(s.graph())),o}function n(s){return s.nodes().map(function(o){var c=s.node(o),u=s.parent(o),d={v:o};return c!==void 0&&(d.value=c),u!==void 0&&(d.parent=u),d})}function i(s){return s.edges().map(function(o){var c=s.edge(o),u={v:o.v,w:o.w};return o.name!==void 0&&(u.name=o.name),c!==void 0&&(u.value=c),u})}function r(s){var o=new e(s.options).setGraph(s.value);return s.nodes.forEach(function(c){o.setNode(c.v,c.value),c.parent&&o.setParent(c.v,c.parent)}),s.edges.forEach(function(c){o.setEdge({v:c.v,w:c.w,name:c.name},c.value)}),o}return Cn}var In,vi;function Lc(){if(vi)return In;vi=1,In=e;function e(t){var n={},i=[],r;function s(o){Object.hasOwn(n,o)||(n[o]=!0,r.push(o),t.successors(o).forEach(s),t.predecessors(o).forEach(s))}return t.nodes().forEach(function(o){r=[],s(o),r.length&&i.push(r)}),i}return In}var Mn,bi;function Es(){if(bi)return Mn;bi=1;class e{constructor(){oe(this,"_arr",[]);oe(this,"_keyIndices",{})}size(){return this._arr.length}keys(){return this._arr.map(function(n){return n.key})}has(n){return Object.hasOwn(this._keyIndices,n)}priority(n){var i=this._keyIndices[n];if(i!==void 0)return this._arr[i].priority}min(){if(this.size()===0)throw new Error("Queue underflow");return this._arr[0].key}add(n,i){var r=this._keyIndices;if(n=String(n),!Object.hasOwn(r,n)){var s=this._arr,o=s.length;return r[n]=o,s.push({key:n,priority:i}),this._decrease(o),!0}return!1}removeMin(){this._swap(0,this._arr.length-1);var n=this._arr.pop();return delete this._keyIndices[n.key],this._heapify(0),n.key}decrease(n,i){var r=this._keyIndices[n];if(i>this._arr[r].priority)throw new Error("New priority is greater than current priority. Key: "+n+" Old: "+this._arr[r].priority+" New: "+i);this._arr[r].priority=i,this._decrease(r)}_heapify(n){var i=this._arr,r=2*n,s=r+1,o=n;r<i.length&&(o=i[r].priority<i[o].priority?r:o,s<i.length&&(o=i[s].priority<i[o].priority?s:o),o!==n&&(this._swap(n,o),this._heapify(o)))}_decrease(n){for(var i=this._arr,r=i[n].priority,s;n!==0&&(s=n>>1,!(i[s].priority<r));)this._swap(n,s),n=s}_swap(n,i){var r=this._arr,s=this._keyIndices,o=r[n],c=r[i];r[n]=c,r[i]=o,s[c.key]=n,s[o.key]=i}}return Mn=e,Mn}var An,Ei;function _s(){if(Ei)return An;Ei=1;var e=Es();An=n;var t=()=>1;function n(r,s,o,c){return i(r,String(s),o||t,c||function(u){return r.outEdges(u)})}function i(r,s,o,c){var u={},d=new e,a,l,f=function(h){var w=h.v!==a?h.v:h.w,y=u[w],p=o(h),m=l.distance+p;if(p<0)throw new Error("dijkstra does not allow negative edge weights. Bad edge: "+h+" Weight: "+p);m<y.distance&&(y.distance=m,y.predecessor=a,d.decrease(w,m))};for(r.nodes().forEach(function(h){var w=h===s?0:Number.POSITIVE_INFINITY;u[h]={distance:w},d.add(h,w)});d.size()>0&&(a=d.removeMin(),l=u[a],l.distance!==Number.POSITIVE_INFINITY);)c(a).forEach(f);return u}return An}var Rn,_i;function qc(){if(_i)return Rn;_i=1;var e=_s();Rn=t;function t(n,i,r){return n.nodes().reduce(function(s,o){return s[o]=e(n,o,i,r),s},{})}return Rn}var Tn,Si;function Ss(){if(Si)return Tn;Si=1,Tn=e;function e(t){var n=0,i=[],r={},s=[];function o(c){var u=r[c]={onStack:!0,lowlink:n,index:n++};if(i.push(c),t.successors(c).forEach(function(l){Object.hasOwn(r,l)?r[l].onStack&&(u.lowlink=Math.min(u.lowlink,r[l].index)):(o(l),u.lowlink=Math.min(u.lowlink,r[l].lowlink))}),u.lowlink===u.index){var d=[],a;do a=i.pop(),r[a].onStack=!1,d.push(a);while(c!==a);s.push(d)}}return t.nodes().forEach(function(c){Object.hasOwn(r,c)||o(c)}),s}return Tn}var On,Ni;function zc(){if(Ni)return On;Ni=1;var e=Ss();On=t;function t(n){return e(n).filter(function(i){return i.length>1||i.length===1&&n.hasEdge(i[0],i[0])})}return On}var $n,ki;function Bc(){if(ki)return $n;ki=1,$n=t;var e=()=>1;function t(i,r,s){return n(i,r||e,s||function(o){return i.outEdges(o)})}function n(i,r,s){var o={},c=i.nodes();return c.forEach(function(u){o[u]={},o[u][u]={distance:0},c.forEach(function(d){u!==d&&(o[u][d]={distance:Number.POSITIVE_INFINITY})}),s(u).forEach(function(d){var a=d.v===u?d.w:d.v,l=r(d);o[u][a]={distance:l,predecessor:u}})}),c.forEach(function(u){var d=o[u];c.forEach(function(a){var l=o[a];c.forEach(function(f){var h=l[u],w=d[f],y=l[f],p=h.distance+w.distance;p<y.distance&&(y.distance=p,y.predecessor=w.predecessor)})})}),o}return $n}var Dn,Ci;function Ns(){if(Ci)return Dn;Ci=1;function e(n){var i={},r={},s=[];function o(c){if(Object.hasOwn(r,c))throw new t;Object.hasOwn(i,c)||(r[c]=!0,i[c]=!0,n.predecessors(c).forEach(o),delete r[c],s.push(c))}if(n.sinks().forEach(o),Object.keys(i).length!==n.nodeCount())throw new t;return s}class t extends Error{constructor(){super(...arguments)}}return Dn=e,e.CycleException=t,Dn}var Pn,Ii;function Vc(){if(Ii)return Pn;Ii=1;var e=Ns();Pn=t;function t(n){try{e(n)}catch(i){if(i instanceof e.CycleException)return!1;throw i}return!0}return Pn}var Ln,Mi;function ks(){if(Mi)return Ln;Mi=1,Ln=e;function e(r,s,o){Array.isArray(s)||(s=[s]);var c=r.isDirected()?l=>r.successors(l):l=>r.neighbors(l),u=o==="post"?t:n,d=[],a={};return s.forEach(l=>{if(!r.hasNode(l))throw new Error("Graph does not have node: "+l);u(l,c,a,d)}),d}function t(r,s,o,c){for(var u=[[r,!1]];u.length>0;){var d=u.pop();d[1]?c.push(d[0]):Object.hasOwn(o,d[0])||(o[d[0]]=!0,u.push([d[0],!0]),i(s(d[0]),a=>u.push([a,!1])))}}function n(r,s,o,c){for(var u=[r];u.length>0;){var d=u.pop();Object.hasOwn(o,d)||(o[d]=!0,c.push(d),i(s(d),a=>u.push(a)))}}function i(r,s){for(var o=r.length;o--;)s(r[o],o,r);return r}return Ln}var qn,Ai;function Hc(){if(Ai)return qn;Ai=1;var e=ks();qn=t;function t(n,i){return e(n,i,"post")}return qn}var zn,Ri;function Fc(){if(Ri)return zn;Ri=1;var e=ks();zn=t;function t(n,i){return e(n,i,"pre")}return zn}var Bn,Ti;function jc(){if(Ti)return Bn;Ti=1;var e=Yr(),t=Es();Bn=n;function n(i,r){var s=new e,o={},c=new t,u;function d(l){var f=l.v===u?l.w:l.v,h=c.priority(f);if(h!==void 0){var w=r(l);w<h&&(o[f]=u,c.decrease(f,w))}}if(i.nodeCount()===0)return s;i.nodes().forEach(function(l){c.add(l,Number.POSITIVE_INFINITY),s.setNode(l)}),c.decrease(i.nodes()[0],0);for(var a=!1;c.size()>0;){if(u=c.removeMin(),Object.hasOwn(o,u))s.setEdge(u,o[u]);else{if(a)throw new Error("Input graph is not connected: "+i);a=!0}i.nodeEdges(u).forEach(d)}return s}return Bn}var Vn,Oi;function Gc(){return Oi||(Oi=1,Vn={components:Lc(),dijkstra:_s(),dijkstraAll:qc(),findCycles:zc(),floydWarshall:Bc(),isAcyclic:Vc(),postorder:Hc(),preorder:Fc(),prim:jc(),tarjan:Ss(),topsort:Ns()}),Vn}var Hn,$i;function Ee(){if($i)return Hn;$i=1;var e=Dc();return Hn={Graph:e.Graph,json:Pc(),alg:Gc(),version:e.version},Hn}var Fn,Di;function Yc(){if(Di)return Fn;Di=1;class e{constructor(){let r={};r._next=r._prev=r,this._sentinel=r}dequeue(){let r=this._sentinel,s=r._prev;if(s!==r)return t(s),s}enqueue(r){let s=this._sentinel;r._prev&&r._next&&t(r),r._next=s._next,s._next._prev=r,s._next=r,r._prev=s}toString(){let r=[],s=this._sentinel,o=s._prev;for(;o!==s;)r.push(JSON.stringify(o,n)),o=o._prev;return"["+r.join(", ")+"]"}}function t(i){i._prev._next=i._next,i._next._prev=i._prev,delete i._next,delete i._prev}function n(i,r){if(i!=="_next"&&i!=="_prev")return r}return Fn=e,Fn}var jn,Pi;function Wc(){if(Pi)return jn;Pi=1;let e=Ee().Graph,t=Yc();jn=i;let n=()=>1;function i(d,a){if(d.nodeCount()<=1)return[];let l=o(d,a||n);return r(l.graph,l.buckets,l.zeroIdx).flatMap(h=>d.outEdges(h.v,h.w))}function r(d,a,l){let f=[],h=a[a.length-1],w=a[0],y;for(;d.nodeCount();){for(;y=w.dequeue();)s(d,a,l,y);for(;y=h.dequeue();)s(d,a,l,y);if(d.nodeCount()){for(let p=a.length-2;p>0;--p)if(y=a[p].dequeue(),y){f=f.concat(s(d,a,l,y,!0));break}}}return f}function s(d,a,l,f,h){let w=h?[]:void 0;return d.inEdges(f.v).forEach(y=>{let p=d.edge(y),m=d.node(y.v);h&&w.push({v:y.v,w:y.w}),m.out-=p,c(a,l,m)}),d.outEdges(f.v).forEach(y=>{let p=d.edge(y),m=y.w,x=d.node(m);x.in-=p,c(a,l,x)}),d.removeNode(f.v),w}function o(d,a){let l=new e,f=0,h=0;d.nodes().forEach(p=>{l.setNode(p,{v:p,in:0,out:0})}),d.edges().forEach(p=>{let m=l.edge(p.v,p.w)||0,x=a(p),_=m+x;l.setEdge(p.v,p.w,_),h=Math.max(h,l.node(p.v).out+=x),f=Math.max(f,l.node(p.w).in+=x)});let w=u(h+f+3).map(()=>new t),y=f+1;return l.nodes().forEach(p=>{c(w,y,l.node(p))}),{graph:l,buckets:w,zeroIdx:y}}function c(d,a,l){l.out?l.in?d[l.out-l.in+a].enqueue(l):d[d.length-1].enqueue(l):d[0].enqueue(l)}function u(d){const a=[];for(let l=0;l<d;l++)a.push(l);return a}return jn}var Gn,Li;function se(){if(Li)return Gn;Li=1;let e=Ee().Graph;Gn={addBorderNode:a,addDummyNode:t,applyWithChunking:h,asNonCompoundGraph:i,buildLayerMatrix:c,intersectRect:o,mapValues:I,maxRank:w,normalizeRanks:u,notime:m,partition:y,pick:S,predecessorWeights:s,range:v,removeEmptyRanks:d,simplify:n,successorWeights:r,time:p,uniqueId:_,zipObject:$};function t(b,E,k,N){for(var A=N;b.hasNode(A);)A=_(N);return k.dummy=E,b.setNode(A,k),A}function n(b){let E=new e().setGraph(b.graph());return b.nodes().forEach(k=>E.setNode(k,b.node(k))),b.edges().forEach(k=>{let N=E.edge(k.v,k.w)||{weight:0,minlen:1},A=b.edge(k);E.setEdge(k.v,k.w,{weight:N.weight+A.weight,minlen:Math.max(N.minlen,A.minlen)})}),E}function i(b){let E=new e({multigraph:b.isMultigraph()}).setGraph(b.graph());return b.nodes().forEach(k=>{b.children(k).length||E.setNode(k,b.node(k))}),b.edges().forEach(k=>{E.setEdge(k,b.edge(k))}),E}function r(b){let E=b.nodes().map(k=>{let N={};return b.outEdges(k).forEach(A=>{N[A.w]=(N[A.w]||0)+b.edge(A).weight}),N});return $(b.nodes(),E)}function s(b){let E=b.nodes().map(k=>{let N={};return b.inEdges(k).forEach(A=>{N[A.v]=(N[A.v]||0)+b.edge(A).weight}),N});return $(b.nodes(),E)}function o(b,E){let k=b.x,N=b.y,A=E.x-k,L=E.y-N,g=b.width/2,T=b.height/2;if(!A&&!L)throw new Error("Not possible to find intersection inside of the rectangle");let R,z;return Math.abs(L)*g>Math.abs(A)*T?(L<0&&(T=-T),R=T*A/L,z=T):(A<0&&(g=-g),R=g,z=g*L/A),{x:k+R,y:N+z}}function c(b){let E=v(w(b)+1).map(()=>[]);return b.nodes().forEach(k=>{let N=b.node(k),A=N.rank;A!==void 0&&(E[A][N.order]=k)}),E}function u(b){let E=b.nodes().map(N=>{let A=b.node(N).rank;return A===void 0?Number.MAX_VALUE:A}),k=h(Math.min,E);b.nodes().forEach(N=>{let A=b.node(N);Object.hasOwn(A,"rank")&&(A.rank-=k)})}function d(b){let E=b.nodes().map(g=>b.node(g).rank),k=h(Math.min,E),N=[];b.nodes().forEach(g=>{let T=b.node(g).rank-k;N[T]||(N[T]=[]),N[T].push(g)});let A=0,L=b.graph().nodeRankFactor;Array.from(N).forEach((g,T)=>{g===void 0&&T%L!==0?--A:g!==void 0&&A&&g.forEach(R=>b.node(R).rank+=A)})}function a(b,E,k,N){let A={width:0,height:0};return arguments.length>=4&&(A.rank=k,A.order=N),t(b,"border",A,E)}function l(b,E=f){const k=[];for(let N=0;N<b.length;N+=E){const A=b.slice(N,N+E);k.push(A)}return k}const f=65535;function h(b,E){if(E.length>f){const k=l(E);return b.apply(null,k.map(N=>b.apply(null,N)))}else return b.apply(null,E)}function w(b){const k=b.nodes().map(N=>{let A=b.node(N).rank;return A===void 0?Number.MIN_VALUE:A});return h(Math.max,k)}function y(b,E){let k={lhs:[],rhs:[]};return b.forEach(N=>{E(N)?k.lhs.push(N):k.rhs.push(N)}),k}function p(b,E){let k=Date.now();try{return E()}finally{console.log(b+" time: "+(Date.now()-k)+"ms")}}function m(b,E){return E()}let x=0;function _(b){var E=++x;return b+(""+E)}function v(b,E,k=1){E==null&&(E=b,b=0);let N=L=>L<E;k<0&&(N=L=>E<L);const A=[];for(let L=b;N(L);L+=k)A.push(L);return A}function S(b,E){const k={};for(const N of E)b[N]!==void 0&&(k[N]=b[N]);return k}function I(b,E){let k=E;return typeof E=="string"&&(k=N=>N[E]),Object.entries(b).reduce((N,[A,L])=>(N[A]=k(L,A),N),{})}function $(b,E){return b.reduce((k,N,A)=>(k[N]=E[A],k),{})}return Gn}var Yn,qi;function Uc(){if(qi)return Yn;qi=1;let e=Wc(),t=se().uniqueId;Yn={run:n,undo:r};function n(s){(s.graph().acyclicer==="greedy"?e(s,c(s)):i(s)).forEach(u=>{let d=s.edge(u);s.removeEdge(u),d.forwardName=u.name,d.reversed=!0,s.setEdge(u.w,u.v,d,t("rev"))});function c(u){return d=>u.edge(d).weight}}function i(s){let o=[],c={},u={};function d(a){Object.hasOwn(u,a)||(u[a]=!0,c[a]=!0,s.outEdges(a).forEach(l=>{Object.hasOwn(c,l.w)?o.push(l):d(l.w)}),delete c[a])}return s.nodes().forEach(d),o}function r(s){s.edges().forEach(o=>{let c=s.edge(o);if(c.reversed){s.removeEdge(o);let u=c.forwardName;delete c.reversed,delete c.forwardName,s.setEdge(o.w,o.v,c,u)}})}return Yn}var Wn,zi;function Xc(){if(zi)return Wn;zi=1;let e=se();Wn={run:t,undo:i};function t(r){r.graph().dummyChains=[],r.edges().forEach(s=>n(r,s))}function n(r,s){let o=s.v,c=r.node(o).rank,u=s.w,d=r.node(u).rank,a=s.name,l=r.edge(s),f=l.labelRank;if(d===c+1)return;r.removeEdge(s);let h,w,y;for(y=0,++c;c<d;++y,++c)l.points=[],w={width:0,height:0,edgeLabel:l,edgeObj:s,rank:c},h=e.addDummyNode(r,"edge",w,"_d"),c===f&&(w.width=l.width,w.height=l.height,w.dummy="edge-label",w.labelpos=l.labelpos),r.setEdge(o,h,{weight:l.weight},a),y===0&&r.graph().dummyChains.push(h),o=h;r.setEdge(o,u,{weight:l.weight},a)}function i(r){r.graph().dummyChains.forEach(s=>{let o=r.node(s),c=o.edgeLabel,u;for(r.setEdge(o.edgeObj,c);o.dummy;)u=r.successors(s)[0],r.removeNode(s),c.points.push({x:o.x,y:o.y}),o.dummy==="edge-label"&&(c.x=o.x,c.y=o.y,c.width=o.width,c.height=o.height),s=u,o=r.node(s)})}return Wn}var Un,Bi;function sn(){if(Bi)return Un;Bi=1;const{applyWithChunking:e}=se();Un={longestPath:t,slack:n};function t(i){var r={};function s(o){var c=i.node(o);if(Object.hasOwn(r,o))return c.rank;r[o]=!0;let u=i.outEdges(o).map(a=>a==null?Number.POSITIVE_INFINITY:s(a.w)-i.edge(a).minlen);var d=e(Math.min,u);return d===Number.POSITIVE_INFINITY&&(d=0),c.rank=d}i.sources().forEach(s)}function n(i,r){return i.node(r.w).rank-i.node(r.v).rank-i.edge(r).minlen}return Un}var Xn,Vi;function Cs(){if(Vi)return Xn;Vi=1;var e=Ee().Graph,t=sn().slack;Xn=n;function n(o){var c=new e({directed:!1}),u=o.nodes()[0],d=o.nodeCount();c.setNode(u,{});for(var a,l;i(c,o)<d;)a=r(c,o),l=c.hasNode(a.v)?t(o,a):-t(o,a),s(c,o,l);return c}function i(o,c){function u(d){c.nodeEdges(d).forEach(a=>{var l=a.v,f=d===l?a.w:l;!o.hasNode(f)&&!t(c,a)&&(o.setNode(f,{}),o.setEdge(d,f,{}),u(f))})}return o.nodes().forEach(u),o.nodeCount()}function r(o,c){return c.edges().reduce((d,a)=>{let l=Number.POSITIVE_INFINITY;return o.hasNode(a.v)!==o.hasNode(a.w)&&(l=t(c,a)),l<d[0]?[l,a]:d},[Number.POSITIVE_INFINITY,null])[1]}function s(o,c,u){o.nodes().forEach(d=>c.node(d).rank+=u)}return Xn}var Zn,Hi;function Zc(){if(Hi)return Zn;Hi=1;var e=Cs(),t=sn().slack,n=sn().longestPath,i=Ee().alg.preorder,r=Ee().alg.postorder,s=se().simplify;Zn=o,o.initLowLimValues=a,o.initCutValues=c,o.calcCutValue=d,o.leaveEdge=f,o.enterEdge=h,o.exchangeEdges=w;function o(x){x=s(x),n(x);var _=e(x);a(_),c(_,x);for(var v,S;v=f(_);)S=h(_,x,v),w(_,x,v,S)}function c(x,_){var v=r(x,x.nodes());v=v.slice(0,v.length-1),v.forEach(S=>u(x,_,S))}function u(x,_,v){var S=x.node(v),I=S.parent;x.edge(v,I).cutvalue=d(x,_,v)}function d(x,_,v){var S=x.node(v),I=S.parent,$=!0,b=_.edge(v,I),E=0;return b||($=!1,b=_.edge(I,v)),E=b.weight,_.nodeEdges(v).forEach(k=>{var N=k.v===v,A=N?k.w:k.v;if(A!==I){var L=N===$,g=_.edge(k).weight;if(E+=L?g:-g,p(x,v,A)){var T=x.edge(v,A).cutvalue;E+=L?-T:T}}}),E}function a(x,_){arguments.length<2&&(_=x.nodes()[0]),l(x,{},1,_)}function l(x,_,v,S,I){var $=v,b=x.node(S);return _[S]=!0,x.neighbors(S).forEach(E=>{Object.hasOwn(_,E)||(v=l(x,_,v,E,S))}),b.low=$,b.lim=v++,I?b.parent=I:delete b.parent,v}function f(x){return x.edges().find(_=>x.edge(_).cutvalue<0)}function h(x,_,v){var S=v.v,I=v.w;_.hasEdge(S,I)||(S=v.w,I=v.v);var $=x.node(S),b=x.node(I),E=$,k=!1;$.lim>b.lim&&(E=b,k=!0);var N=_.edges().filter(A=>k===m(x,x.node(A.v),E)&&k!==m(x,x.node(A.w),E));return N.reduce((A,L)=>t(_,L)<t(_,A)?L:A)}function w(x,_,v,S){var I=v.v,$=v.w;x.removeEdge(I,$),x.setEdge(S.v,S.w,{}),a(x),c(x,_),y(x,_)}function y(x,_){var v=x.nodes().find(I=>!_.node(I).parent),S=i(x,v);S=S.slice(1),S.forEach(I=>{var $=x.node(I).parent,b=_.edge(I,$),E=!1;b||(b=_.edge($,I),E=!0),_.node(I).rank=_.node($).rank+(E?b.minlen:-b.minlen)})}function p(x,_,v){return x.hasEdge(_,v)}function m(x,_,v){return v.low<=_.lim&&_.lim<=v.lim}return Zn}var Kn,Fi;function Kc(){if(Fi)return Kn;Fi=1;var e=sn(),t=e.longestPath,n=Cs(),i=Zc();Kn=r;function r(u){var d=u.graph().ranker;if(d instanceof Function)return d(u);switch(u.graph().ranker){case"network-simplex":c(u);break;case"tight-tree":o(u);break;case"longest-path":s(u);break;case"none":break;default:c(u)}}var s=t;function o(u){t(u),n(u)}function c(u){i(u)}return Kn}var Qn,ji;function Qc(){if(ji)return Qn;ji=1,Qn=e;function e(i){let r=n(i);i.graph().dummyChains.forEach(s=>{let o=i.node(s),c=o.edgeObj,u=t(i,r,c.v,c.w),d=u.path,a=u.lca,l=0,f=d[l],h=!0;for(;s!==c.w;){if(o=i.node(s),h){for(;(f=d[l])!==a&&i.node(f).maxRank<o.rank;)l++;f===a&&(h=!1)}if(!h){for(;l<d.length-1&&i.node(f=d[l+1]).minRank<=o.rank;)l++;f=d[l]}i.setParent(s,f),s=i.successors(s)[0]}})}function t(i,r,s,o){let c=[],u=[],d=Math.min(r[s].low,r[o].low),a=Math.max(r[s].lim,r[o].lim),l,f;l=s;do l=i.parent(l),c.push(l);while(l&&(r[l].low>d||a>r[l].lim));for(f=l,l=o;(l=i.parent(l))!==f;)u.push(l);return{path:c.concat(u.reverse()),lca:f}}function n(i){let r={},s=0;function o(c){let u=s;i.children(c).forEach(o),r[c]={low:u,lim:s++}}return i.children().forEach(o),r}return Qn}var Jn,Gi;function Jc(){if(Gi)return Jn;Gi=1;let e=se();Jn={run:t,cleanup:s};function t(o){let c=e.addDummyNode(o,"root",{},"_root"),u=i(o),d=Object.values(u),a=e.applyWithChunking(Math.max,d)-1,l=2*a+1;o.graph().nestingRoot=c,o.edges().forEach(h=>o.edge(h).minlen*=l);let f=r(o)+1;o.children().forEach(h=>n(o,c,l,f,a,u,h)),o.graph().nodeRankFactor=l}function n(o,c,u,d,a,l,f){let h=o.children(f);if(!h.length){f!==c&&o.setEdge(c,f,{weight:0,minlen:u});return}let w=e.addBorderNode(o,"_bt"),y=e.addBorderNode(o,"_bb"),p=o.node(f);o.setParent(w,f),p.borderTop=w,o.setParent(y,f),p.borderBottom=y,h.forEach(m=>{n(o,c,u,d,a,l,m);let x=o.node(m),_=x.borderTop?x.borderTop:m,v=x.borderBottom?x.borderBottom:m,S=x.borderTop?d:2*d,I=_!==v?1:a-l[f]+1;o.setEdge(w,_,{weight:S,minlen:I,nestingEdge:!0}),o.setEdge(v,y,{weight:S,minlen:I,nestingEdge:!0})}),o.parent(f)||o.setEdge(c,w,{weight:0,minlen:a+l[f]})}function i(o){var c={};function u(d,a){var l=o.children(d);l&&l.length&&l.forEach(f=>u(f,a+1)),c[d]=a}return o.children().forEach(d=>u(d,1)),c}function r(o){return o.edges().reduce((c,u)=>c+o.edge(u).weight,0)}function s(o){var c=o.graph();o.removeNode(c.nestingRoot),delete c.nestingRoot,o.edges().forEach(u=>{var d=o.edge(u);d.nestingEdge&&o.removeEdge(u)})}return Jn}var er,Yi;function eu(){if(Yi)return er;Yi=1;let e=se();er=t;function t(i){function r(s){let o=i.children(s),c=i.node(s);if(o.length&&o.forEach(r),Object.hasOwn(c,"minRank")){c.borderLeft=[],c.borderRight=[];for(let u=c.minRank,d=c.maxRank+1;u<d;++u)n(i,"borderLeft","_bl",s,c,u),n(i,"borderRight","_br",s,c,u)}}i.children().forEach(r)}function n(i,r,s,o,c,u){let d={width:0,height:0,rank:u,borderType:r},a=c[r][u-1],l=e.addDummyNode(i,"border",d,s);c[r][u]=l,i.setParent(l,o),a&&i.setEdge(a,l,{weight:1})}return er}var tr,Wi;function tu(){if(Wi)return tr;Wi=1,tr={adjust:e,undo:t};function e(u){let d=u.graph().rankdir.toLowerCase();(d==="lr"||d==="rl")&&n(u)}function t(u){let d=u.graph().rankdir.toLowerCase();(d==="bt"||d==="rl")&&r(u),(d==="lr"||d==="rl")&&(o(u),n(u))}function n(u){u.nodes().forEach(d=>i(u.node(d))),u.edges().forEach(d=>i(u.edge(d)))}function i(u){let d=u.width;u.width=u.height,u.height=d}function r(u){u.nodes().forEach(d=>s(u.node(d))),u.edges().forEach(d=>{let a=u.edge(d);a.points.forEach(s),Object.hasOwn(a,"y")&&s(a)})}function s(u){u.y=-u.y}function o(u){u.nodes().forEach(d=>c(u.node(d))),u.edges().forEach(d=>{let a=u.edge(d);a.points.forEach(c),Object.hasOwn(a,"x")&&c(a)})}function c(u){let d=u.x;u.x=u.y,u.y=d}return tr}var nr,Ui;function nu(){if(Ui)return nr;Ui=1;let e=se();nr=t;function t(n){let i={},r=n.nodes().filter(a=>!n.children(a).length),s=r.map(a=>n.node(a).rank),o=e.applyWithChunking(Math.max,s),c=e.range(o+1).map(()=>[]);function u(a){if(i[a])return;i[a]=!0;let l=n.node(a);c[l.rank].push(a),n.successors(a).forEach(u)}return r.sort((a,l)=>n.node(a).rank-n.node(l).rank).forEach(u),c}return nr}var rr,Xi;function ru(){if(Xi)return rr;Xi=1;let e=se().zipObject;rr=t;function t(i,r){let s=0;for(let o=1;o<r.length;++o)s+=n(i,r[o-1],r[o]);return s}function n(i,r,s){let o=e(s,s.map((f,h)=>h)),c=r.flatMap(f=>i.outEdges(f).map(h=>({pos:o[h.w],weight:i.edge(h).weight})).sort((h,w)=>h.pos-w.pos)),u=1;for(;u<s.length;)u<<=1;let d=2*u-1;u-=1;let a=new Array(d).fill(0),l=0;return c.forEach(f=>{let h=f.pos+u;a[h]+=f.weight;let w=0;for(;h>0;)h%2&&(w+=a[h+1]),h=h-1>>1,a[h]+=f.weight;l+=f.weight*w}),l}return rr}var ir,Zi;function iu(){if(Zi)return ir;Zi=1,ir=e;function e(t,n=[]){return n.map(i=>{let r=t.inEdges(i);if(r.length){let s=r.reduce((o,c)=>{let u=t.edge(c),d=t.node(c.v);return{sum:o.sum+u.weight*d.order,weight:o.weight+u.weight}},{sum:0,weight:0});return{v:i,barycenter:s.sum/s.weight,weight:s.weight}}else return{v:i}})}return ir}var or,Ki;function ou(){if(Ki)return or;Ki=1;let e=se();or=t;function t(r,s){let o={};r.forEach((u,d)=>{let a=o[u.v]={indegree:0,in:[],out:[],vs:[u.v],i:d};u.barycenter!==void 0&&(a.barycenter=u.barycenter,a.weight=u.weight)}),s.edges().forEach(u=>{let d=o[u.v],a=o[u.w];d!==void 0&&a!==void 0&&(a.indegree++,d.out.push(o[u.w]))});let c=Object.values(o).filter(u=>!u.indegree);return n(c)}function n(r){let s=[];function o(u){return d=>{d.merged||(d.barycenter===void 0||u.barycenter===void 0||d.barycenter>=u.barycenter)&&i(u,d)}}function c(u){return d=>{d.in.push(u),--d.indegree===0&&r.push(d)}}for(;r.length;){let u=r.pop();s.push(u),u.in.reverse().forEach(o(u)),u.out.forEach(c(u))}return s.filter(u=>!u.merged).map(u=>e.pick(u,["vs","i","barycenter","weight"]))}function i(r,s){let o=0,c=0;r.weight&&(o+=r.barycenter*r.weight,c+=r.weight),s.weight&&(o+=s.barycenter*s.weight,c+=s.weight),r.vs=s.vs.concat(r.vs),r.barycenter=o/c,r.weight=c,r.i=Math.min(s.i,r.i),s.merged=!0}return or}var sr,Qi;function su(){if(Qi)return sr;Qi=1;let e=se();sr=t;function t(r,s){let o=e.partition(r,w=>Object.hasOwn(w,"barycenter")),c=o.lhs,u=o.rhs.sort((w,y)=>y.i-w.i),d=[],a=0,l=0,f=0;c.sort(i(!!s)),f=n(d,u,f),c.forEach(w=>{f+=w.vs.length,d.push(w.vs),a+=w.barycenter*w.weight,l+=w.weight,f=n(d,u,f)});let h={vs:d.flat(!0)};return l&&(h.barycenter=a/l,h.weight=l),h}function n(r,s,o){let c;for(;s.length&&(c=s[s.length-1]).i<=o;)s.pop(),r.push(c.vs),o++;return o}function i(r){return(s,o)=>s.barycenter<o.barycenter?-1:s.barycenter>o.barycenter?1:r?o.i-s.i:s.i-o.i}return sr}var ar,Ji;function au(){if(Ji)return ar;Ji=1;let e=iu(),t=ou(),n=su();ar=i;function i(o,c,u,d){let a=o.children(c),l=o.node(c),f=l?l.borderLeft:void 0,h=l?l.borderRight:void 0,w={};f&&(a=a.filter(x=>x!==f&&x!==h));let y=e(o,a);y.forEach(x=>{if(o.children(x.v).length){let _=i(o,x.v,u,d);w[x.v]=_,Object.hasOwn(_,"barycenter")&&s(x,_)}});let p=t(y,u);r(p,w);let m=n(p,d);if(f&&(m.vs=[f,m.vs,h].flat(!0),o.predecessors(f).length)){let x=o.node(o.predecessors(f)[0]),_=o.node(o.predecessors(h)[0]);Object.hasOwn(m,"barycenter")||(m.barycenter=0,m.weight=0),m.barycenter=(m.barycenter*m.weight+x.order+_.order)/(m.weight+2),m.weight+=2}return m}function r(o,c){o.forEach(u=>{u.vs=u.vs.flatMap(d=>c[d]?c[d].vs:d)})}function s(o,c){o.barycenter!==void 0?(o.barycenter=(o.barycenter*o.weight+c.barycenter*c.weight)/(o.weight+c.weight),o.weight+=c.weight):(o.barycenter=c.barycenter,o.weight=c.weight)}return ar}var cr,eo;function cu(){if(eo)return cr;eo=1;let e=Ee().Graph,t=se();cr=n;function n(r,s,o,c){c||(c=r.nodes());let u=i(r),d=new e({compound:!0}).setGraph({root:u}).setDefaultNodeLabel(a=>r.node(a));return c.forEach(a=>{let l=r.node(a),f=r.parent(a);(l.rank===s||l.minRank<=s&&s<=l.maxRank)&&(d.setNode(a),d.setParent(a,f||u),r[o](a).forEach(h=>{let w=h.v===a?h.w:h.v,y=d.edge(w,a),p=y!==void 0?y.weight:0;d.setEdge(w,a,{weight:r.edge(h).weight+p})}),Object.hasOwn(l,"minRank")&&d.setNode(a,{borderLeft:l.borderLeft[s],borderRight:l.borderRight[s]}))}),d}function i(r){for(var s;r.hasNode(s=t.uniqueId("_root")););return s}return cr}var ur,to;function uu(){if(to)return ur;to=1,ur=e;function e(t,n,i){let r={},s;i.forEach(o=>{let c=t.parent(o),u,d;for(;c;){if(u=t.parent(c),u?(d=r[u],r[u]=c):(d=s,s=c),d&&d!==c){n.setEdge(d,c);return}c=u}})}return ur}var lr,no;function lu(){if(no)return lr;no=1;let e=nu(),t=ru(),n=au(),i=cu(),r=uu(),s=Ee().Graph,o=se();lr=c;function c(l,f){if(f&&typeof f.customOrder=="function"){f.customOrder(l,c);return}let h=o.maxRank(l),w=u(l,o.range(1,h+1),"inEdges"),y=u(l,o.range(h-1,-1,-1),"outEdges"),p=e(l);if(a(l,p),f&&f.disableOptimalOrderHeuristic)return;let m=Number.POSITIVE_INFINITY,x;for(let _=0,v=0;v<4;++_,++v){d(_%2?w:y,_%4>=2),p=o.buildLayerMatrix(l);let S=t(l,p);S<m&&(v=0,x=Object.assign({},p),m=S)}a(l,x)}function u(l,f,h){const w=new Map,y=(p,m)=>{w.has(p)||w.set(p,[]),w.get(p).push(m)};for(const p of l.nodes()){const m=l.node(p);if(typeof m.rank=="number"&&y(m.rank,p),typeof m.minRank=="number"&&typeof m.maxRank=="number")for(let x=m.minRank;x<=m.maxRank;x++)x!==m.rank&&y(x,p)}return f.map(function(p){return i(l,p,h,w.get(p)||[])})}function d(l,f){let h=new s;l.forEach(function(w){let y=w.graph().root,p=n(w,y,h,f);p.vs.forEach((m,x)=>w.node(m).order=x),r(w,h,p.vs)})}function a(l,f){Object.values(f).forEach(h=>h.forEach((w,y)=>l.node(w).order=y))}return lr}var dr,ro;function du(){if(ro)return dr;ro=1;let e=Ee().Graph,t=se();dr={positionX:h,findType1Conflicts:n,findType2Conflicts:i,addConflict:s,hasConflict:o,verticalAlignment:c,horizontalCompaction:u,alignCoordinates:l,findSmallestWidthAlignment:a,balance:f};function n(p,m){let x={};function _(v,S){let I=0,$=0,b=v.length,E=S[S.length-1];return S.forEach((k,N)=>{let A=r(p,k),L=A?p.node(A).order:b;(A||k===E)&&(S.slice($,N+1).forEach(g=>{p.predecessors(g).forEach(T=>{let R=p.node(T),z=R.order;(z<I||L<z)&&!(R.dummy&&p.node(g).dummy)&&s(x,T,g)})}),$=N+1,I=L)}),S}return m.length&&m.reduce(_),x}function i(p,m){let x={};function _(S,I,$,b,E){let k;t.range(I,$).forEach(N=>{k=S[N],p.node(k).dummy&&p.predecessors(k).forEach(A=>{let L=p.node(A);L.dummy&&(L.order<b||L.order>E)&&s(x,A,k)})})}function v(S,I){let $=-1,b,E=0;return I.forEach((k,N)=>{if(p.node(k).dummy==="border"){let A=p.predecessors(k);A.length&&(b=p.node(A[0]).order,_(I,E,N,$,b),E=N,$=b)}_(I,E,I.length,b,S.length)}),I}return m.length&&m.reduce(v),x}function r(p,m){if(p.node(m).dummy)return p.predecessors(m).find(x=>p.node(x).dummy)}function s(p,m,x){if(m>x){let v=m;m=x,x=v}let _=p[m];_||(p[m]=_={}),_[x]=!0}function o(p,m,x){if(m>x){let _=m;m=x,x=_}return!!p[m]&&Object.hasOwn(p[m],x)}function c(p,m,x,_){let v={},S={},I={};return m.forEach($=>{$.forEach((b,E)=>{v[b]=b,S[b]=b,I[b]=E})}),m.forEach($=>{let b=-1;$.forEach(E=>{let k=_(E);if(k.length){k=k.sort((A,L)=>I[A]-I[L]);let N=(k.length-1)/2;for(let A=Math.floor(N),L=Math.ceil(N);A<=L;++A){let g=k[A];S[E]===E&&b<I[g]&&!o(x,E,g)&&(S[g]=E,S[E]=v[E]=v[g],b=I[g])}}})}),{root:v,align:S}}function u(p,m,x,_,v){let S={},I=d(p,m,x,v),$=v?"borderLeft":"borderRight";function b(N,A){let L=I.nodes(),g=L.pop(),T={};for(;g;)T[g]?N(g):(T[g]=!0,L.push(g),L=L.concat(A(g))),g=L.pop()}function E(N){S[N]=I.inEdges(N).reduce((A,L)=>Math.max(A,S[L.v]+I.edge(L)),0)}function k(N){let A=I.outEdges(N).reduce((g,T)=>Math.min(g,S[T.w]-I.edge(T)),Number.POSITIVE_INFINITY),L=p.node(N);A!==Number.POSITIVE_INFINITY&&L.borderType!==$&&(S[N]=Math.max(S[N],A))}return b(E,I.predecessors.bind(I)),b(k,I.successors.bind(I)),Object.keys(_).forEach(N=>S[N]=S[x[N]]),S}function d(p,m,x,_){let v=new e,S=p.graph(),I=w(S.nodesep,S.edgesep,_);return m.forEach($=>{let b;$.forEach(E=>{let k=x[E];if(v.setNode(k),b){var N=x[b],A=v.edge(N,k);v.setEdge(N,k,Math.max(I(p,E,b),A||0))}b=E})}),v}function a(p,m){return Object.values(m).reduce((x,_)=>{let v=Number.NEGATIVE_INFINITY,S=Number.POSITIVE_INFINITY;Object.entries(_).forEach(([$,b])=>{let E=y(p,$)/2;v=Math.max(b+E,v),S=Math.min(b-E,S)});const I=v-S;return I<x[0]&&(x=[I,_]),x},[Number.POSITIVE_INFINITY,null])[1]}function l(p,m){let x=Object.values(m),_=t.applyWithChunking(Math.min,x),v=t.applyWithChunking(Math.max,x);["u","d"].forEach(S=>{["l","r"].forEach(I=>{let $=S+I,b=p[$];if(b===m)return;let E=Object.values(b),k=_-t.applyWithChunking(Math.min,E);I!=="l"&&(k=v-t.applyWithChunking(Math.max,E)),k&&(p[$]=t.mapValues(b,N=>N+k))})})}function f(p,m){return t.mapValues(p.ul,(x,_)=>{if(m)return p[m.toLowerCase()][_];{let v=Object.values(p).map(S=>S[_]).sort((S,I)=>S-I);return(v[1]+v[2])/2}})}function h(p){let m=t.buildLayerMatrix(p),x=Object.assign(n(p,m),i(p,m)),_={},v;["u","d"].forEach(I=>{v=I==="u"?m:Object.values(m).reverse(),["l","r"].forEach($=>{$==="r"&&(v=v.map(N=>Object.values(N).reverse()));let b=(I==="u"?p.predecessors:p.successors).bind(p),E=c(p,v,x,b),k=u(p,v,E.root,E.align,$==="r");$==="r"&&(k=t.mapValues(k,N=>-N)),_[I+$]=k})});let S=a(p,_);return l(_,S),f(_,p.graph().align)}function w(p,m,x){return(_,v,S)=>{let I=_.node(v),$=_.node(S),b=0,E;if(b+=I.width/2,Object.hasOwn(I,"labelpos"))switch(I.labelpos.toLowerCase()){case"l":E=-I.width/2;break;case"r":E=I.width/2;break}if(E&&(b+=x?E:-E),E=0,b+=(I.dummy?m:p)/2,b+=($.dummy?m:p)/2,b+=$.width/2,Object.hasOwn($,"labelpos"))switch($.labelpos.toLowerCase()){case"l":E=$.width/2;break;case"r":E=-$.width/2;break}return E&&(b+=x?E:-E),E=0,b}}function y(p,m){return p.node(m).width}return dr}var fr,io;function fu(){if(io)return fr;io=1;let e=se(),t=du().positionX;fr=n;function n(r){r=e.asNonCompoundGraph(r),i(r),Object.entries(t(r)).forEach(([s,o])=>r.node(s).x=o)}function i(r){let s=e.buildLayerMatrix(r),o=r.graph().ranksep,c=0;s.forEach(u=>{const d=u.reduce((a,l)=>{const f=r.node(l).height;return a>f?a:f},0);u.forEach(a=>r.node(a).y=c+d/2),c+=d+o})}return fr}var hr,oo;function hu(){if(oo)return hr;oo=1;let e=Uc(),t=Xc(),n=Kc(),i=se().normalizeRanks,r=Qc(),s=se().removeEmptyRanks,o=Jc(),c=eu(),u=tu(),d=lu(),a=fu(),l=se(),f=Ee().Graph;hr=h;function h(C,M){let D=M&&M.debugTiming?l.time:l.notime;D("layout",()=>{let V=D("  buildLayoutGraph",()=>b(C));D("  runLayout",()=>w(V,D,M)),D("  updateInputGraph",()=>y(C,V))})}function w(C,M,D){M("    makeSpaceForEdgeLabels",()=>E(C)),M("    removeSelfEdges",()=>F(C)),M("    acyclic",()=>e.run(C)),M("    nestingGraph.run",()=>o.run(C)),M("    rank",()=>n(l.asNonCompoundGraph(C))),M("    injectEdgeLabelProxies",()=>k(C)),M("    removeEmptyRanks",()=>s(C)),M("    nestingGraph.cleanup",()=>o.cleanup(C)),M("    normalizeRanks",()=>i(C)),M("    assignRankMinMax",()=>N(C)),M("    removeEdgeLabelProxies",()=>A(C)),M("    normalize.run",()=>t.run(C)),M("    parentDummyChains",()=>r(C)),M("    addBorderSegments",()=>c(C)),M("    order",()=>d(C,D)),M("    insertSelfEdges",()=>O(C)),M("    adjustCoordinateSystem",()=>u.adjust(C)),M("    position",()=>a(C)),M("    positionSelfEdges",()=>B(C)),M("    removeBorderNodes",()=>z(C)),M("    normalize.undo",()=>t.undo(C)),M("    fixupEdgeLabelCoords",()=>T(C)),M("    undoCoordinateSystem",()=>u.undo(C)),M("    translateGraph",()=>L(C)),M("    assignNodeIntersects",()=>g(C)),M("    reversePoints",()=>R(C)),M("    acyclic.undo",()=>e.undo(C))}function y(C,M){C.nodes().forEach(D=>{let V=C.node(D),G=M.node(D);V&&(V.x=G.x,V.y=G.y,V.rank=G.rank,M.children(D).length&&(V.width=G.width,V.height=G.height))}),C.edges().forEach(D=>{let V=C.edge(D),G=M.edge(D);V.points=G.points,Object.hasOwn(G,"x")&&(V.x=G.x,V.y=G.y)}),C.graph().width=M.graph().width,C.graph().height=M.graph().height}let p=["nodesep","edgesep","ranksep","marginx","marginy"],m={ranksep:50,edgesep:20,nodesep:50,rankdir:"tb"},x=["acyclicer","ranker","rankdir","align"],_=["width","height","rank"],v={width:0,height:0},S=["minlen","weight","width","height","labeloffset"],I={minlen:1,weight:1,width:0,height:0,labeloffset:10,labelpos:"r"},$=["labelpos"];function b(C){let M=new f({multigraph:!0,compound:!0}),D=j(C.graph());return M.setGraph(Object.assign({},m,H(D,p),l.pick(D,x))),C.nodes().forEach(V=>{let G=j(C.node(V));const W=H(G,_);Object.keys(v).forEach(X=>{W[X]===void 0&&(W[X]=v[X])}),M.setNode(V,W),M.setParent(V,C.parent(V))}),C.edges().forEach(V=>{let G=j(C.edge(V));M.setEdge(V,Object.assign({},I,H(G,S),l.pick(G,$)))}),M}function E(C){let M=C.graph();M.ranksep/=2,C.edges().forEach(D=>{let V=C.edge(D);V.minlen*=2,V.labelpos.toLowerCase()!=="c"&&(M.rankdir==="TB"||M.rankdir==="BT"?V.width+=V.labeloffset:V.height+=V.labeloffset)})}function k(C){C.edges().forEach(M=>{let D=C.edge(M);if(D.width&&D.height){let V=C.node(M.v),W={rank:(C.node(M.w).rank-V.rank)/2+V.rank,e:M};l.addDummyNode(C,"edge-proxy",W,"_ep")}})}function N(C){let M=0;C.nodes().forEach(D=>{let V=C.node(D);V.borderTop&&(V.minRank=C.node(V.borderTop).rank,V.maxRank=C.node(V.borderBottom).rank,M=Math.max(M,V.maxRank))}),C.graph().maxRank=M}function A(C){C.nodes().forEach(M=>{let D=C.node(M);D.dummy==="edge-proxy"&&(C.edge(D.e).labelRank=D.rank,C.removeNode(M))})}function L(C){let M=Number.POSITIVE_INFINITY,D=0,V=Number.POSITIVE_INFINITY,G=0,W=C.graph(),X=W.marginx||0,Z=W.marginy||0;function fe(ee){let J=ee.x,ae=ee.y,re=ee.width,pe=ee.height;M=Math.min(M,J-re/2),D=Math.max(D,J+re/2),V=Math.min(V,ae-pe/2),G=Math.max(G,ae+pe/2)}C.nodes().forEach(ee=>fe(C.node(ee))),C.edges().forEach(ee=>{let J=C.edge(ee);Object.hasOwn(J,"x")&&fe(J)}),M-=X,V-=Z,C.nodes().forEach(ee=>{let J=C.node(ee);J.x-=M,J.y-=V}),C.edges().forEach(ee=>{let J=C.edge(ee);J.points.forEach(ae=>{ae.x-=M,ae.y-=V}),Object.hasOwn(J,"x")&&(J.x-=M),Object.hasOwn(J,"y")&&(J.y-=V)}),W.width=D-M+X,W.height=G-V+Z}function g(C){C.edges().forEach(M=>{let D=C.edge(M),V=C.node(M.v),G=C.node(M.w),W,X;D.points?(W=D.points[0],X=D.points[D.points.length-1]):(D.points=[],W=G,X=V),D.points.unshift(l.intersectRect(V,W)),D.points.push(l.intersectRect(G,X))})}function T(C){C.edges().forEach(M=>{let D=C.edge(M);if(Object.hasOwn(D,"x"))switch((D.labelpos==="l"||D.labelpos==="r")&&(D.width-=D.labeloffset),D.labelpos){case"l":D.x-=D.width/2+D.labeloffset;break;case"r":D.x+=D.width/2+D.labeloffset;break}})}function R(C){C.edges().forEach(M=>{let D=C.edge(M);D.reversed&&D.points.reverse()})}function z(C){C.nodes().forEach(M=>{if(C.children(M).length){let D=C.node(M),V=C.node(D.borderTop),G=C.node(D.borderBottom),W=C.node(D.borderLeft[D.borderLeft.length-1]),X=C.node(D.borderRight[D.borderRight.length-1]);D.width=Math.abs(X.x-W.x),D.height=Math.abs(G.y-V.y),D.x=W.x+D.width/2,D.y=V.y+D.height/2}}),C.nodes().forEach(M=>{C.node(M).dummy==="border"&&C.removeNode(M)})}function F(C){C.edges().forEach(M=>{if(M.v===M.w){var D=C.node(M.v);D.selfEdges||(D.selfEdges=[]),D.selfEdges.push({e:M,label:C.edge(M)}),C.removeEdge(M)}})}function O(C){var M=l.buildLayerMatrix(C);M.forEach(D=>{var V=0;D.forEach((G,W)=>{var X=C.node(G);X.order=W+V,(X.selfEdges||[]).forEach(Z=>{l.addDummyNode(C,"selfedge",{width:Z.label.width,height:Z.label.height,rank:X.rank,order:W+ ++V,e:Z.e,label:Z.label},"_se")}),delete X.selfEdges})})}function B(C){C.nodes().forEach(M=>{var D=C.node(M);if(D.dummy==="selfedge"){var V=C.node(D.e.v),G=V.x+V.width/2,W=V.y,X=D.x-G,Z=V.height/2;C.setEdge(D.e,D.label),C.removeNode(M),D.label.points=[{x:G+2*X/3,y:W-Z},{x:G+5*X/6,y:W-Z},{x:G+X,y:W},{x:G+5*X/6,y:W+Z},{x:G+2*X/3,y:W+Z}],D.label.x=D.x,D.label.y=D.y}})}function H(C,M){return l.mapValues(l.pick(C,M),Number)}function j(C){var M={};return C&&Object.entries(C).forEach(([D,V])=>{typeof D=="string"&&(D=D.toLowerCase()),M[D]=V}),M}return hr}var pr,so;function pu(){if(so)return pr;so=1;let e=se(),t=Ee().Graph;pr={debugOrdering:n};function n(i){let r=e.buildLayerMatrix(i),s=new t({compound:!0,multigraph:!0}).setGraph({});return i.nodes().forEach(o=>{s.setNode(o,{label:o}),s.setParent(o,"layer"+i.node(o).rank)}),i.edges().forEach(o=>s.setEdge(o.v,o.w,{},o.name)),r.forEach((o,c)=>{let u="layer"+c;s.setNode(u,{rank:"same"}),o.reduce((d,a)=>(s.setEdge(d,a,{style:"invis"}),a))}),s}return pr}var gr,ao;function gu(){return ao||(ao=1,gr="1.1.8"),gr}var mr,co;function mu(){return co||(co=1,mr={graphlib:Ee(),layout:hu(),debug:pu(),util:{time:se().time,notime:se().notime},version:gu()}),mr}var yu=mu();const uo=ws(yu);function de(e){if(typeof e=="string"||typeof e=="number")return""+e;let t="";if(Array.isArray(e))for(let n=0,i;n<e.length;n++)(i=de(e[n]))!==""&&(t+=(t&&" ")+i);else for(let n in e)e[n]&&(t+=(t&&" ")+n);return t}var yr={exports:{}},wr={},xr={exports:{}},vr={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var lo;function wu(){if(lo)return vr;lo=1;var e=xs();function t(l,f){return l===f&&(l!==0||1/l===1/f)||l!==l&&f!==f}var n=typeof Object.is=="function"?Object.is:t,i=e.useState,r=e.useEffect,s=e.useLayoutEffect,o=e.useDebugValue;function c(l,f){var h=f(),w=i({inst:{value:h,getSnapshot:f}}),y=w[0].inst,p=w[1];return s(function(){y.value=h,y.getSnapshot=f,u(y)&&p({inst:y})},[l,h,f]),r(function(){return u(y)&&p({inst:y}),l(function(){u(y)&&p({inst:y})})},[l]),o(h),h}function u(l){var f=l.getSnapshot;l=l.value;try{var h=f();return!n(l,h)}catch{return!0}}function d(l,f){return f()}var a=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?d:c;return vr.useSyncExternalStore=e.useSyncExternalStore!==void 0?e.useSyncExternalStore:a,vr}var fo;function xu(){return fo||(fo=1,xr.exports=wu()),xr.exports}/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ho;function vu(){if(ho)return wr;ho=1;var e=xs(),t=xu();function n(d,a){return d===a&&(d!==0||1/d===1/a)||d!==d&&a!==a}var i=typeof Object.is=="function"?Object.is:n,r=t.useSyncExternalStore,s=e.useRef,o=e.useEffect,c=e.useMemo,u=e.useDebugValue;return wr.useSyncExternalStoreWithSelector=function(d,a,l,f,h){var w=s(null);if(w.current===null){var y={hasValue:!1,value:null};w.current=y}else y=w.current;w=c(function(){function m(I){if(!x){if(x=!0,_=I,I=f(I),h!==void 0&&y.hasValue){var $=y.value;if(h($,I))return v=$}return v=I}if($=v,i(_,I))return $;var b=f(I);return h!==void 0&&h($,b)?(_=I,$):(_=I,v=b)}var x=!1,_,v,S=l===void 0?null:l;return[function(){return m(a())},S===null?void 0:function(){return m(S())}]},[a,l,f,h]);var p=r(d,w[0],w[1]);return o(function(){y.hasValue=!0,y.value=p},[p]),u(p),p},wr}var po;function bu(){return po||(po=1,yr.exports=vu()),yr.exports}var Eu=bu();const _u=ws(Eu),Su={},go=e=>{let t;const n=new Set,i=(a,l)=>{const f=typeof a=="function"?a(t):a;if(!Object.is(f,t)){const h=t;t=l??(typeof f!="object"||f===null)?f:Object.assign({},t,f),n.forEach(w=>w(t,h))}},r=()=>t,u={setState:i,getState:r,getInitialState:()=>d,subscribe:a=>(n.add(a),()=>n.delete(a)),destroy:()=>{(Su?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),n.clear()}},d=t=e(i,r,u);return u},Nu=e=>e?go(e):go,{useDebugValue:ku}=P,{useSyncExternalStoreWithSelector:Cu}=_u,Iu=e=>e;function Is(e,t=Iu,n){const i=Cu(e.subscribe,e.getState,e.getServerState||e.getInitialState,t,n);return ku(i),i}const mo=(e,t)=>{const n=Nu(e),i=(r,s=t)=>Is(n,r,s);return Object.assign(i,n),i},Mu=(e,t)=>e?mo(e,t):mo;function le(e,t){if(Object.is(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(const[i,r]of e)if(!Object.is(r,t.get(i)))return!1;return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(const i of e)if(!t.has(i))return!1;return!0}const n=Object.keys(e);if(n.length!==Object.keys(t).length)return!1;for(const i of n)if(!Object.prototype.hasOwnProperty.call(t,i)||!Object.is(e[i],t[i]))return!1;return!0}var Au={value:()=>{}};function gn(){for(var e=0,t=arguments.length,n={},i;e<t;++e){if(!(i=arguments[e]+"")||i in n||/[\s.]/.test(i))throw new Error("illegal type: "+i);n[i]=[]}return new tn(n)}function tn(e){this._=e}function Ru(e,t){return e.trim().split(/^|\s+/).map(function(n){var i="",r=n.indexOf(".");if(r>=0&&(i=n.slice(r+1),n=n.slice(0,r)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:i}})}tn.prototype=gn.prototype={constructor:tn,on:function(e,t){var n=this._,i=Ru(e+"",n),r,s=-1,o=i.length;if(arguments.length<2){for(;++s<o;)if((r=(e=i[s]).type)&&(r=Tu(n[r],e.name)))return r;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++s<o;)if(r=(e=i[s]).type)n[r]=yo(n[r],e.name,t);else if(t==null)for(r in n)n[r]=yo(n[r],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new tn(e)},call:function(e,t){if((r=arguments.length-2)>0)for(var n=new Array(r),i=0,r,s;i<r;++i)n[i]=arguments[i+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(s=this._[e],i=0,r=s.length;i<r;++i)s[i].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var i=this._[e],r=0,s=i.length;r<s;++r)i[r].value.apply(t,n)}};function Tu(e,t){for(var n=0,i=e.length,r;n<i;++n)if((r=e[n]).name===t)return r.value}function yo(e,t,n){for(var i=0,r=e.length;i<r;++i)if(e[i].name===t){e[i]=Au,e=e.slice(0,i).concat(e.slice(i+1));break}return n!=null&&e.push({name:t,value:n}),e}var Ar="http://www.w3.org/1999/xhtml";const wo={svg:"http://www.w3.org/2000/svg",xhtml:Ar,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function mn(e){var t=e+="",n=t.indexOf(":");return n>=0&&(t=e.slice(0,n))!=="xmlns"&&(e=e.slice(n+1)),wo.hasOwnProperty(t)?{space:wo[t],local:e}:e}function Ou(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===Ar&&t.documentElement.namespaceURI===Ar?t.createElement(e):t.createElementNS(n,e)}}function $u(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function Ms(e){var t=mn(e);return(t.local?$u:Ou)(t)}function Du(){}function Wr(e){return e==null?Du:function(){return this.querySelector(e)}}function Pu(e){typeof e!="function"&&(e=Wr(e));for(var t=this._groups,n=t.length,i=new Array(n),r=0;r<n;++r)for(var s=t[r],o=s.length,c=i[r]=new Array(o),u,d,a=0;a<o;++a)(u=s[a])&&(d=e.call(u,u.__data__,a,s))&&("__data__"in u&&(d.__data__=u.__data__),c[a]=d);return new me(i,this._parents)}function Lu(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function qu(){return[]}function As(e){return e==null?qu:function(){return this.querySelectorAll(e)}}function zu(e){return function(){return Lu(e.apply(this,arguments))}}function Bu(e){typeof e=="function"?e=zu(e):e=As(e);for(var t=this._groups,n=t.length,i=[],r=[],s=0;s<n;++s)for(var o=t[s],c=o.length,u,d=0;d<c;++d)(u=o[d])&&(i.push(e.call(u,u.__data__,d,o)),r.push(u));return new me(i,r)}function Rs(e){return function(){return this.matches(e)}}function Ts(e){return function(t){return t.matches(e)}}var Vu=Array.prototype.find;function Hu(e){return function(){return Vu.call(this.children,e)}}function Fu(){return this.firstElementChild}function ju(e){return this.select(e==null?Fu:Hu(typeof e=="function"?e:Ts(e)))}var Gu=Array.prototype.filter;function Yu(){return Array.from(this.children)}function Wu(e){return function(){return Gu.call(this.children,e)}}function Uu(e){return this.selectAll(e==null?Yu:Wu(typeof e=="function"?e:Ts(e)))}function Xu(e){typeof e!="function"&&(e=Rs(e));for(var t=this._groups,n=t.length,i=new Array(n),r=0;r<n;++r)for(var s=t[r],o=s.length,c=i[r]=[],u,d=0;d<o;++d)(u=s[d])&&e.call(u,u.__data__,d,s)&&c.push(u);return new me(i,this._parents)}function Os(e){return new Array(e.length)}function Zu(){return new me(this._enter||this._groups.map(Os),this._parents)}function an(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}an.prototype={constructor:an,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function Ku(e){return function(){return e}}function Qu(e,t,n,i,r,s){for(var o=0,c,u=t.length,d=s.length;o<d;++o)(c=t[o])?(c.__data__=s[o],i[o]=c):n[o]=new an(e,s[o]);for(;o<u;++o)(c=t[o])&&(r[o]=c)}function Ju(e,t,n,i,r,s,o){var c,u,d=new Map,a=t.length,l=s.length,f=new Array(a),h;for(c=0;c<a;++c)(u=t[c])&&(f[c]=h=o.call(u,u.__data__,c,t)+"",d.has(h)?r[c]=u:d.set(h,u));for(c=0;c<l;++c)h=o.call(e,s[c],c,s)+"",(u=d.get(h))?(i[c]=u,u.__data__=s[c],d.delete(h)):n[c]=new an(e,s[c]);for(c=0;c<a;++c)(u=t[c])&&d.get(f[c])===u&&(r[c]=u)}function el(e){return e.__data__}function tl(e,t){if(!arguments.length)return Array.from(this,el);var n=t?Ju:Qu,i=this._parents,r=this._groups;typeof e!="function"&&(e=Ku(e));for(var s=r.length,o=new Array(s),c=new Array(s),u=new Array(s),d=0;d<s;++d){var a=i[d],l=r[d],f=l.length,h=nl(e.call(a,a&&a.__data__,d,i)),w=h.length,y=c[d]=new Array(w),p=o[d]=new Array(w),m=u[d]=new Array(f);n(a,l,y,p,m,h,t);for(var x=0,_=0,v,S;x<w;++x)if(v=y[x]){for(x>=_&&(_=x+1);!(S=p[_])&&++_<w;);v._next=S||null}}return o=new me(o,i),o._enter=c,o._exit=u,o}function nl(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function rl(){return new me(this._exit||this._groups.map(Os),this._parents)}function il(e,t,n){var i=this.enter(),r=this,s=this.exit();return typeof e=="function"?(i=e(i),i&&(i=i.selection())):i=i.append(e+""),t!=null&&(r=t(r),r&&(r=r.selection())),n==null?s.remove():n(s),i&&r?i.merge(r).order():r}function ol(e){for(var t=e.selection?e.selection():e,n=this._groups,i=t._groups,r=n.length,s=i.length,o=Math.min(r,s),c=new Array(r),u=0;u<o;++u)for(var d=n[u],a=i[u],l=d.length,f=c[u]=new Array(l),h,w=0;w<l;++w)(h=d[w]||a[w])&&(f[w]=h);for(;u<r;++u)c[u]=n[u];return new me(c,this._parents)}function sl(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var i=e[t],r=i.length-1,s=i[r],o;--r>=0;)(o=i[r])&&(s&&o.compareDocumentPosition(s)^4&&s.parentNode.insertBefore(o,s),s=o);return this}function al(e){e||(e=cl);function t(l,f){return l&&f?e(l.__data__,f.__data__):!l-!f}for(var n=this._groups,i=n.length,r=new Array(i),s=0;s<i;++s){for(var o=n[s],c=o.length,u=r[s]=new Array(c),d,a=0;a<c;++a)(d=o[a])&&(u[a]=d);u.sort(t)}return new me(r,this._parents).order()}function cl(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function ul(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function ll(){return Array.from(this)}function dl(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var i=e[t],r=0,s=i.length;r<s;++r){var o=i[r];if(o)return o}return null}function fl(){let e=0;for(const t of this)++e;return e}function hl(){return!this.node()}function pl(e){for(var t=this._groups,n=0,i=t.length;n<i;++n)for(var r=t[n],s=0,o=r.length,c;s<o;++s)(c=r[s])&&e.call(c,c.__data__,s,r);return this}function gl(e){return function(){this.removeAttribute(e)}}function ml(e){return function(){this.removeAttributeNS(e.space,e.local)}}function yl(e,t){return function(){this.setAttribute(e,t)}}function wl(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function xl(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}}function vl(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function bl(e,t){var n=mn(e);if(arguments.length<2){var i=this.node();return n.local?i.getAttributeNS(n.space,n.local):i.getAttribute(n)}return this.each((t==null?n.local?ml:gl:typeof t=="function"?n.local?vl:xl:n.local?wl:yl)(n,t))}function $s(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function El(e){return function(){this.style.removeProperty(e)}}function _l(e,t,n){return function(){this.style.setProperty(e,t,n)}}function Sl(e,t,n){return function(){var i=t.apply(this,arguments);i==null?this.style.removeProperty(e):this.style.setProperty(e,i,n)}}function Nl(e,t,n){return arguments.length>1?this.each((t==null?El:typeof t=="function"?Sl:_l)(e,t,n??"")):ht(this.node(),e)}function ht(e,t){return e.style.getPropertyValue(t)||$s(e).getComputedStyle(e,null).getPropertyValue(t)}function kl(e){return function(){delete this[e]}}function Cl(e,t){return function(){this[e]=t}}function Il(e,t){return function(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}}function Ml(e,t){return arguments.length>1?this.each((t==null?kl:typeof t=="function"?Il:Cl)(e,t)):this.node()[e]}function Ds(e){return e.trim().split(/^|\s+/)}function Ur(e){return e.classList||new Ps(e)}function Ps(e){this._node=e,this._names=Ds(e.getAttribute("class")||"")}Ps.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function Ls(e,t){for(var n=Ur(e),i=-1,r=t.length;++i<r;)n.add(t[i])}function qs(e,t){for(var n=Ur(e),i=-1,r=t.length;++i<r;)n.remove(t[i])}function Al(e){return function(){Ls(this,e)}}function Rl(e){return function(){qs(this,e)}}function Tl(e,t){return function(){(t.apply(this,arguments)?Ls:qs)(this,e)}}function Ol(e,t){var n=Ds(e+"");if(arguments.length<2){for(var i=Ur(this.node()),r=-1,s=n.length;++r<s;)if(!i.contains(n[r]))return!1;return!0}return this.each((typeof t=="function"?Tl:t?Al:Rl)(n,t))}function $l(){this.textContent=""}function Dl(e){return function(){this.textContent=e}}function Pl(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function Ll(e){return arguments.length?this.each(e==null?$l:(typeof e=="function"?Pl:Dl)(e)):this.node().textContent}function ql(){this.innerHTML=""}function zl(e){return function(){this.innerHTML=e}}function Bl(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function Vl(e){return arguments.length?this.each(e==null?ql:(typeof e=="function"?Bl:zl)(e)):this.node().innerHTML}function Hl(){this.nextSibling&&this.parentNode.appendChild(this)}function Fl(){return this.each(Hl)}function jl(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function Gl(){return this.each(jl)}function Yl(e){var t=typeof e=="function"?e:Ms(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function Wl(){return null}function Ul(e,t){var n=typeof e=="function"?e:Ms(e),i=t==null?Wl:typeof t=="function"?t:Wr(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),i.apply(this,arguments)||null)})}function Xl(){var e=this.parentNode;e&&e.removeChild(this)}function Zl(){return this.each(Xl)}function Kl(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function Ql(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function Jl(e){return this.select(e?Ql:Kl)}function ed(e){return arguments.length?this.property("__data__",e):this.node().__data__}function td(e){return function(t){e.call(this,t,this.__data__)}}function nd(e){return e.trim().split(/^|\s+/).map(function(t){var n="",i=t.indexOf(".");return i>=0&&(n=t.slice(i+1),t=t.slice(0,i)),{type:t,name:n}})}function rd(e){return function(){var t=this.__on;if(t){for(var n=0,i=-1,r=t.length,s;n<r;++n)s=t[n],(!e.type||s.type===e.type)&&s.name===e.name?this.removeEventListener(s.type,s.listener,s.options):t[++i]=s;++i?t.length=i:delete this.__on}}}function id(e,t,n){return function(){var i=this.__on,r,s=td(t);if(i){for(var o=0,c=i.length;o<c;++o)if((r=i[o]).type===e.type&&r.name===e.name){this.removeEventListener(r.type,r.listener,r.options),this.addEventListener(r.type,r.listener=s,r.options=n),r.value=t;return}}this.addEventListener(e.type,s,n),r={type:e.type,name:e.name,value:t,listener:s,options:n},i?i.push(r):this.__on=[r]}}function od(e,t,n){var i=nd(e+""),r,s=i.length,o;if(arguments.length<2){var c=this.node().__on;if(c){for(var u=0,d=c.length,a;u<d;++u)for(r=0,a=c[u];r<s;++r)if((o=i[r]).type===a.type&&o.name===a.name)return a.value}return}for(c=t?id:rd,r=0;r<s;++r)this.each(c(i[r],t,n));return this}function zs(e,t,n){var i=$s(e),r=i.CustomEvent;typeof r=="function"?r=new r(t,n):(r=i.document.createEvent("Event"),n?(r.initEvent(t,n.bubbles,n.cancelable),r.detail=n.detail):r.initEvent(t,!1,!1)),e.dispatchEvent(r)}function sd(e,t){return function(){return zs(this,e,t)}}function ad(e,t){return function(){return zs(this,e,t.apply(this,arguments))}}function cd(e,t){return this.each((typeof t=="function"?ad:sd)(e,t))}function*ud(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var i=e[t],r=0,s=i.length,o;r<s;++r)(o=i[r])&&(yield o)}var Bs=[null];function me(e,t){this._groups=e,this._parents=t}function zt(){return new me([[document.documentElement]],Bs)}function ld(){return this}me.prototype=zt.prototype={constructor:me,select:Pu,selectAll:Bu,selectChild:ju,selectChildren:Uu,filter:Xu,data:tl,enter:Zu,exit:rl,join:il,merge:ol,selection:ld,order:sl,sort:al,call:ul,nodes:ll,node:dl,size:fl,empty:hl,each:pl,attr:bl,style:Nl,property:Ml,classed:Ol,text:Ll,html:Vl,raise:Fl,lower:Gl,append:Yl,insert:Ul,remove:Zl,clone:Jl,datum:ed,on:od,dispatch:cd,[Symbol.iterator]:ud};function xe(e){return typeof e=="string"?new me([[document.querySelector(e)]],[document.documentElement]):new me([[e]],Bs)}function dd(e){let t;for(;t=e.sourceEvent;)e=t;return e}function Ne(e,t){if(e=dd(e),t===void 0&&(t=e.currentTarget),t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var i=n.createSVGPoint();return i.x=e.clientX,i.y=e.clientY,i=i.matrixTransform(t.getScreenCTM().inverse()),[i.x,i.y]}if(t.getBoundingClientRect){var r=t.getBoundingClientRect();return[e.clientX-r.left-t.clientLeft,e.clientY-r.top-t.clientTop]}}return[e.pageX,e.pageY]}const fd={passive:!1},Tt={capture:!0,passive:!1};function br(e){e.stopImmediatePropagation()}function ut(e){e.preventDefault(),e.stopImmediatePropagation()}function Vs(e){var t=e.document.documentElement,n=xe(e).on("dragstart.drag",ut,Tt);"onselectstart"in t?n.on("selectstart.drag",ut,Tt):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function Hs(e,t){var n=e.document.documentElement,i=xe(e).on("dragstart.drag",null);t&&(i.on("click.drag",ut,Tt),setTimeout(function(){i.on("click.drag",null)},0)),"onselectstart"in n?i.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}const Ft=e=>()=>e;function Rr(e,{sourceEvent:t,subject:n,target:i,identifier:r,active:s,x:o,y:c,dx:u,dy:d,dispatch:a}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},subject:{value:n,enumerable:!0,configurable:!0},target:{value:i,enumerable:!0,configurable:!0},identifier:{value:r,enumerable:!0,configurable:!0},active:{value:s,enumerable:!0,configurable:!0},x:{value:o,enumerable:!0,configurable:!0},y:{value:c,enumerable:!0,configurable:!0},dx:{value:u,enumerable:!0,configurable:!0},dy:{value:d,enumerable:!0,configurable:!0},_:{value:a}})}Rr.prototype.on=function(){var e=this._.on.apply(this._,arguments);return e===this._?this:e};function hd(e){return!e.ctrlKey&&!e.button}function pd(){return this.parentNode}function gd(e,t){return t??{x:e.x,y:e.y}}function md(){return navigator.maxTouchPoints||"ontouchstart"in this}function yd(){var e=hd,t=pd,n=gd,i=md,r={},s=gn("start","drag","end"),o=0,c,u,d,a,l=0;function f(v){v.on("mousedown.drag",h).filter(i).on("touchstart.drag",p).on("touchmove.drag",m,fd).on("touchend.drag touchcancel.drag",x).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function h(v,S){if(!(a||!e.call(this,v,S))){var I=_(this,t.call(this,v,S),v,S,"mouse");I&&(xe(v.view).on("mousemove.drag",w,Tt).on("mouseup.drag",y,Tt),Vs(v.view),br(v),d=!1,c=v.clientX,u=v.clientY,I("start",v))}}function w(v){if(ut(v),!d){var S=v.clientX-c,I=v.clientY-u;d=S*S+I*I>l}r.mouse("drag",v)}function y(v){xe(v.view).on("mousemove.drag mouseup.drag",null),Hs(v.view,d),ut(v),r.mouse("end",v)}function p(v,S){if(e.call(this,v,S)){var I=v.changedTouches,$=t.call(this,v,S),b=I.length,E,k;for(E=0;E<b;++E)(k=_(this,$,v,S,I[E].identifier,I[E]))&&(br(v),k("start",v,I[E]))}}function m(v){var S=v.changedTouches,I=S.length,$,b;for($=0;$<I;++$)(b=r[S[$].identifier])&&(ut(v),b("drag",v,S[$]))}function x(v){var S=v.changedTouches,I=S.length,$,b;for(a&&clearTimeout(a),a=setTimeout(function(){a=null},500),$=0;$<I;++$)(b=r[S[$].identifier])&&(br(v),b("end",v,S[$]))}function _(v,S,I,$,b,E){var k=s.copy(),N=Ne(E||I,S),A,L,g;if((g=n.call(v,new Rr("beforestart",{sourceEvent:I,target:f,identifier:b,active:o,x:N[0],y:N[1],dx:0,dy:0,dispatch:k}),$))!=null)return A=g.x-N[0]||0,L=g.y-N[1]||0,function T(R,z,F){var O=N,B;switch(R){case"start":r[b]=T,B=o++;break;case"end":delete r[b],--o;case"drag":N=Ne(F||z,S),B=o;break}k.call(R,v,new Rr(R,{sourceEvent:z,subject:g,target:f,identifier:b,active:B,x:N[0]+A,y:N[1]+L,dx:N[0]-O[0],dy:N[1]-O[1],dispatch:k}),$)}}return f.filter=function(v){return arguments.length?(e=typeof v=="function"?v:Ft(!!v),f):e},f.container=function(v){return arguments.length?(t=typeof v=="function"?v:Ft(v),f):t},f.subject=function(v){return arguments.length?(n=typeof v=="function"?v:Ft(v),f):n},f.touchable=function(v){return arguments.length?(i=typeof v=="function"?v:Ft(!!v),f):i},f.on=function(){var v=s.on.apply(s,arguments);return v===s?f:v},f.clickDistance=function(v){return arguments.length?(l=(v=+v)*v,f):Math.sqrt(l)},f}function Xr(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function Fs(e,t){var n=Object.create(e.prototype);for(var i in t)n[i]=t[i];return n}function Bt(){}var Ot=.7,cn=1/Ot,lt="\\s*([+-]?\\d+)\\s*",$t="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",ke="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",wd=/^#([0-9a-f]{3,8})$/,xd=new RegExp(`^rgb\\(${lt},${lt},${lt}\\)$`),vd=new RegExp(`^rgb\\(${ke},${ke},${ke}\\)$`),bd=new RegExp(`^rgba\\(${lt},${lt},${lt},${$t}\\)$`),Ed=new RegExp(`^rgba\\(${ke},${ke},${ke},${$t}\\)$`),_d=new RegExp(`^hsl\\(${$t},${ke},${ke}\\)$`),Sd=new RegExp(`^hsla\\(${$t},${ke},${ke},${$t}\\)$`),xo={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Xr(Bt,Dt,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:vo,formatHex:vo,formatHex8:Nd,formatHsl:kd,formatRgb:bo,toString:bo});function vo(){return this.rgb().formatHex()}function Nd(){return this.rgb().formatHex8()}function kd(){return js(this).formatHsl()}function bo(){return this.rgb().formatRgb()}function Dt(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=wd.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?Eo(t):n===3?new he(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?jt(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?jt(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=xd.exec(e))?new he(t[1],t[2],t[3],1):(t=vd.exec(e))?new he(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=bd.exec(e))?jt(t[1],t[2],t[3],t[4]):(t=Ed.exec(e))?jt(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=_d.exec(e))?No(t[1],t[2]/100,t[3]/100,1):(t=Sd.exec(e))?No(t[1],t[2]/100,t[3]/100,t[4]):xo.hasOwnProperty(e)?Eo(xo[e]):e==="transparent"?new he(NaN,NaN,NaN,0):null}function Eo(e){return new he(e>>16&255,e>>8&255,e&255,1)}function jt(e,t,n,i){return i<=0&&(e=t=n=NaN),new he(e,t,n,i)}function Cd(e){return e instanceof Bt||(e=Dt(e)),e?(e=e.rgb(),new he(e.r,e.g,e.b,e.opacity)):new he}function Tr(e,t,n,i){return arguments.length===1?Cd(e):new he(e,t,n,i??1)}function he(e,t,n,i){this.r=+e,this.g=+t,this.b=+n,this.opacity=+i}Xr(he,Tr,Fs(Bt,{brighter(e){return e=e==null?cn:Math.pow(cn,e),new he(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?Ot:Math.pow(Ot,e),new he(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new he(Ze(this.r),Ze(this.g),Ze(this.b),un(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:_o,formatHex:_o,formatHex8:Id,formatRgb:So,toString:So}));function _o(){return`#${Ue(this.r)}${Ue(this.g)}${Ue(this.b)}`}function Id(){return`#${Ue(this.r)}${Ue(this.g)}${Ue(this.b)}${Ue((isNaN(this.opacity)?1:this.opacity)*255)}`}function So(){const e=un(this.opacity);return`${e===1?"rgb(":"rgba("}${Ze(this.r)}, ${Ze(this.g)}, ${Ze(this.b)}${e===1?")":`, ${e})`}`}function un(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function Ze(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function Ue(e){return e=Ze(e),(e<16?"0":"")+e.toString(16)}function No(e,t,n,i){return i<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new ve(e,t,n,i)}function js(e){if(e instanceof ve)return new ve(e.h,e.s,e.l,e.opacity);if(e instanceof Bt||(e=Dt(e)),!e)return new ve;if(e instanceof ve)return e;e=e.rgb();var t=e.r/255,n=e.g/255,i=e.b/255,r=Math.min(t,n,i),s=Math.max(t,n,i),o=NaN,c=s-r,u=(s+r)/2;return c?(t===s?o=(n-i)/c+(n<i)*6:n===s?o=(i-t)/c+2:o=(t-n)/c+4,c/=u<.5?s+r:2-s-r,o*=60):c=u>0&&u<1?0:o,new ve(o,c,u,e.opacity)}function Md(e,t,n,i){return arguments.length===1?js(e):new ve(e,t,n,i??1)}function ve(e,t,n,i){this.h=+e,this.s=+t,this.l=+n,this.opacity=+i}Xr(ve,Md,Fs(Bt,{brighter(e){return e=e==null?cn:Math.pow(cn,e),new ve(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?Ot:Math.pow(Ot,e),new ve(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,i=n+(n<.5?n:1-n)*t,r=2*n-i;return new he(Er(e>=240?e-240:e+120,r,i),Er(e,r,i),Er(e<120?e+240:e-120,r,i),this.opacity)},clamp(){return new ve(ko(this.h),Gt(this.s),Gt(this.l),un(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=un(this.opacity);return`${e===1?"hsl(":"hsla("}${ko(this.h)}, ${Gt(this.s)*100}%, ${Gt(this.l)*100}%${e===1?")":`, ${e})`}`}}));function ko(e){return e=(e||0)%360,e<0?e+360:e}function Gt(e){return Math.max(0,Math.min(1,e||0))}function Er(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const Gs=e=>()=>e;function Ad(e,t){return function(n){return e+n*t}}function Rd(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(i){return Math.pow(e+i*t,n)}}function Td(e){return(e=+e)==1?Ys:function(t,n){return n-t?Rd(t,n,e):Gs(isNaN(t)?n:t)}}function Ys(e,t){var n=t-e;return n?Ad(e,n):Gs(isNaN(e)?t:e)}const Co=(function e(t){var n=Td(t);function i(r,s){var o=n((r=Tr(r)).r,(s=Tr(s)).r),c=n(r.g,s.g),u=n(r.b,s.b),d=Ys(r.opacity,s.opacity);return function(a){return r.r=o(a),r.g=c(a),r.b=u(a),r.opacity=d(a),r+""}}return i.gamma=e,i})(1);function De(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}var Or=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,_r=new RegExp(Or.source,"g");function Od(e){return function(){return e}}function $d(e){return function(t){return e(t)+""}}function Dd(e,t){var n=Or.lastIndex=_r.lastIndex=0,i,r,s,o=-1,c=[],u=[];for(e=e+"",t=t+"";(i=Or.exec(e))&&(r=_r.exec(t));)(s=r.index)>n&&(s=t.slice(n,s),c[o]?c[o]+=s:c[++o]=s),(i=i[0])===(r=r[0])?c[o]?c[o]+=r:c[++o]=r:(c[++o]=null,u.push({i:o,x:De(i,r)})),n=_r.lastIndex;return n<t.length&&(s=t.slice(n),c[o]?c[o]+=s:c[++o]=s),c.length<2?u[0]?$d(u[0].x):Od(t):(t=u.length,function(d){for(var a=0,l;a<t;++a)c[(l=u[a]).i]=l.x(d);return c.join("")})}var Io=180/Math.PI,$r={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Ws(e,t,n,i,r,s){var o,c,u;return(o=Math.sqrt(e*e+t*t))&&(e/=o,t/=o),(u=e*n+t*i)&&(n-=e*u,i-=t*u),(c=Math.sqrt(n*n+i*i))&&(n/=c,i/=c,u/=c),e*i<t*n&&(e=-e,t=-t,u=-u,o=-o),{translateX:r,translateY:s,rotate:Math.atan2(t,e)*Io,skewX:Math.atan(u)*Io,scaleX:o,scaleY:c}}var Yt;function Pd(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?$r:Ws(t.a,t.b,t.c,t.d,t.e,t.f)}function Ld(e){return e==null||(Yt||(Yt=document.createElementNS("http://www.w3.org/2000/svg","g")),Yt.setAttribute("transform",e),!(e=Yt.transform.baseVal.consolidate()))?$r:(e=e.matrix,Ws(e.a,e.b,e.c,e.d,e.e,e.f))}function Us(e,t,n,i){function r(d){return d.length?d.pop()+" ":""}function s(d,a,l,f,h,w){if(d!==l||a!==f){var y=h.push("translate(",null,t,null,n);w.push({i:y-4,x:De(d,l)},{i:y-2,x:De(a,f)})}else(l||f)&&h.push("translate("+l+t+f+n)}function o(d,a,l,f){d!==a?(d-a>180?a+=360:a-d>180&&(d+=360),f.push({i:l.push(r(l)+"rotate(",null,i)-2,x:De(d,a)})):a&&l.push(r(l)+"rotate("+a+i)}function c(d,a,l,f){d!==a?f.push({i:l.push(r(l)+"skewX(",null,i)-2,x:De(d,a)}):a&&l.push(r(l)+"skewX("+a+i)}function u(d,a,l,f,h,w){if(d!==l||a!==f){var y=h.push(r(h)+"scale(",null,",",null,")");w.push({i:y-4,x:De(d,l)},{i:y-2,x:De(a,f)})}else(l!==1||f!==1)&&h.push(r(h)+"scale("+l+","+f+")")}return function(d,a){var l=[],f=[];return d=e(d),a=e(a),s(d.translateX,d.translateY,a.translateX,a.translateY,l,f),o(d.rotate,a.rotate,l,f),c(d.skewX,a.skewX,l,f),u(d.scaleX,d.scaleY,a.scaleX,a.scaleY,l,f),d=a=null,function(h){for(var w=-1,y=f.length,p;++w<y;)l[(p=f[w]).i]=p.x(h);return l.join("")}}}var qd=Us(Pd,"px, ","px)","deg)"),zd=Us(Ld,", ",")",")"),Bd=1e-12;function Mo(e){return((e=Math.exp(e))+1/e)/2}function Vd(e){return((e=Math.exp(e))-1/e)/2}function Hd(e){return((e=Math.exp(2*e))-1)/(e+1)}const Fd=(function e(t,n,i){function r(s,o){var c=s[0],u=s[1],d=s[2],a=o[0],l=o[1],f=o[2],h=a-c,w=l-u,y=h*h+w*w,p,m;if(y<Bd)m=Math.log(f/d)/t,p=function($){return[c+$*h,u+$*w,d*Math.exp(t*$*m)]};else{var x=Math.sqrt(y),_=(f*f-d*d+i*y)/(2*d*n*x),v=(f*f-d*d-i*y)/(2*f*n*x),S=Math.log(Math.sqrt(_*_+1)-_),I=Math.log(Math.sqrt(v*v+1)-v);m=(I-S)/t,p=function($){var b=$*m,E=Mo(S),k=d/(n*x)*(E*Hd(t*b+S)-Vd(S));return[c+k*h,u+k*w,d*E/Mo(t*b+S)]}}return p.duration=m*1e3*t/Math.SQRT2,p}return r.rho=function(s){var o=Math.max(.001,+s),c=o*o,u=c*c;return e(o,c,u)},r})(Math.SQRT2,2,4);var pt=0,It=0,_t=0,Xs=1e3,ln,Mt,dn=0,Ke=0,yn=0,Pt=typeof performance=="object"&&performance.now?performance:Date,Zs=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function Zr(){return Ke||(Zs(jd),Ke=Pt.now()+yn)}function jd(){Ke=0}function fn(){this._call=this._time=this._next=null}fn.prototype=Ks.prototype={constructor:fn,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?Zr():+n)+(t==null?0:+t),!this._next&&Mt!==this&&(Mt?Mt._next=this:ln=this,Mt=this),this._call=e,this._time=n,Dr()},stop:function(){this._call&&(this._call=null,this._time=1/0,Dr())}};function Ks(e,t,n){var i=new fn;return i.restart(e,t,n),i}function Gd(){Zr(),++pt;for(var e=ln,t;e;)(t=Ke-e._time)>=0&&e._call.call(void 0,t),e=e._next;--pt}function Ao(){Ke=(dn=Pt.now())+yn,pt=It=0;try{Gd()}finally{pt=0,Wd(),Ke=0}}function Yd(){var e=Pt.now(),t=e-dn;t>Xs&&(yn-=t,dn=e)}function Wd(){for(var e,t=ln,n,i=1/0;t;)t._call?(i>t._time&&(i=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:ln=n);Mt=e,Dr(i)}function Dr(e){if(!pt){It&&(It=clearTimeout(It));var t=e-Ke;t>24?(e<1/0&&(It=setTimeout(Ao,e-Pt.now()-yn)),_t&&(_t=clearInterval(_t))):(_t||(dn=Pt.now(),_t=setInterval(Yd,Xs)),pt=1,Zs(Ao))}}function Ro(e,t,n){var i=new fn;return t=t==null?0:+t,i.restart(r=>{i.stop(),e(r+t)},t,n),i}var Ud=gn("start","end","cancel","interrupt"),Xd=[],Qs=0,To=1,Pr=2,nn=3,Oo=4,Lr=5,rn=6;function wn(e,t,n,i,r,s){var o=e.__transition;if(!o)e.__transition={};else if(n in o)return;Zd(e,n,{name:t,index:i,group:r,on:Ud,tween:Xd,time:s.time,delay:s.delay,duration:s.duration,ease:s.ease,timer:null,state:Qs})}function Kr(e,t){var n=_e(e,t);if(n.state>Qs)throw new Error("too late; already scheduled");return n}function Ce(e,t){var n=_e(e,t);if(n.state>nn)throw new Error("too late; already running");return n}function _e(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function Zd(e,t,n){var i=e.__transition,r;i[t]=n,n.timer=Ks(s,0,n.time);function s(d){n.state=To,n.timer.restart(o,n.delay,n.time),n.delay<=d&&o(d-n.delay)}function o(d){var a,l,f,h;if(n.state!==To)return u();for(a in i)if(h=i[a],h.name===n.name){if(h.state===nn)return Ro(o);h.state===Oo?(h.state=rn,h.timer.stop(),h.on.call("interrupt",e,e.__data__,h.index,h.group),delete i[a]):+a<t&&(h.state=rn,h.timer.stop(),h.on.call("cancel",e,e.__data__,h.index,h.group),delete i[a])}if(Ro(function(){n.state===nn&&(n.state=Oo,n.timer.restart(c,n.delay,n.time),c(d))}),n.state=Pr,n.on.call("start",e,e.__data__,n.index,n.group),n.state===Pr){for(n.state=nn,r=new Array(f=n.tween.length),a=0,l=-1;a<f;++a)(h=n.tween[a].value.call(e,e.__data__,n.index,n.group))&&(r[++l]=h);r.length=l+1}}function c(d){for(var a=d<n.duration?n.ease.call(null,d/n.duration):(n.timer.restart(u),n.state=Lr,1),l=-1,f=r.length;++l<f;)r[l].call(e,a);n.state===Lr&&(n.on.call("end",e,e.__data__,n.index,n.group),u())}function u(){n.state=rn,n.timer.stop(),delete i[t];for(var d in i)return;delete e.__transition}}function on(e,t){var n=e.__transition,i,r,s=!0,o;if(n){t=t==null?null:t+"";for(o in n){if((i=n[o]).name!==t){s=!1;continue}r=i.state>Pr&&i.state<Lr,i.state=rn,i.timer.stop(),i.on.call(r?"interrupt":"cancel",e,e.__data__,i.index,i.group),delete n[o]}s&&delete e.__transition}}function Kd(e){return this.each(function(){on(this,e)})}function Qd(e,t){var n,i;return function(){var r=Ce(this,e),s=r.tween;if(s!==n){i=n=s;for(var o=0,c=i.length;o<c;++o)if(i[o].name===t){i=i.slice(),i.splice(o,1);break}}r.tween=i}}function Jd(e,t,n){var i,r;if(typeof n!="function")throw new Error;return function(){var s=Ce(this,e),o=s.tween;if(o!==i){r=(i=o).slice();for(var c={name:t,value:n},u=0,d=r.length;u<d;++u)if(r[u].name===t){r[u]=c;break}u===d&&r.push(c)}s.tween=r}}function ef(e,t){var n=this._id;if(e+="",arguments.length<2){for(var i=_e(this.node(),n).tween,r=0,s=i.length,o;r<s;++r)if((o=i[r]).name===e)return o.value;return null}return this.each((t==null?Qd:Jd)(n,e,t))}function Qr(e,t,n){var i=e._id;return e.each(function(){var r=Ce(this,i);(r.value||(r.value={}))[t]=n.apply(this,arguments)}),function(r){return _e(r,i).value[t]}}function Js(e,t){var n;return(typeof t=="number"?De:t instanceof Dt?Co:(n=Dt(t))?(t=n,Co):Dd)(e,t)}function tf(e){return function(){this.removeAttribute(e)}}function nf(e){return function(){this.removeAttributeNS(e.space,e.local)}}function rf(e,t,n){var i,r=n+"",s;return function(){var o=this.getAttribute(e);return o===r?null:o===i?s:s=t(i=o,n)}}function of(e,t,n){var i,r=n+"",s;return function(){var o=this.getAttributeNS(e.space,e.local);return o===r?null:o===i?s:s=t(i=o,n)}}function sf(e,t,n){var i,r,s;return function(){var o,c=n(this),u;return c==null?void this.removeAttribute(e):(o=this.getAttribute(e),u=c+"",o===u?null:o===i&&u===r?s:(r=u,s=t(i=o,c)))}}function af(e,t,n){var i,r,s;return function(){var o,c=n(this),u;return c==null?void this.removeAttributeNS(e.space,e.local):(o=this.getAttributeNS(e.space,e.local),u=c+"",o===u?null:o===i&&u===r?s:(r=u,s=t(i=o,c)))}}function cf(e,t){var n=mn(e),i=n==="transform"?zd:Js;return this.attrTween(e,typeof t=="function"?(n.local?af:sf)(n,i,Qr(this,"attr."+e,t)):t==null?(n.local?nf:tf)(n):(n.local?of:rf)(n,i,t))}function uf(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function lf(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function df(e,t){var n,i;function r(){var s=t.apply(this,arguments);return s!==i&&(n=(i=s)&&lf(e,s)),n}return r._value=t,r}function ff(e,t){var n,i;function r(){var s=t.apply(this,arguments);return s!==i&&(n=(i=s)&&uf(e,s)),n}return r._value=t,r}function hf(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;var i=mn(e);return this.tween(n,(i.local?df:ff)(i,t))}function pf(e,t){return function(){Kr(this,e).delay=+t.apply(this,arguments)}}function gf(e,t){return t=+t,function(){Kr(this,e).delay=t}}function mf(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?pf:gf)(t,e)):_e(this.node(),t).delay}function yf(e,t){return function(){Ce(this,e).duration=+t.apply(this,arguments)}}function wf(e,t){return t=+t,function(){Ce(this,e).duration=t}}function xf(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?yf:wf)(t,e)):_e(this.node(),t).duration}function vf(e,t){if(typeof t!="function")throw new Error;return function(){Ce(this,e).ease=t}}function bf(e){var t=this._id;return arguments.length?this.each(vf(t,e)):_e(this.node(),t).ease}function Ef(e,t){return function(){var n=t.apply(this,arguments);if(typeof n!="function")throw new Error;Ce(this,e).ease=n}}function _f(e){if(typeof e!="function")throw new Error;return this.each(Ef(this._id,e))}function Sf(e){typeof e!="function"&&(e=Rs(e));for(var t=this._groups,n=t.length,i=new Array(n),r=0;r<n;++r)for(var s=t[r],o=s.length,c=i[r]=[],u,d=0;d<o;++d)(u=s[d])&&e.call(u,u.__data__,d,s)&&c.push(u);return new Te(i,this._parents,this._name,this._id)}function Nf(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,i=t.length,r=n.length,s=Math.min(i,r),o=new Array(i),c=0;c<s;++c)for(var u=t[c],d=n[c],a=u.length,l=o[c]=new Array(a),f,h=0;h<a;++h)(f=u[h]||d[h])&&(l[h]=f);for(;c<i;++c)o[c]=t[c];return new Te(o,this._parents,this._name,this._id)}function kf(e){return(e+"").trim().split(/^|\s+/).every(function(t){var n=t.indexOf(".");return n>=0&&(t=t.slice(0,n)),!t||t==="start"})}function Cf(e,t,n){var i,r,s=kf(t)?Kr:Ce;return function(){var o=s(this,e),c=o.on;c!==i&&(r=(i=c).copy()).on(t,n),o.on=r}}function If(e,t){var n=this._id;return arguments.length<2?_e(this.node(),n).on.on(e):this.each(Cf(n,e,t))}function Mf(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}function Af(){return this.on("end.remove",Mf(this._id))}function Rf(e){var t=this._name,n=this._id;typeof e!="function"&&(e=Wr(e));for(var i=this._groups,r=i.length,s=new Array(r),o=0;o<r;++o)for(var c=i[o],u=c.length,d=s[o]=new Array(u),a,l,f=0;f<u;++f)(a=c[f])&&(l=e.call(a,a.__data__,f,c))&&("__data__"in a&&(l.__data__=a.__data__),d[f]=l,wn(d[f],t,n,f,d,_e(a,n)));return new Te(s,this._parents,t,n)}function Tf(e){var t=this._name,n=this._id;typeof e!="function"&&(e=As(e));for(var i=this._groups,r=i.length,s=[],o=[],c=0;c<r;++c)for(var u=i[c],d=u.length,a,l=0;l<d;++l)if(a=u[l]){for(var f=e.call(a,a.__data__,l,u),h,w=_e(a,n),y=0,p=f.length;y<p;++y)(h=f[y])&&wn(h,t,n,y,f,w);s.push(f),o.push(a)}return new Te(s,o,t,n)}var Of=zt.prototype.constructor;function $f(){return new Of(this._groups,this._parents)}function Df(e,t){var n,i,r;return function(){var s=ht(this,e),o=(this.style.removeProperty(e),ht(this,e));return s===o?null:s===n&&o===i?r:r=t(n=s,i=o)}}function ea(e){return function(){this.style.removeProperty(e)}}function Pf(e,t,n){var i,r=n+"",s;return function(){var o=ht(this,e);return o===r?null:o===i?s:s=t(i=o,n)}}function Lf(e,t,n){var i,r,s;return function(){var o=ht(this,e),c=n(this),u=c+"";return c==null&&(u=c=(this.style.removeProperty(e),ht(this,e))),o===u?null:o===i&&u===r?s:(r=u,s=t(i=o,c))}}function qf(e,t){var n,i,r,s="style."+t,o="end."+s,c;return function(){var u=Ce(this,e),d=u.on,a=u.value[s]==null?c||(c=ea(t)):void 0;(d!==n||r!==a)&&(i=(n=d).copy()).on(o,r=a),u.on=i}}function zf(e,t,n){var i=(e+="")=="transform"?qd:Js;return t==null?this.styleTween(e,Df(e,i)).on("end.style."+e,ea(e)):typeof t=="function"?this.styleTween(e,Lf(e,i,Qr(this,"style."+e,t))).each(qf(this._id,e)):this.styleTween(e,Pf(e,i,t),n).on("end.style."+e,null)}function Bf(e,t,n){return function(i){this.style.setProperty(e,t.call(this,i),n)}}function Vf(e,t,n){var i,r;function s(){var o=t.apply(this,arguments);return o!==r&&(i=(r=o)&&Bf(e,o,n)),i}return s._value=t,s}function Hf(e,t,n){var i="style."+(e+="");if(arguments.length<2)return(i=this.tween(i))&&i._value;if(t==null)return this.tween(i,null);if(typeof t!="function")throw new Error;return this.tween(i,Vf(e,t,n??""))}function Ff(e){return function(){this.textContent=e}}function jf(e){return function(){var t=e(this);this.textContent=t??""}}function Gf(e){return this.tween("text",typeof e=="function"?jf(Qr(this,"text",e)):Ff(e==null?"":e+""))}function Yf(e){return function(t){this.textContent=e.call(this,t)}}function Wf(e){var t,n;function i(){var r=e.apply(this,arguments);return r!==n&&(t=(n=r)&&Yf(r)),t}return i._value=e,i}function Uf(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,Wf(e))}function Xf(){for(var e=this._name,t=this._id,n=ta(),i=this._groups,r=i.length,s=0;s<r;++s)for(var o=i[s],c=o.length,u,d=0;d<c;++d)if(u=o[d]){var a=_e(u,t);wn(u,e,n,d,o,{time:a.time+a.delay+a.duration,delay:0,duration:a.duration,ease:a.ease})}return new Te(i,this._parents,e,n)}function Zf(){var e,t,n=this,i=n._id,r=n.size();return new Promise(function(s,o){var c={value:o},u={value:function(){--r===0&&s()}};n.each(function(){var d=Ce(this,i),a=d.on;a!==e&&(t=(e=a).copy(),t._.cancel.push(c),t._.interrupt.push(c),t._.end.push(u)),d.on=t}),r===0&&s()})}var Kf=0;function Te(e,t,n,i){this._groups=e,this._parents=t,this._name=n,this._id=i}function ta(){return++Kf}var Ae=zt.prototype;Te.prototype={constructor:Te,select:Rf,selectAll:Tf,selectChild:Ae.selectChild,selectChildren:Ae.selectChildren,filter:Sf,merge:Nf,selection:$f,transition:Xf,call:Ae.call,nodes:Ae.nodes,node:Ae.node,size:Ae.size,empty:Ae.empty,each:Ae.each,on:If,attr:cf,attrTween:hf,style:zf,styleTween:Hf,text:Gf,textTween:Uf,remove:Af,tween:ef,delay:mf,duration:xf,ease:bf,easeVarying:_f,end:Zf,[Symbol.iterator]:Ae[Symbol.iterator]};function Qf(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var Jf={time:null,delay:0,duration:250,ease:Qf};function eh(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}function th(e){var t,n;e instanceof Te?(t=e._id,e=e._name):(t=ta(),(n=Jf).time=Zr(),e=e==null?null:e+"");for(var i=this._groups,r=i.length,s=0;s<r;++s)for(var o=i[s],c=o.length,u,d=0;d<c;++d)(u=o[d])&&wn(u,e,t,d,o,n||eh(u,t));return new Te(i,this._parents,e,t)}zt.prototype.interrupt=Kd;zt.prototype.transition=th;const Wt=e=>()=>e;function nh(e,{sourceEvent:t,target:n,transform:i,dispatch:r}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:i,enumerable:!0,configurable:!0},_:{value:r}})}function Re(e,t,n){this.k=e,this.x=t,this.y=n}Re.prototype={constructor:Re,scale:function(e){return e===1?this:new Re(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new Re(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var qe=new Re(1,0,0);Re.prototype;function Sr(e){e.stopImmediatePropagation()}function St(e){e.preventDefault(),e.stopImmediatePropagation()}function rh(e){return(!e.ctrlKey||e.type==="wheel")&&!e.button}function ih(){var e=this;return e instanceof SVGElement?(e=e.ownerSVGElement||e,e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]):[[0,0],[e.clientWidth,e.clientHeight]]}function $o(){return this.__zoom||qe}function oh(e){return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*(e.ctrlKey?10:1)}function sh(){return navigator.maxTouchPoints||"ontouchstart"in this}function ah(e,t,n){var i=e.invertX(t[0][0])-n[0][0],r=e.invertX(t[1][0])-n[1][0],s=e.invertY(t[0][1])-n[0][1],o=e.invertY(t[1][1])-n[1][1];return e.translate(r>i?(i+r)/2:Math.min(0,i)||Math.max(0,r),o>s?(s+o)/2:Math.min(0,s)||Math.max(0,o))}function ch(){var e=rh,t=ih,n=ah,i=oh,r=sh,s=[0,1/0],o=[[-1/0,-1/0],[1/0,1/0]],c=250,u=Fd,d=gn("start","zoom","end"),a,l,f,h=500,w=150,y=0,p=10;function m(g){g.property("__zoom",$o).on("wheel.zoom",b,{passive:!1}).on("mousedown.zoom",E).on("dblclick.zoom",k).filter(r).on("touchstart.zoom",N).on("touchmove.zoom",A).on("touchend.zoom touchcancel.zoom",L).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}m.transform=function(g,T,R,z){var F=g.selection?g.selection():g;F.property("__zoom",$o),g!==F?S(g,T,R,z):F.interrupt().each(function(){I(this,arguments).event(z).start().zoom(null,typeof T=="function"?T.apply(this,arguments):T).end()})},m.scaleBy=function(g,T,R,z){m.scaleTo(g,function(){var F=this.__zoom.k,O=typeof T=="function"?T.apply(this,arguments):T;return F*O},R,z)},m.scaleTo=function(g,T,R,z){m.transform(g,function(){var F=t.apply(this,arguments),O=this.__zoom,B=R==null?v(F):typeof R=="function"?R.apply(this,arguments):R,H=O.invert(B),j=typeof T=="function"?T.apply(this,arguments):T;return n(_(x(O,j),B,H),F,o)},R,z)},m.translateBy=function(g,T,R,z){m.transform(g,function(){return n(this.__zoom.translate(typeof T=="function"?T.apply(this,arguments):T,typeof R=="function"?R.apply(this,arguments):R),t.apply(this,arguments),o)},null,z)},m.translateTo=function(g,T,R,z,F){m.transform(g,function(){var O=t.apply(this,arguments),B=this.__zoom,H=z==null?v(O):typeof z=="function"?z.apply(this,arguments):z;return n(qe.translate(H[0],H[1]).scale(B.k).translate(typeof T=="function"?-T.apply(this,arguments):-T,typeof R=="function"?-R.apply(this,arguments):-R),O,o)},z,F)};function x(g,T){return T=Math.max(s[0],Math.min(s[1],T)),T===g.k?g:new Re(T,g.x,g.y)}function _(g,T,R){var z=T[0]-R[0]*g.k,F=T[1]-R[1]*g.k;return z===g.x&&F===g.y?g:new Re(g.k,z,F)}function v(g){return[(+g[0][0]+ +g[1][0])/2,(+g[0][1]+ +g[1][1])/2]}function S(g,T,R,z){g.on("start.zoom",function(){I(this,arguments).event(z).start()}).on("interrupt.zoom end.zoom",function(){I(this,arguments).event(z).end()}).tween("zoom",function(){var F=this,O=arguments,B=I(F,O).event(z),H=t.apply(F,O),j=R==null?v(H):typeof R=="function"?R.apply(F,O):R,C=Math.max(H[1][0]-H[0][0],H[1][1]-H[0][1]),M=F.__zoom,D=typeof T=="function"?T.apply(F,O):T,V=u(M.invert(j).concat(C/M.k),D.invert(j).concat(C/D.k));return function(G){if(G===1)G=D;else{var W=V(G),X=C/W[2];G=new Re(X,j[0]-W[0]*X,j[1]-W[1]*X)}B.zoom(null,G)}})}function I(g,T,R){return!R&&g.__zooming||new $(g,T)}function $(g,T){this.that=g,this.args=T,this.active=0,this.sourceEvent=null,this.extent=t.apply(g,T),this.taps=0}$.prototype={event:function(g){return g&&(this.sourceEvent=g),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(g,T){return this.mouse&&g!=="mouse"&&(this.mouse[1]=T.invert(this.mouse[0])),this.touch0&&g!=="touch"&&(this.touch0[1]=T.invert(this.touch0[0])),this.touch1&&g!=="touch"&&(this.touch1[1]=T.invert(this.touch1[0])),this.that.__zoom=T,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(g){var T=xe(this.that).datum();d.call(g,this.that,new nh(g,{sourceEvent:this.sourceEvent,target:m,transform:this.that.__zoom,dispatch:d}),T)}};function b(g,...T){if(!e.apply(this,arguments))return;var R=I(this,T).event(g),z=this.__zoom,F=Math.max(s[0],Math.min(s[1],z.k*Math.pow(2,i.apply(this,arguments)))),O=Ne(g);if(R.wheel)(R.mouse[0][0]!==O[0]||R.mouse[0][1]!==O[1])&&(R.mouse[1]=z.invert(R.mouse[0]=O)),clearTimeout(R.wheel);else{if(z.k===F)return;R.mouse=[O,z.invert(O)],on(this),R.start()}St(g),R.wheel=setTimeout(B,w),R.zoom("mouse",n(_(x(z,F),R.mouse[0],R.mouse[1]),R.extent,o));function B(){R.wheel=null,R.end()}}function E(g,...T){if(f||!e.apply(this,arguments))return;var R=g.currentTarget,z=I(this,T,!0).event(g),F=xe(g.view).on("mousemove.zoom",j,!0).on("mouseup.zoom",C,!0),O=Ne(g,R),B=g.clientX,H=g.clientY;Vs(g.view),Sr(g),z.mouse=[O,this.__zoom.invert(O)],on(this),z.start();function j(M){if(St(M),!z.moved){var D=M.clientX-B,V=M.clientY-H;z.moved=D*D+V*V>y}z.event(M).zoom("mouse",n(_(z.that.__zoom,z.mouse[0]=Ne(M,R),z.mouse[1]),z.extent,o))}function C(M){F.on("mousemove.zoom mouseup.zoom",null),Hs(M.view,z.moved),St(M),z.event(M).end()}}function k(g,...T){if(e.apply(this,arguments)){var R=this.__zoom,z=Ne(g.changedTouches?g.changedTouches[0]:g,this),F=R.invert(z),O=R.k*(g.shiftKey?.5:2),B=n(_(x(R,O),z,F),t.apply(this,T),o);St(g),c>0?xe(this).transition().duration(c).call(S,B,z,g):xe(this).call(m.transform,B,z,g)}}function N(g,...T){if(e.apply(this,arguments)){var R=g.touches,z=R.length,F=I(this,T,g.changedTouches.length===z).event(g),O,B,H,j;for(Sr(g),B=0;B<z;++B)H=R[B],j=Ne(H,this),j=[j,this.__zoom.invert(j),H.identifier],F.touch0?!F.touch1&&F.touch0[2]!==j[2]&&(F.touch1=j,F.taps=0):(F.touch0=j,O=!0,F.taps=1+!!a);a&&(a=clearTimeout(a)),O&&(F.taps<2&&(l=j[0],a=setTimeout(function(){a=null},h)),on(this),F.start())}}function A(g,...T){if(this.__zooming){var R=I(this,T).event(g),z=g.changedTouches,F=z.length,O,B,H,j;for(St(g),O=0;O<F;++O)B=z[O],H=Ne(B,this),R.touch0&&R.touch0[2]===B.identifier?R.touch0[0]=H:R.touch1&&R.touch1[2]===B.identifier&&(R.touch1[0]=H);if(B=R.that.__zoom,R.touch1){var C=R.touch0[0],M=R.touch0[1],D=R.touch1[0],V=R.touch1[1],G=(G=D[0]-C[0])*G+(G=D[1]-C[1])*G,W=(W=V[0]-M[0])*W+(W=V[1]-M[1])*W;B=x(B,Math.sqrt(G/W)),H=[(C[0]+D[0])/2,(C[1]+D[1])/2],j=[(M[0]+V[0])/2,(M[1]+V[1])/2]}else if(R.touch0)H=R.touch0[0],j=R.touch0[1];else return;R.zoom("touch",n(_(B,H,j),R.extent,o))}}function L(g,...T){if(this.__zooming){var R=I(this,T).event(g),z=g.changedTouches,F=z.length,O,B;for(Sr(g),f&&clearTimeout(f),f=setTimeout(function(){f=null},h),O=0;O<F;++O)B=z[O],R.touch0&&R.touch0[2]===B.identifier?delete R.touch0:R.touch1&&R.touch1[2]===B.identifier&&delete R.touch1;if(R.touch1&&!R.touch0&&(R.touch0=R.touch1,delete R.touch1),R.touch0)R.touch0[1]=this.__zoom.invert(R.touch0[0]);else if(R.end(),R.taps===2&&(B=Ne(B,this),Math.hypot(l[0]-B[0],l[1]-B[1])<p)){var H=xe(this).on("dblclick.zoom");H&&H.apply(this,arguments)}}}return m.wheelDelta=function(g){return arguments.length?(i=typeof g=="function"?g:Wt(+g),m):i},m.filter=function(g){return arguments.length?(e=typeof g=="function"?g:Wt(!!g),m):e},m.touchable=function(g){return arguments.length?(r=typeof g=="function"?g:Wt(!!g),m):r},m.extent=function(g){return arguments.length?(t=typeof g=="function"?g:Wt([[+g[0][0],+g[0][1]],[+g[1][0],+g[1][1]]]),m):t},m.scaleExtent=function(g){return arguments.length?(s[0]=+g[0],s[1]=+g[1],m):[s[0],s[1]]},m.translateExtent=function(g){return arguments.length?(o[0][0]=+g[0][0],o[1][0]=+g[1][0],o[0][1]=+g[0][1],o[1][1]=+g[1][1],m):[[o[0][0],o[0][1]],[o[1][0],o[1][1]]]},m.constrain=function(g){return arguments.length?(n=g,m):n},m.duration=function(g){return arguments.length?(c=+g,m):c},m.interpolate=function(g){return arguments.length?(u=g,m):u},m.on=function(){var g=d.on.apply(d,arguments);return g===d?m:g},m.clickDistance=function(g){return arguments.length?(y=(g=+g)*g,m):Math.sqrt(y)},m.tapDistance=function(g){return arguments.length?(p=+g,m):p},m}const xn=q.createContext(null),uh=xn.Provider,Oe={error001:()=>"[React Flow]: Seems like you have not used zustand provider as an ancestor. Help: https://reactflow.dev/error#001",error002:()=>"It looks like you've created a new nodeTypes or edgeTypes object. If this wasn't on purpose please define the nodeTypes/edgeTypes outside of the component or memoize them.",error003:e=>`Node type "${e}" not found. Using fallback type "default".`,error004:()=>"The React Flow parent container needs a width and a height to render the graph.",error005:()=>"Only child nodes can use a parent extent.",error006:()=>"Can't create edge. An edge needs a source and a target.",error007:e=>`The old edge with id=${e} does not exist.`,error009:e=>`Marker type "${e}" doesn't exist.`,error008:(e,t)=>`Couldn't create edge for ${e?"target":"source"} handle id: "${e?t.targetHandle:t.sourceHandle}", edge id: ${t.id}.`,error010:()=>"Handle: No node id found. Make sure to only use a Handle inside a custom Node.",error011:e=>`Edge type "${e}" not found. Using fallback type "default".`,error012:e=>`Node with id "${e}" does not exist, it may have been removed. This can happen when a node is deleted before the "onNodeClick" handler is called.`},na=Oe.error001();function ne(e,t){const n=q.useContext(xn);if(n===null)throw new Error(na);return Is(n,e,t)}const ce=()=>{const e=q.useContext(xn);if(e===null)throw new Error(na);return q.useMemo(()=>({getState:e.getState,setState:e.setState,subscribe:e.subscribe,destroy:e.destroy}),[e])},lh=e=>e.userSelectionActive?"none":"all";function ra({position:e,children:t,className:n,style:i,...r}){const s=ne(lh),o=`${e}`.split("-");return P.createElement("div",{className:de(["react-flow__panel",n,...o]),style:{...i,pointerEvents:s},...r},t)}function dh({proOptions:e,position:t="bottom-right"}){return e!=null&&e.hideAttribution?null:P.createElement(ra,{position:t,className:"react-flow__attribution","data-message":"Please only hide this attribution when you are subscribed to React Flow Pro: https://reactflow.dev/pro"},P.createElement("a",{href:"https://reactflow.dev",target:"_blank",rel:"noopener noreferrer","aria-label":"React Flow attribution"},"React Flow"))}const fh=({x:e,y:t,label:n,labelStyle:i={},labelShowBg:r=!0,labelBgStyle:s={},labelBgPadding:o=[2,4],labelBgBorderRadius:c=2,children:u,className:d,...a})=>{const l=q.useRef(null),[f,h]=q.useState({x:0,y:0,width:0,height:0}),w=de(["react-flow__edge-textwrapper",d]);return q.useEffect(()=>{if(l.current){const y=l.current.getBBox();h({x:y.x,y:y.y,width:y.width,height:y.height})}},[n]),typeof n>"u"||!n?null:P.createElement("g",{transform:`translate(${e-f.width/2} ${t-f.height/2})`,className:w,visibility:f.width?"visible":"hidden",...a},r&&P.createElement("rect",{width:f.width+2*o[0],x:-o[0],y:-o[1],height:f.height+2*o[1],className:"react-flow__edge-textbg",style:s,rx:c,ry:c}),P.createElement("text",{className:"react-flow__edge-text",y:f.height/2,dy:"0.3em",ref:l,style:i},n),u)};var hh=q.memo(fh);const Jr=e=>({width:e.offsetWidth,height:e.offsetHeight}),gt=(e,t=0,n=1)=>Math.min(Math.max(e,t),n),ei=(e={x:0,y:0},t)=>({x:gt(e.x,t[0][0],t[1][0]),y:gt(e.y,t[0][1],t[1][1])}),Do=(e,t,n)=>e<t?gt(Math.abs(e-t),1,50)/50:e>n?-gt(Math.abs(e-n),1,50)/50:0,ia=(e,t)=>{const n=Do(e.x,35,t.width-35)*20,i=Do(e.y,35,t.height-35)*20;return[n,i]},oa=e=>{var t;return((t=e.getRootNode)==null?void 0:t.call(e))||(window==null?void 0:window.document)},ph=(e,t)=>({x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x2,t.x2),y2:Math.max(e.y2,t.y2)}),ti=({x:e,y:t,width:n,height:i})=>({x:e,y:t,x2:e+n,y2:t+i}),gh=({x:e,y:t,x2:n,y2:i})=>({x:e,y:t,width:n-e,height:i-t}),Po=e=>({...e.positionAbsolute||{x:0,y:0},width:e.width||0,height:e.height||0}),qr=(e,t)=>{const n=Math.max(0,Math.min(e.x+e.width,t.x+t.width)-Math.max(e.x,t.x)),i=Math.max(0,Math.min(e.y+e.height,t.y+t.height)-Math.max(e.y,t.y));return Math.ceil(n*i)},mh=e=>ye(e.width)&&ye(e.height)&&ye(e.x)&&ye(e.y),ye=e=>!isNaN(e)&&isFinite(e),ie=Symbol.for("internals"),sa=["Enter"," ","Escape"],yh=(e,t)=>{},wh=e=>"nativeEvent"in e;function zr(e){var r,s;const t=wh(e)?e.nativeEvent:e,n=((s=(r=t.composedPath)==null?void 0:r.call(t))==null?void 0:s[0])||e.target;return["INPUT","SELECT","TEXTAREA"].includes(n==null?void 0:n.nodeName)||(n==null?void 0:n.hasAttribute("contenteditable"))||!!(n!=null&&n.closest(".nokey"))}const aa=e=>"clientX"in e,ze=(e,t)=>{var s,o;const n=aa(e),i=n?e.clientX:(s=e.touches)==null?void 0:s[0].clientX,r=n?e.clientY:(o=e.touches)==null?void 0:o[0].clientY;return{x:i-((t==null?void 0:t.left)??0),y:r-((t==null?void 0:t.top)??0)}},hn=()=>{var e;return typeof navigator<"u"&&((e=navigator==null?void 0:navigator.userAgent)==null?void 0:e.indexOf("Mac"))>=0},Vt=({id:e,path:t,labelX:n,labelY:i,label:r,labelStyle:s,labelShowBg:o,labelBgStyle:c,labelBgPadding:u,labelBgBorderRadius:d,style:a,markerEnd:l,markerStart:f,interactionWidth:h=20})=>P.createElement(P.Fragment,null,P.createElement("path",{id:e,style:a,d:t,fill:"none",className:"react-flow__edge-path",markerEnd:l,markerStart:f}),h&&P.createElement("path",{d:t,fill:"none",strokeOpacity:0,strokeWidth:h,className:"react-flow__edge-interaction"}),r&&ye(n)&&ye(i)?P.createElement(hh,{x:n,y:i,label:r,labelStyle:s,labelShowBg:o,labelBgStyle:c,labelBgPadding:u,labelBgBorderRadius:d}):null);Vt.displayName="BaseEdge";function Nt(e,t,n){return n===void 0?n:i=>{const r=t().edges.find(s=>s.id===e);r&&n(i,{...r})}}function ca({sourceX:e,sourceY:t,targetX:n,targetY:i}){const r=Math.abs(n-e)/2,s=n<e?n+r:n-r,o=Math.abs(i-t)/2,c=i<t?i+o:i-o;return[s,c,r,o]}function ua({sourceX:e,sourceY:t,targetX:n,targetY:i,sourceControlX:r,sourceControlY:s,targetControlX:o,targetControlY:c}){const u=e*.125+r*.375+o*.375+n*.125,d=t*.125+s*.375+c*.375+i*.125,a=Math.abs(u-e),l=Math.abs(d-t);return[u,d,a,l]}var Qe;(function(e){e.Strict="strict",e.Loose="loose"})(Qe||(Qe={}));var Xe;(function(e){e.Free="free",e.Vertical="vertical",e.Horizontal="horizontal"})(Xe||(Xe={}));var Lt;(function(e){e.Partial="partial",e.Full="full"})(Lt||(Lt={}));var Le;(function(e){e.Bezier="default",e.Straight="straight",e.Step="step",e.SmoothStep="smoothstep",e.SimpleBezier="simplebezier"})(Le||(Le={}));var mt;(function(e){e.Arrow="arrow",e.ArrowClosed="arrowclosed"})(mt||(mt={}));var Y;(function(e){e.Left="left",e.Top="top",e.Right="right",e.Bottom="bottom"})(Y||(Y={}));function Lo({pos:e,x1:t,y1:n,x2:i,y2:r}){return e===Y.Left||e===Y.Right?[.5*(t+i),n]:[t,.5*(n+r)]}function la({sourceX:e,sourceY:t,sourcePosition:n=Y.Bottom,targetX:i,targetY:r,targetPosition:s=Y.Top}){const[o,c]=Lo({pos:n,x1:e,y1:t,x2:i,y2:r}),[u,d]=Lo({pos:s,x1:i,y1:r,x2:e,y2:t}),[a,l,f,h]=ua({sourceX:e,sourceY:t,targetX:i,targetY:r,sourceControlX:o,sourceControlY:c,targetControlX:u,targetControlY:d});return[`M${e},${t} C${o},${c} ${u},${d} ${i},${r}`,a,l,f,h]}const ni=q.memo(({sourceX:e,sourceY:t,targetX:n,targetY:i,sourcePosition:r=Y.Bottom,targetPosition:s=Y.Top,label:o,labelStyle:c,labelShowBg:u,labelBgStyle:d,labelBgPadding:a,labelBgBorderRadius:l,style:f,markerEnd:h,markerStart:w,interactionWidth:y})=>{const[p,m,x]=la({sourceX:e,sourceY:t,sourcePosition:r,targetX:n,targetY:i,targetPosition:s});return P.createElement(Vt,{path:p,labelX:m,labelY:x,label:o,labelStyle:c,labelShowBg:u,labelBgStyle:d,labelBgPadding:a,labelBgBorderRadius:l,style:f,markerEnd:h,markerStart:w,interactionWidth:y})});ni.displayName="SimpleBezierEdge";const qo={[Y.Left]:{x:-1,y:0},[Y.Right]:{x:1,y:0},[Y.Top]:{x:0,y:-1},[Y.Bottom]:{x:0,y:1}},xh=({source:e,sourcePosition:t=Y.Bottom,target:n})=>t===Y.Left||t===Y.Right?e.x<n.x?{x:1,y:0}:{x:-1,y:0}:e.y<n.y?{x:0,y:1}:{x:0,y:-1},zo=(e,t)=>Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2));function vh({source:e,sourcePosition:t=Y.Bottom,target:n,targetPosition:i=Y.Top,center:r,offset:s}){const o=qo[t],c=qo[i],u={x:e.x+o.x*s,y:e.y+o.y*s},d={x:n.x+c.x*s,y:n.y+c.y*s},a=xh({source:u,sourcePosition:t,target:d}),l=a.x!==0?"x":"y",f=a[l];let h=[],w,y;const p={x:0,y:0},m={x:0,y:0},[x,_,v,S]=ca({sourceX:e.x,sourceY:e.y,targetX:n.x,targetY:n.y});if(o[l]*c[l]===-1){w=r.x??x,y=r.y??_;const $=[{x:w,y:u.y},{x:w,y:d.y}],b=[{x:u.x,y},{x:d.x,y}];o[l]===f?h=l==="x"?$:b:h=l==="x"?b:$}else{const $=[{x:u.x,y:d.y}],b=[{x:d.x,y:u.y}];if(l==="x"?h=o.x===f?b:$:h=o.y===f?$:b,t===i){const L=Math.abs(e[l]-n[l]);if(L<=s){const g=Math.min(s-1,s-L);o[l]===f?p[l]=(u[l]>e[l]?-1:1)*g:m[l]=(d[l]>n[l]?-1:1)*g}}if(t!==i){const L=l==="x"?"y":"x",g=o[l]===c[L],T=u[L]>d[L],R=u[L]<d[L];(o[l]===1&&(!g&&T||g&&R)||o[l]!==1&&(!g&&R||g&&T))&&(h=l==="x"?$:b)}const E={x:u.x+p.x,y:u.y+p.y},k={x:d.x+m.x,y:d.y+m.y},N=Math.max(Math.abs(E.x-h[0].x),Math.abs(k.x-h[0].x)),A=Math.max(Math.abs(E.y-h[0].y),Math.abs(k.y-h[0].y));N>=A?(w=(E.x+k.x)/2,y=h[0].y):(w=h[0].x,y=(E.y+k.y)/2)}return[[e,{x:u.x+p.x,y:u.y+p.y},...h,{x:d.x+m.x,y:d.y+m.y},n],w,y,v,S]}function bh(e,t,n,i){const r=Math.min(zo(e,t)/2,zo(t,n)/2,i),{x:s,y:o}=t;if(e.x===s&&s===n.x||e.y===o&&o===n.y)return`L${s} ${o}`;if(e.y===o){const d=e.x<n.x?-1:1,a=e.y<n.y?1:-1;return`L ${s+r*d},${o}Q ${s},${o} ${s},${o+r*a}`}const c=e.x<n.x?1:-1,u=e.y<n.y?-1:1;return`L ${s},${o+r*u}Q ${s},${o} ${s+r*c},${o}`}function Br({sourceX:e,sourceY:t,sourcePosition:n=Y.Bottom,targetX:i,targetY:r,targetPosition:s=Y.Top,borderRadius:o=5,centerX:c,centerY:u,offset:d=20}){const[a,l,f,h,w]=vh({source:{x:e,y:t},sourcePosition:n,target:{x:i,y:r},targetPosition:s,center:{x:c,y:u},offset:d});return[a.reduce((p,m,x)=>{let _="";return x>0&&x<a.length-1?_=bh(a[x-1],m,a[x+1],o):_=`${x===0?"M":"L"}${m.x} ${m.y}`,p+=_,p},""),l,f,h,w]}const vn=q.memo(({sourceX:e,sourceY:t,targetX:n,targetY:i,label:r,labelStyle:s,labelShowBg:o,labelBgStyle:c,labelBgPadding:u,labelBgBorderRadius:d,style:a,sourcePosition:l=Y.Bottom,targetPosition:f=Y.Top,markerEnd:h,markerStart:w,pathOptions:y,interactionWidth:p})=>{const[m,x,_]=Br({sourceX:e,sourceY:t,sourcePosition:l,targetX:n,targetY:i,targetPosition:f,borderRadius:y==null?void 0:y.borderRadius,offset:y==null?void 0:y.offset});return P.createElement(Vt,{path:m,labelX:x,labelY:_,label:r,labelStyle:s,labelShowBg:o,labelBgStyle:c,labelBgPadding:u,labelBgBorderRadius:d,style:a,markerEnd:h,markerStart:w,interactionWidth:p})});vn.displayName="SmoothStepEdge";const ri=q.memo(e=>{var t;return P.createElement(vn,{...e,pathOptions:q.useMemo(()=>{var n;return{borderRadius:0,offset:(n=e.pathOptions)==null?void 0:n.offset}},[(t=e.pathOptions)==null?void 0:t.offset])})});ri.displayName="StepEdge";function Eh({sourceX:e,sourceY:t,targetX:n,targetY:i}){const[r,s,o,c]=ca({sourceX:e,sourceY:t,targetX:n,targetY:i});return[`M ${e},${t}L ${n},${i}`,r,s,o,c]}const ii=q.memo(({sourceX:e,sourceY:t,targetX:n,targetY:i,label:r,labelStyle:s,labelShowBg:o,labelBgStyle:c,labelBgPadding:u,labelBgBorderRadius:d,style:a,markerEnd:l,markerStart:f,interactionWidth:h})=>{const[w,y,p]=Eh({sourceX:e,sourceY:t,targetX:n,targetY:i});return P.createElement(Vt,{path:w,labelX:y,labelY:p,label:r,labelStyle:s,labelShowBg:o,labelBgStyle:c,labelBgPadding:u,labelBgBorderRadius:d,style:a,markerEnd:l,markerStart:f,interactionWidth:h})});ii.displayName="StraightEdge";function Ut(e,t){return e>=0?.5*e:t*25*Math.sqrt(-e)}function Bo({pos:e,x1:t,y1:n,x2:i,y2:r,c:s}){switch(e){case Y.Left:return[t-Ut(t-i,s),n];case Y.Right:return[t+Ut(i-t,s),n];case Y.Top:return[t,n-Ut(n-r,s)];case Y.Bottom:return[t,n+Ut(r-n,s)]}}function da({sourceX:e,sourceY:t,sourcePosition:n=Y.Bottom,targetX:i,targetY:r,targetPosition:s=Y.Top,curvature:o=.25}){const[c,u]=Bo({pos:n,x1:e,y1:t,x2:i,y2:r,c:o}),[d,a]=Bo({pos:s,x1:i,y1:r,x2:e,y2:t,c:o}),[l,f,h,w]=ua({sourceX:e,sourceY:t,targetX:i,targetY:r,sourceControlX:c,sourceControlY:u,targetControlX:d,targetControlY:a});return[`M${e},${t} C${c},${u} ${d},${a} ${i},${r}`,l,f,h,w]}const pn=q.memo(({sourceX:e,sourceY:t,targetX:n,targetY:i,sourcePosition:r=Y.Bottom,targetPosition:s=Y.Top,label:o,labelStyle:c,labelShowBg:u,labelBgStyle:d,labelBgPadding:a,labelBgBorderRadius:l,style:f,markerEnd:h,markerStart:w,pathOptions:y,interactionWidth:p})=>{const[m,x,_]=da({sourceX:e,sourceY:t,sourcePosition:r,targetX:n,targetY:i,targetPosition:s,curvature:y==null?void 0:y.curvature});return P.createElement(Vt,{path:m,labelX:x,labelY:_,label:o,labelStyle:c,labelShowBg:u,labelBgStyle:d,labelBgPadding:a,labelBgBorderRadius:l,style:f,markerEnd:h,markerStart:w,interactionWidth:p})});pn.displayName="BezierEdge";const oi=q.createContext(null),_h=oi.Provider;oi.Consumer;const Sh=()=>q.useContext(oi),Nh=e=>"id"in e&&"source"in e&&"target"in e,kh=({source:e,sourceHandle:t,target:n,targetHandle:i})=>`reactflow__edge-${e}${t||""}-${n}${i||""}`,Vr=(e,t)=>typeof e>"u"?"":typeof e=="string"?e:`${t?`${t}__`:""}${Object.keys(e).sort().map(i=>`${i}=${e[i]}`).join("&")}`,Ch=(e,t)=>t.some(n=>n.source===e.source&&n.target===e.target&&(n.sourceHandle===e.sourceHandle||!n.sourceHandle&&!e.sourceHandle)&&(n.targetHandle===e.targetHandle||!n.targetHandle&&!e.targetHandle)),Ih=(e,t)=>{if(!e.source||!e.target)return t;let n;return Nh(e)?n={...e}:n={...e,id:kh(e)},Ch(n,t)?t:t.concat(n)},Hr=({x:e,y:t},[n,i,r],s,[o,c])=>{const u={x:(e-n)/r,y:(t-i)/r};return s?{x:o*Math.round(u.x/o),y:c*Math.round(u.y/c)}:u},fa=({x:e,y:t},[n,i,r])=>({x:e*r+n,y:t*r+i}),dt=(e,t=[0,0])=>{if(!e)return{x:0,y:0,positionAbsolute:{x:0,y:0}};const n=(e.width??0)*t[0],i=(e.height??0)*t[1],r={x:e.position.x-n,y:e.position.y-i};return{...r,positionAbsolute:e.positionAbsolute?{x:e.positionAbsolute.x-n,y:e.positionAbsolute.y-i}:r}},si=(e,t=[0,0])=>{if(e.length===0)return{x:0,y:0,width:0,height:0};const n=e.reduce((i,r)=>{const{x:s,y:o}=dt(r,t).positionAbsolute;return ph(i,ti({x:s,y:o,width:r.width||0,height:r.height||0}))},{x:1/0,y:1/0,x2:-1/0,y2:-1/0});return gh(n)},ha=(e,t,[n,i,r]=[0,0,1],s=!1,o=!1,c=[0,0])=>{const u={x:(t.x-n)/r,y:(t.y-i)/r,width:t.width/r,height:t.height/r},d=[];return e.forEach(a=>{const{width:l,height:f,selectable:h=!0,hidden:w=!1}=a;if(o&&!h||w)return!1;const{positionAbsolute:y}=dt(a,c),p={x:y.x,y:y.y,width:l||0,height:f||0},m=qr(u,p),x=typeof l>"u"||typeof f>"u"||l===null||f===null,_=s&&m>0,v=(l||0)*(f||0);(x||_||m>=v||a.dragging)&&d.push(a)}),d},pa=(e,t)=>{const n=e.map(i=>i.id);return t.filter(i=>n.includes(i.source)||n.includes(i.target))},ga=(e,t,n,i,r,s=.1)=>{const o=t/(e.width*(1+s)),c=n/(e.height*(1+s)),u=Math.min(o,c),d=gt(u,i,r),a=e.x+e.width/2,l=e.y+e.height/2,f=t/2-a*d,h=n/2-l*d;return{x:f,y:h,zoom:d}},We=(e,t=0)=>e.transition().duration(t);function Vo(e,t,n,i){return(t[n]||[]).reduce((r,s)=>{var o,c;return`${e.id}-${s.id}-${n}`!==i&&r.push({id:s.id||null,type:n,nodeId:e.id,x:(((o=e.positionAbsolute)==null?void 0:o.x)??0)+s.x+s.width/2,y:(((c=e.positionAbsolute)==null?void 0:c.y)??0)+s.y+s.height/2}),r},[])}function Mh(e,t,n,i,r,s){const{x:o,y:c}=ze(e),d=t.elementsFromPoint(o,c).find(w=>w.classList.contains("react-flow__handle"));if(d){const w=d.getAttribute("data-nodeid");if(w){const y=ai(void 0,d),p=d.getAttribute("data-handleid"),m=s({nodeId:w,id:p,type:y});if(m){const x=r.find(_=>_.nodeId===w&&_.type===y&&_.id===p);return{handle:{id:p,type:y,nodeId:w,x:(x==null?void 0:x.x)||n.x,y:(x==null?void 0:x.y)||n.y},validHandleResult:m}}}}let a=[],l=1/0;if(r.forEach(w=>{const y=Math.sqrt((w.x-n.x)**2+(w.y-n.y)**2);if(y<=i){const p=s(w);y<=l&&(y<l?a=[{handle:w,validHandleResult:p}]:y===l&&a.push({handle:w,validHandleResult:p}),l=y)}}),!a.length)return{handle:null,validHandleResult:ma()};if(a.length===1)return a[0];const f=a.some(({validHandleResult:w})=>w.isValid),h=a.some(({handle:w})=>w.type==="target");return a.find(({handle:w,validHandleResult:y})=>h?w.type==="target":f?y.isValid:!0)||a[0]}const Ah={source:null,target:null,sourceHandle:null,targetHandle:null},ma=()=>({handleDomNode:null,isValid:!1,connection:Ah,endHandle:null});function ya(e,t,n,i,r,s,o){const c=r==="target",u=o.querySelector(`.react-flow__handle[data-id="${e==null?void 0:e.nodeId}-${e==null?void 0:e.id}-${e==null?void 0:e.type}"]`),d={...ma(),handleDomNode:u};if(u){const a=ai(void 0,u),l=u.getAttribute("data-nodeid"),f=u.getAttribute("data-handleid"),h=u.classList.contains("connectable"),w=u.classList.contains("connectableend"),y={source:c?l:n,sourceHandle:c?f:i,target:c?n:l,targetHandle:c?i:f};d.connection=y,h&&w&&(t===Qe.Strict?c&&a==="source"||!c&&a==="target":l!==n||f!==i)&&(d.endHandle={nodeId:l,handleId:f,type:a},d.isValid=s(y))}return d}function Rh({nodes:e,nodeId:t,handleId:n,handleType:i}){return e.reduce((r,s)=>{if(s[ie]){const{handleBounds:o}=s[ie];let c=[],u=[];o&&(c=Vo(s,o,"source",`${t}-${n}-${i}`),u=Vo(s,o,"target",`${t}-${n}-${i}`)),r.push(...c,...u)}return r},[])}function ai(e,t){return e||(t!=null&&t.classList.contains("target")?"target":t!=null&&t.classList.contains("source")?"source":null)}function Nr(e){e==null||e.classList.remove("valid","connecting","react-flow__handle-valid","react-flow__handle-connecting")}function Th(e,t){let n=null;return t?n="valid":e&&!t&&(n="invalid"),n}function wa({event:e,handleId:t,nodeId:n,onConnect:i,isTarget:r,getState:s,setState:o,isValidConnection:c,edgeUpdaterType:u,onReconnectEnd:d}){const a=oa(e.target),{connectionMode:l,domNode:f,autoPanOnConnect:h,connectionRadius:w,onConnectStart:y,panBy:p,getNodes:m,cancelConnection:x}=s();let _=0,v;const{x:S,y:I}=ze(e),$=a==null?void 0:a.elementFromPoint(S,I),b=ai(u,$),E=f==null?void 0:f.getBoundingClientRect();if(!E||!b)return;let k,N=ze(e,E),A=!1,L=null,g=!1,T=null;const R=Rh({nodes:m(),nodeId:n,handleId:t,handleType:b}),z=()=>{if(!h)return;const[B,H]=ia(N,E);p({x:B,y:H}),_=requestAnimationFrame(z)};o({connectionPosition:N,connectionStatus:null,connectionNodeId:n,connectionHandleId:t,connectionHandleType:b,connectionStartHandle:{nodeId:n,handleId:t,type:b},connectionEndHandle:null}),y==null||y(e,{nodeId:n,handleId:t,handleType:b});function F(B){const{transform:H}=s();N=ze(B,E);const{handle:j,validHandleResult:C}=Mh(B,a,Hr(N,H,!1,[1,1]),w,R,M=>ya(M,l,n,t,r?"target":"source",c,a));if(v=j,A||(z(),A=!0),T=C.handleDomNode,L=C.connection,g=C.isValid,o({connectionPosition:v&&g?fa({x:v.x,y:v.y},H):N,connectionStatus:Th(!!v,g),connectionEndHandle:C.endHandle}),!v&&!g&&!T)return Nr(k);L.source!==L.target&&T&&(Nr(k),k=T,T.classList.add("connecting","react-flow__handle-connecting"),T.classList.toggle("valid",g),T.classList.toggle("react-flow__handle-valid",g))}function O(B){var H,j;(v||T)&&L&&g&&(i==null||i(L)),(j=(H=s()).onConnectEnd)==null||j.call(H,B),u&&(d==null||d(B)),Nr(k),x(),cancelAnimationFrame(_),A=!1,g=!1,L=null,T=null,a.removeEventListener("mousemove",F),a.removeEventListener("mouseup",O),a.removeEventListener("touchmove",F),a.removeEventListener("touchend",O)}a.addEventListener("mousemove",F),a.addEventListener("mouseup",O),a.addEventListener("touchmove",F),a.addEventListener("touchend",O)}const Ho=()=>!0,Oh=e=>({connectionStartHandle:e.connectionStartHandle,connectOnClick:e.connectOnClick,noPanClassName:e.noPanClassName}),$h=(e,t,n)=>i=>{const{connectionStartHandle:r,connectionEndHandle:s,connectionClickStartHandle:o}=i;return{connecting:(r==null?void 0:r.nodeId)===e&&(r==null?void 0:r.handleId)===t&&(r==null?void 0:r.type)===n||(s==null?void 0:s.nodeId)===e&&(s==null?void 0:s.handleId)===t&&(s==null?void 0:s.type)===n,clickConnecting:(o==null?void 0:o.nodeId)===e&&(o==null?void 0:o.handleId)===t&&(o==null?void 0:o.type)===n}},xa=q.forwardRef(({type:e="source",position:t=Y.Top,isValidConnection:n,isConnectable:i=!0,isConnectableStart:r=!0,isConnectableEnd:s=!0,id:o,onConnect:c,children:u,className:d,onMouseDown:a,onTouchStart:l,...f},h)=>{var E,k;const w=o||null,y=e==="target",p=ce(),m=Sh(),{connectOnClick:x,noPanClassName:_}=ne(Oh,le),{connecting:v,clickConnecting:S}=ne($h(m,w,e),le);m||(k=(E=p.getState()).onError)==null||k.call(E,"010",Oe.error010());const I=N=>{const{defaultEdgeOptions:A,onConnect:L,hasDefaultEdges:g}=p.getState(),T={...A,...N};if(g){const{edges:R,setEdges:z}=p.getState();z(Ih(T,R))}L==null||L(T),c==null||c(T)},$=N=>{if(!m)return;const A=aa(N);r&&(A&&N.button===0||!A)&&wa({event:N,handleId:w,nodeId:m,onConnect:I,isTarget:y,getState:p.getState,setState:p.setState,isValidConnection:n||p.getState().isValidConnection||Ho}),A?a==null||a(N):l==null||l(N)},b=N=>{const{onClickConnectStart:A,onClickConnectEnd:L,connectionClickStartHandle:g,connectionMode:T,isValidConnection:R}=p.getState();if(!m||!g&&!r)return;if(!g){A==null||A(N,{nodeId:m,handleId:w,handleType:e}),p.setState({connectionClickStartHandle:{nodeId:m,type:e,handleId:w}});return}const z=oa(N.target),F=n||R||Ho,{connection:O,isValid:B}=ya({nodeId:m,id:w,type:e},T,g.nodeId,g.handleId||null,g.type,F,z);B&&I(O),L==null||L(N),p.setState({connectionClickStartHandle:null})};return P.createElement("div",{"data-handleid":w,"data-nodeid":m,"data-handlepos":t,"data-id":`${m}-${w}-${e}`,className:de(["react-flow__handle",`react-flow__handle-${t}`,"nodrag",_,d,{source:!y,target:y,connectable:i,connectablestart:r,connectableend:s,connecting:S,connectionindicator:i&&(r&&!v||s&&v)}]),onMouseDown:$,onTouchStart:$,onClick:x?b:void 0,ref:h,...f},u)});xa.displayName="Handle";var yt=q.memo(xa);const va=({data:e,isConnectable:t,targetPosition:n=Y.Top,sourcePosition:i=Y.Bottom})=>P.createElement(P.Fragment,null,P.createElement(yt,{type:"target",position:n,isConnectable:t}),e==null?void 0:e.label,P.createElement(yt,{type:"source",position:i,isConnectable:t}));va.displayName="DefaultNode";var Fr=q.memo(va);const ba=({data:e,isConnectable:t,sourcePosition:n=Y.Bottom})=>P.createElement(P.Fragment,null,e==null?void 0:e.label,P.createElement(yt,{type:"source",position:n,isConnectable:t}));ba.displayName="InputNode";var Ea=q.memo(ba);const _a=({data:e,isConnectable:t,targetPosition:n=Y.Top})=>P.createElement(P.Fragment,null,P.createElement(yt,{type:"target",position:n,isConnectable:t}),e==null?void 0:e.label);_a.displayName="OutputNode";var Sa=q.memo(_a);const ci=()=>null;ci.displayName="GroupNode";const Dh=e=>({selectedNodes:e.getNodes().filter(t=>t.selected),selectedEdges:e.edges.filter(t=>t.selected).map(t=>({...t}))}),Xt=e=>e.id;function Ph(e,t){return le(e.selectedNodes.map(Xt),t.selectedNodes.map(Xt))&&le(e.selectedEdges.map(Xt),t.selectedEdges.map(Xt))}const Na=q.memo(({onSelectionChange:e})=>{const t=ce(),{selectedNodes:n,selectedEdges:i}=ne(Dh,Ph);return q.useEffect(()=>{const r={nodes:n,edges:i};e==null||e(r),t.getState().onSelectionChange.forEach(s=>s(r))},[n,i,e]),null});Na.displayName="SelectionListener";const Lh=e=>!!e.onSelectionChange;function qh({onSelectionChange:e}){const t=ne(Lh);return e||t?P.createElement(Na,{onSelectionChange:e}):null}const zh=e=>({setNodes:e.setNodes,setEdges:e.setEdges,setDefaultNodesAndEdges:e.setDefaultNodesAndEdges,setMinZoom:e.setMinZoom,setMaxZoom:e.setMaxZoom,setTranslateExtent:e.setTranslateExtent,setNodeExtent:e.setNodeExtent,reset:e.reset});function it(e,t){q.useEffect(()=>{typeof e<"u"&&t(e)},[e])}function K(e,t,n){q.useEffect(()=>{typeof t<"u"&&n({[e]:t})},[t])}const Bh=({nodes:e,edges:t,defaultNodes:n,defaultEdges:i,onConnect:r,onConnectStart:s,onConnectEnd:o,onClickConnectStart:c,onClickConnectEnd:u,nodesDraggable:d,nodesConnectable:a,nodesFocusable:l,edgesFocusable:f,edgesUpdatable:h,elevateNodesOnSelect:w,minZoom:y,maxZoom:p,nodeExtent:m,onNodesChange:x,onEdgesChange:_,elementsSelectable:v,connectionMode:S,snapGrid:I,snapToGrid:$,translateExtent:b,connectOnClick:E,defaultEdgeOptions:k,fitView:N,fitViewOptions:A,onNodesDelete:L,onEdgesDelete:g,onNodeDrag:T,onNodeDragStart:R,onNodeDragStop:z,onSelectionDrag:F,onSelectionDragStart:O,onSelectionDragStop:B,noPanClassName:H,nodeOrigin:j,rfId:C,autoPanOnConnect:M,autoPanOnNodeDrag:D,onError:V,connectionRadius:G,isValidConnection:W,nodeDragThreshold:X})=>{const{setNodes:Z,setEdges:fe,setDefaultNodesAndEdges:ee,setMinZoom:J,setMaxZoom:ae,setTranslateExtent:re,setNodeExtent:pe,reset:te}=ne(zh,le),U=ce();return q.useEffect(()=>{const ge=i==null?void 0:i.map(Be=>({...Be,...k}));return ee(n,ge),()=>{te()}},[]),K("defaultEdgeOptions",k,U.setState),K("connectionMode",S,U.setState),K("onConnect",r,U.setState),K("onConnectStart",s,U.setState),K("onConnectEnd",o,U.setState),K("onClickConnectStart",c,U.setState),K("onClickConnectEnd",u,U.setState),K("nodesDraggable",d,U.setState),K("nodesConnectable",a,U.setState),K("nodesFocusable",l,U.setState),K("edgesFocusable",f,U.setState),K("edgesUpdatable",h,U.setState),K("elementsSelectable",v,U.setState),K("elevateNodesOnSelect",w,U.setState),K("snapToGrid",$,U.setState),K("snapGrid",I,U.setState),K("onNodesChange",x,U.setState),K("onEdgesChange",_,U.setState),K("connectOnClick",E,U.setState),K("fitViewOnInit",N,U.setState),K("fitViewOnInitOptions",A,U.setState),K("onNodesDelete",L,U.setState),K("onEdgesDelete",g,U.setState),K("onNodeDrag",T,U.setState),K("onNodeDragStart",R,U.setState),K("onNodeDragStop",z,U.setState),K("onSelectionDrag",F,U.setState),K("onSelectionDragStart",O,U.setState),K("onSelectionDragStop",B,U.setState),K("noPanClassName",H,U.setState),K("nodeOrigin",j,U.setState),K("rfId",C,U.setState),K("autoPanOnConnect",M,U.setState),K("autoPanOnNodeDrag",D,U.setState),K("onError",V,U.setState),K("connectionRadius",G,U.setState),K("isValidConnection",W,U.setState),K("nodeDragThreshold",X,U.setState),it(e,Z),it(t,fe),it(y,J),it(p,ae),it(b,re),it(m,pe),null},Fo={display:"none"},Vh={position:"absolute",width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0px, 0px, 0px, 0px)",clipPath:"inset(100%)"},ka="react-flow__node-desc",Ca="react-flow__edge-desc",Hh="react-flow__aria-live",Fh=e=>e.ariaLiveMessage;function jh({rfId:e}){const t=ne(Fh);return P.createElement("div",{id:`${Hh}-${e}`,"aria-live":"assertive","aria-atomic":"true",style:Vh},t)}function Gh({rfId:e,disableKeyboardA11y:t}){return P.createElement(P.Fragment,null,P.createElement("div",{id:`${ka}-${e}`,style:Fo},"Press enter or space to select a node.",!t&&"You can then use the arrow keys to move the node around."," Press delete to remove it and escape to cancel."," "),P.createElement("div",{id:`${Ca}-${e}`,style:Fo},"Press enter or space to select an edge. You can then press delete to remove it or escape to cancel."),!t&&P.createElement(jh,{rfId:e}))}var qt=(e=null,t={actInsideInputWithModifier:!0})=>{const[n,i]=q.useState(!1),r=q.useRef(!1),s=q.useRef(new Set([])),[o,c]=q.useMemo(()=>{if(e!==null){const d=(Array.isArray(e)?e:[e]).filter(l=>typeof l=="string").map(l=>l.split("+")),a=d.reduce((l,f)=>l.concat(...f),[]);return[d,a]}return[[],[]]},[e]);return q.useEffect(()=>{const u=typeof document<"u"?document:null,d=(t==null?void 0:t.target)||u;if(e!==null){const a=h=>{if(r.current=h.ctrlKey||h.metaKey||h.shiftKey,(!r.current||r.current&&!t.actInsideInputWithModifier)&&zr(h))return!1;const y=Go(h.code,c);s.current.add(h[y]),jo(o,s.current,!1)&&(h.preventDefault(),i(!0))},l=h=>{if((!r.current||r.current&&!t.actInsideInputWithModifier)&&zr(h))return!1;const y=Go(h.code,c);jo(o,s.current,!0)?(i(!1),s.current.clear()):s.current.delete(h[y]),h.key==="Meta"&&s.current.clear(),r.current=!1},f=()=>{s.current.clear(),i(!1)};return d==null||d.addEventListener("keydown",a),d==null||d.addEventListener("keyup",l),window.addEventListener("blur",f),()=>{d==null||d.removeEventListener("keydown",a),d==null||d.removeEventListener("keyup",l),window.removeEventListener("blur",f)}}},[e,i]),n};function jo(e,t,n){return e.filter(i=>n||i.length===t.size).some(i=>i.every(r=>t.has(r)))}function Go(e,t){return t.includes(e)?"code":"key"}function Ia(e,t,n,i){var c,u;const r=e.parentNode||e.parentId;if(!r)return n;const s=t.get(r),o=dt(s,i);return Ia(s,t,{x:(n.x??0)+o.x,y:(n.y??0)+o.y,z:(((c=s[ie])==null?void 0:c.z)??0)>(n.z??0)?((u=s[ie])==null?void 0:u.z)??0:n.z??0},i)}function Ma(e,t,n){e.forEach(i=>{var s;const r=i.parentNode||i.parentId;if(r&&!e.has(r))throw new Error(`Parent node ${r} not found`);if(r||n!=null&&n[i.id]){const{x:o,y:c,z:u}=Ia(i,e,{...i.position,z:((s=i[ie])==null?void 0:s.z)??0},t);i.positionAbsolute={x:o,y:c},i[ie].z=u,n!=null&&n[i.id]&&(i[ie].isParent=!0)}})}function kr(e,t,n,i){const r=new Map,s={},o=i?1e3:0;return e.forEach(c=>{var h;const u=(ye(c.zIndex)?c.zIndex:0)+(c.selected?o:0),d=t.get(c.id),a={...c,positionAbsolute:{x:c.position.x,y:c.position.y}},l=c.parentNode||c.parentId;l&&(s[l]=!0);const f=(d==null?void 0:d.type)&&(d==null?void 0:d.type)!==c.type;Object.defineProperty(a,ie,{enumerable:!1,value:{handleBounds:f||(h=d==null?void 0:d[ie])==null?void 0:h.handleBounds,z:u}}),r.set(c.id,a)}),Ma(r,n,s),r}function Aa(e,t={}){const{getNodes:n,width:i,height:r,minZoom:s,maxZoom:o,d3Zoom:c,d3Selection:u,fitViewOnInitDone:d,fitViewOnInit:a,nodeOrigin:l}=e(),f=t.initial&&!d&&a;if(c&&u&&(f||!t.initial)){const w=n().filter(p=>{var x;const m=t.includeHiddenNodes?p.width&&p.height:!p.hidden;return(x=t.nodes)!=null&&x.length?m&&t.nodes.some(_=>_.id===p.id):m}),y=w.every(p=>p.width&&p.height);if(w.length>0&&y){const p=si(w,l),{x:m,y:x,zoom:_}=ga(p,i,r,t.minZoom??s,t.maxZoom??o,t.padding??.1),v=qe.translate(m,x).scale(_);return typeof t.duration=="number"&&t.duration>0?c.transform(We(u,t.duration),v):c.transform(u,v),!0}}return!1}function Yh(e,t){return e.forEach(n=>{const i=t.get(n.id);i&&t.set(i.id,{...i,[ie]:i[ie],selected:n.selected})}),new Map(t)}function Wh(e,t){return t.map(n=>{const i=e.find(r=>r.id===n.id);return i&&(n.selected=i.selected),n})}function Zt({changedNodes:e,changedEdges:t,get:n,set:i}){const{nodeInternals:r,edges:s,onNodesChange:o,onEdgesChange:c,hasDefaultNodes:u,hasDefaultEdges:d}=n();e!=null&&e.length&&(u&&i({nodeInternals:Yh(e,r)}),o==null||o(e)),t!=null&&t.length&&(d&&i({edges:Wh(t,s)}),c==null||c(t))}const ot=()=>{},Uh={zoomIn:ot,zoomOut:ot,zoomTo:ot,getZoom:()=>1,setViewport:ot,getViewport:()=>({x:0,y:0,zoom:1}),fitView:()=>!1,setCenter:ot,fitBounds:ot,project:e=>e,screenToFlowPosition:e=>e,flowToScreenPosition:e=>e,viewportInitialized:!1},Xh=e=>({d3Zoom:e.d3Zoom,d3Selection:e.d3Selection}),Zh=()=>{const e=ce(),{d3Zoom:t,d3Selection:n}=ne(Xh,le);return q.useMemo(()=>n&&t?{zoomIn:r=>t.scaleBy(We(n,r==null?void 0:r.duration),1.2),zoomOut:r=>t.scaleBy(We(n,r==null?void 0:r.duration),1/1.2),zoomTo:(r,s)=>t.scaleTo(We(n,s==null?void 0:s.duration),r),getZoom:()=>e.getState().transform[2],setViewport:(r,s)=>{const[o,c,u]=e.getState().transform,d=qe.translate(r.x??o,r.y??c).scale(r.zoom??u);t.transform(We(n,s==null?void 0:s.duration),d)},getViewport:()=>{const[r,s,o]=e.getState().transform;return{x:r,y:s,zoom:o}},fitView:r=>Aa(e.getState,r),setCenter:(r,s,o)=>{const{width:c,height:u,maxZoom:d}=e.getState(),a=typeof(o==null?void 0:o.zoom)<"u"?o.zoom:d,l=c/2-r*a,f=u/2-s*a,h=qe.translate(l,f).scale(a);t.transform(We(n,o==null?void 0:o.duration),h)},fitBounds:(r,s)=>{const{width:o,height:c,minZoom:u,maxZoom:d}=e.getState(),{x:a,y:l,zoom:f}=ga(r,o,c,u,d,(s==null?void 0:s.padding)??.1),h=qe.translate(a,l).scale(f);t.transform(We(n,s==null?void 0:s.duration),h)},project:r=>{const{transform:s,snapToGrid:o,snapGrid:c}=e.getState();return console.warn("[DEPRECATED] `project` is deprecated. Instead use `screenToFlowPosition`. There is no need to subtract the react flow bounds anymore! https://reactflow.dev/api-reference/types/react-flow-instance#screen-to-flow-position"),Hr(r,s,o,c)},screenToFlowPosition:r=>{const{transform:s,snapToGrid:o,snapGrid:c,domNode:u}=e.getState();if(!u)return r;const{x:d,y:a}=u.getBoundingClientRect(),l={x:r.x-d,y:r.y-a};return Hr(l,s,o,c)},flowToScreenPosition:r=>{const{transform:s,domNode:o}=e.getState();if(!o)return r;const{x:c,y:u}=o.getBoundingClientRect(),d=fa(r,s);return{x:d.x+c,y:d.y+u}},viewportInitialized:!0}:Uh,[t,n])};function ui(){const e=Zh(),t=ce(),n=q.useCallback(()=>t.getState().getNodes().map(y=>({...y})),[]),i=q.useCallback(y=>t.getState().nodeInternals.get(y),[]),r=q.useCallback(()=>{const{edges:y=[]}=t.getState();return y.map(p=>({...p}))},[]),s=q.useCallback(y=>{const{edges:p=[]}=t.getState();return p.find(m=>m.id===y)},[]),o=q.useCallback(y=>{const{getNodes:p,setNodes:m,hasDefaultNodes:x,onNodesChange:_}=t.getState(),v=p(),S=typeof y=="function"?y(v):y;if(x)m(S);else if(_){const I=S.length===0?v.map($=>({type:"remove",id:$.id})):S.map($=>({item:$,type:"reset"}));_(I)}},[]),c=q.useCallback(y=>{const{edges:p=[],setEdges:m,hasDefaultEdges:x,onEdgesChange:_}=t.getState(),v=typeof y=="function"?y(p):y;if(x)m(v);else if(_){const S=v.length===0?p.map(I=>({type:"remove",id:I.id})):v.map(I=>({item:I,type:"reset"}));_(S)}},[]),u=q.useCallback(y=>{const p=Array.isArray(y)?y:[y],{getNodes:m,setNodes:x,hasDefaultNodes:_,onNodesChange:v}=t.getState();if(_){const I=[...m(),...p];x(I)}else if(v){const S=p.map(I=>({item:I,type:"add"}));v(S)}},[]),d=q.useCallback(y=>{const p=Array.isArray(y)?y:[y],{edges:m=[],setEdges:x,hasDefaultEdges:_,onEdgesChange:v}=t.getState();if(_)x([...m,...p]);else if(v){const S=p.map(I=>({item:I,type:"add"}));v(S)}},[]),a=q.useCallback(()=>{const{getNodes:y,edges:p=[],transform:m}=t.getState(),[x,_,v]=m;return{nodes:y().map(S=>({...S})),edges:p.map(S=>({...S})),viewport:{x,y:_,zoom:v}}},[]),l=q.useCallback(({nodes:y,edges:p})=>{const{nodeInternals:m,getNodes:x,edges:_,hasDefaultNodes:v,hasDefaultEdges:S,onNodesDelete:I,onEdgesDelete:$,onNodesChange:b,onEdgesChange:E}=t.getState(),k=(y||[]).map(T=>T.id),N=(p||[]).map(T=>T.id),A=x().reduce((T,R)=>{const z=R.parentNode||R.parentId,F=!k.includes(R.id)&&z&&T.find(B=>B.id===z);return(typeof R.deletable=="boolean"?R.deletable:!0)&&(k.includes(R.id)||F)&&T.push(R),T},[]),L=_.filter(T=>typeof T.deletable=="boolean"?T.deletable:!0),g=L.filter(T=>N.includes(T.id));if(A||g){const T=pa(A,L),R=[...g,...T],z=R.reduce((F,O)=>(F.includes(O.id)||F.push(O.id),F),[]);if((S||v)&&(S&&t.setState({edges:_.filter(F=>!z.includes(F.id))}),v&&(A.forEach(F=>{m.delete(F.id)}),t.setState({nodeInternals:new Map(m)}))),z.length>0&&($==null||$(R),E&&E(z.map(F=>({id:F,type:"remove"})))),A.length>0&&(I==null||I(A),b)){const F=A.map(O=>({id:O.id,type:"remove"}));b(F)}}},[]),f=q.useCallback(y=>{const p=mh(y),m=p?null:t.getState().nodeInternals.get(y.id);return!p&&!m?[null,null,p]:[p?y:Po(m),m,p]},[]),h=q.useCallback((y,p=!0,m)=>{const[x,_,v]=f(y);return x?(m||t.getState().getNodes()).filter(S=>{if(!v&&(S.id===_.id||!S.positionAbsolute))return!1;const I=Po(S),$=qr(I,x);return p&&$>0||$>=x.width*x.height}):[]},[]),w=q.useCallback((y,p,m=!0)=>{const[x]=f(y);if(!x)return!1;const _=qr(x,p);return m&&_>0||_>=x.width*x.height},[]);return q.useMemo(()=>({...e,getNodes:n,getNode:i,getEdges:r,getEdge:s,setNodes:o,setEdges:c,addNodes:u,addEdges:d,toObject:a,deleteElements:l,getIntersectingNodes:h,isNodeIntersecting:w}),[e,n,i,r,s,o,c,u,d,a,l,h,w])}const Kh={actInsideInputWithModifier:!1};var Qh=({deleteKeyCode:e,multiSelectionKeyCode:t})=>{const n=ce(),{deleteElements:i}=ui(),r=qt(e,Kh),s=qt(t);q.useEffect(()=>{if(r){const{edges:o,getNodes:c}=n.getState(),u=c().filter(a=>a.selected),d=o.filter(a=>a.selected);i({nodes:u,edges:d}),n.setState({nodesSelectionActive:!1})}},[r]),q.useEffect(()=>{n.setState({multiSelectionActive:s})},[s])};function Jh(e){const t=ce();q.useEffect(()=>{let n;const i=()=>{var s,o;if(!e.current)return;const r=Jr(e.current);(r.height===0||r.width===0)&&((o=(s=t.getState()).onError)==null||o.call(s,"004",Oe.error004())),t.setState({width:r.width||500,height:r.height||500})};return i(),window.addEventListener("resize",i),e.current&&(n=new ResizeObserver(()=>i()),n.observe(e.current)),()=>{window.removeEventListener("resize",i),n&&e.current&&n.unobserve(e.current)}},[])}const li={position:"absolute",width:"100%",height:"100%",top:0,left:0},ep=(e,t)=>e.x!==t.x||e.y!==t.y||e.zoom!==t.k,Kt=e=>({x:e.x,y:e.y,zoom:e.k}),st=(e,t)=>e.target.closest(`.${t}`),Yo=(e,t)=>t===2&&Array.isArray(e)&&e.includes(2),Wo=e=>{const t=e.ctrlKey&&hn()?10:1;return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*t},tp=e=>({d3Zoom:e.d3Zoom,d3Selection:e.d3Selection,d3ZoomHandler:e.d3ZoomHandler,userSelectionActive:e.userSelectionActive}),np=({onMove:e,onMoveStart:t,onMoveEnd:n,onPaneContextMenu:i,zoomOnScroll:r=!0,zoomOnPinch:s=!0,panOnScroll:o=!1,panOnScrollSpeed:c=.5,panOnScrollMode:u=Xe.Free,zoomOnDoubleClick:d=!0,elementsSelectable:a,panOnDrag:l=!0,defaultViewport:f,translateExtent:h,minZoom:w,maxZoom:y,zoomActivationKeyCode:p,preventScrolling:m=!0,children:x,noWheelClassName:_,noPanClassName:v})=>{const S=q.useRef(),I=ce(),$=q.useRef(!1),b=q.useRef(!1),E=q.useRef(null),k=q.useRef({x:0,y:0,zoom:0}),{d3Zoom:N,d3Selection:A,d3ZoomHandler:L,userSelectionActive:g}=ne(tp,le),T=qt(p),R=q.useRef(0),z=q.useRef(!1),F=q.useRef();return Jh(E),q.useEffect(()=>{if(E.current){const O=E.current.getBoundingClientRect(),B=ch().scaleExtent([w,y]).translateExtent(h),H=xe(E.current).call(B),j=qe.translate(f.x,f.y).scale(gt(f.zoom,w,y)),C=[[0,0],[O.width,O.height]],M=B.constrain()(j,C,h);B.transform(H,M),B.wheelDelta(Wo),I.setState({d3Zoom:B,d3Selection:H,d3ZoomHandler:H.on("wheel.zoom"),transform:[M.x,M.y,M.k],domNode:E.current.closest(".react-flow")})}},[]),q.useEffect(()=>{A&&N&&(o&&!T&&!g?A.on("wheel.zoom",O=>{if(st(O,_))return!1;O.preventDefault(),O.stopImmediatePropagation();const B=A.property("__zoom").k||1;if(O.ctrlKey&&s){const W=Ne(O),X=Wo(O),Z=B*Math.pow(2,X);N.scaleTo(A,Z,W,O);return}const H=O.deltaMode===1?20:1;let j=u===Xe.Vertical?0:O.deltaX*H,C=u===Xe.Horizontal?0:O.deltaY*H;!hn()&&O.shiftKey&&u!==Xe.Vertical&&(j=O.deltaY*H,C=0),N.translateBy(A,-(j/B)*c,-(C/B)*c,{internal:!0});const M=Kt(A.property("__zoom")),{onViewportChangeStart:D,onViewportChange:V,onViewportChangeEnd:G}=I.getState();clearTimeout(F.current),z.current||(z.current=!0,t==null||t(O,M),D==null||D(M)),z.current&&(e==null||e(O,M),V==null||V(M),F.current=setTimeout(()=>{n==null||n(O,M),G==null||G(M),z.current=!1},150))},{passive:!1}):typeof L<"u"&&A.on("wheel.zoom",function(O,B){if(!m&&O.type==="wheel"&&!O.ctrlKey||st(O,_))return null;O.preventDefault(),L.call(this,O,B)},{passive:!1}))},[g,o,u,A,N,L,T,s,m,_,t,e,n]),q.useEffect(()=>{N&&N.on("start",O=>{var j,C;if(!O.sourceEvent||O.sourceEvent.internal)return null;R.current=(j=O.sourceEvent)==null?void 0:j.button;const{onViewportChangeStart:B}=I.getState(),H=Kt(O.transform);$.current=!0,k.current=H,((C=O.sourceEvent)==null?void 0:C.type)==="mousedown"&&I.setState({paneDragging:!0}),B==null||B(H),t==null||t(O.sourceEvent,H)})},[N,t]),q.useEffect(()=>{N&&(g&&!$.current?N.on("zoom",null):g||N.on("zoom",O=>{var H;const{onViewportChange:B}=I.getState();if(I.setState({transform:[O.transform.x,O.transform.y,O.transform.k]}),b.current=!!(i&&Yo(l,R.current??0)),(e||B)&&!((H=O.sourceEvent)!=null&&H.internal)){const j=Kt(O.transform);B==null||B(j),e==null||e(O.sourceEvent,j)}}))},[g,N,e,l,i]),q.useEffect(()=>{N&&N.on("end",O=>{if(!O.sourceEvent||O.sourceEvent.internal)return null;const{onViewportChangeEnd:B}=I.getState();if($.current=!1,I.setState({paneDragging:!1}),i&&Yo(l,R.current??0)&&!b.current&&i(O.sourceEvent),b.current=!1,(n||B)&&ep(k.current,O.transform)){const H=Kt(O.transform);k.current=H,clearTimeout(S.current),S.current=setTimeout(()=>{B==null||B(H),n==null||n(O.sourceEvent,H)},o?150:0)}})},[N,o,l,n,i]),q.useEffect(()=>{N&&N.filter(O=>{const B=T||r,H=s&&O.ctrlKey;if((l===!0||Array.isArray(l)&&l.includes(1))&&O.button===1&&O.type==="mousedown"&&(st(O,"react-flow__node")||st(O,"react-flow__edge")))return!0;if(!l&&!B&&!o&&!d&&!s||g||!d&&O.type==="dblclick"||st(O,_)&&O.type==="wheel"||st(O,v)&&(O.type!=="wheel"||o&&O.type==="wheel"&&!T)||!s&&O.ctrlKey&&O.type==="wheel"||!B&&!o&&!H&&O.type==="wheel"||!l&&(O.type==="mousedown"||O.type==="touchstart")||Array.isArray(l)&&!l.includes(O.button)&&O.type==="mousedown")return!1;const j=Array.isArray(l)&&l.includes(O.button)||!O.button||O.button<=1;return(!O.ctrlKey||O.type==="wheel")&&j})},[g,N,r,s,o,d,l,a,T]),P.createElement("div",{className:"react-flow__renderer",ref:E,style:li},x)},rp=e=>({userSelectionActive:e.userSelectionActive,userSelectionRect:e.userSelectionRect});function ip(){const{userSelectionActive:e,userSelectionRect:t}=ne(rp,le);return e&&t?P.createElement("div",{className:"react-flow__selection react-flow__container",style:{width:t.width,height:t.height,transform:`translate(${t.x}px, ${t.y}px)`}}):null}function Uo(e,t){const n=t.parentNode||t.parentId,i=e.find(r=>r.id===n);if(i){const r=t.position.x+t.width-i.width,s=t.position.y+t.height-i.height;if(r>0||s>0||t.position.x<0||t.position.y<0){if(i.style={...i.style},i.style.width=i.style.width??i.width,i.style.height=i.style.height??i.height,r>0&&(i.style.width+=r),s>0&&(i.style.height+=s),t.position.x<0){const o=Math.abs(t.position.x);i.position.x=i.position.x-o,i.style.width+=o,t.position.x=0}if(t.position.y<0){const o=Math.abs(t.position.y);i.position.y=i.position.y-o,i.style.height+=o,t.position.y=0}i.width=i.style.width,i.height=i.style.height}}}function op(e,t){if(e.some(i=>i.type==="reset"))return e.filter(i=>i.type==="reset").map(i=>i.item);const n=e.filter(i=>i.type==="add").map(i=>i.item);return t.reduce((i,r)=>{const s=e.filter(c=>c.id===r.id);if(s.length===0)return i.push(r),i;const o={...r};for(const c of s)if(c)switch(c.type){case"select":{o.selected=c.selected;break}case"position":{typeof c.position<"u"&&(o.position=c.position),typeof c.positionAbsolute<"u"&&(o.positionAbsolute=c.positionAbsolute),typeof c.dragging<"u"&&(o.dragging=c.dragging),o.expandParent&&Uo(i,o);break}case"dimensions":{typeof c.dimensions<"u"&&(o.width=c.dimensions.width,o.height=c.dimensions.height),typeof c.updateStyle<"u"&&(o.style={...o.style||{},...c.dimensions}),typeof c.resizing=="boolean"&&(o.resizing=c.resizing),o.expandParent&&Uo(i,o);break}case"remove":return i}return i.push(o),i},n)}function sp(e,t){return op(e,t)}const Pe=(e,t)=>({id:e,type:"select",selected:t});function ct(e,t){return e.reduce((n,i)=>{const r=t.includes(i.id);return!i.selected&&r?(i.selected=!0,n.push(Pe(i.id,!0))):i.selected&&!r&&(i.selected=!1,n.push(Pe(i.id,!1))),n},[])}const Cr=(e,t)=>n=>{n.target===t.current&&(e==null||e(n))},ap=e=>({userSelectionActive:e.userSelectionActive,elementsSelectable:e.elementsSelectable,dragging:e.paneDragging}),Ra=q.memo(({isSelecting:e,selectionMode:t=Lt.Full,panOnDrag:n,onSelectionStart:i,onSelectionEnd:r,onPaneClick:s,onPaneContextMenu:o,onPaneScroll:c,onPaneMouseEnter:u,onPaneMouseMove:d,onPaneMouseLeave:a,children:l})=>{const f=q.useRef(null),h=ce(),w=q.useRef(0),y=q.useRef(0),p=q.useRef(),{userSelectionActive:m,elementsSelectable:x,dragging:_}=ne(ap,le),v=()=>{h.setState({userSelectionActive:!1,userSelectionRect:null}),w.current=0,y.current=0},S=L=>{s==null||s(L),h.getState().resetSelectedElements(),h.setState({nodesSelectionActive:!1})},I=L=>{if(Array.isArray(n)&&(n!=null&&n.includes(2))){L.preventDefault();return}o==null||o(L)},$=c?L=>c(L):void 0,b=L=>{const{resetSelectedElements:g,domNode:T}=h.getState();if(p.current=T==null?void 0:T.getBoundingClientRect(),!x||!e||L.button!==0||L.target!==f.current||!p.current)return;const{x:R,y:z}=ze(L,p.current);g(),h.setState({userSelectionRect:{width:0,height:0,startX:R,startY:z,x:R,y:z}}),i==null||i(L)},E=L=>{const{userSelectionRect:g,nodeInternals:T,edges:R,transform:z,onNodesChange:F,onEdgesChange:O,nodeOrigin:B,getNodes:H}=h.getState();if(!e||!p.current||!g)return;h.setState({userSelectionActive:!0,nodesSelectionActive:!1});const j=ze(L,p.current),C=g.startX??0,M=g.startY??0,D={...g,x:j.x<C?j.x:C,y:j.y<M?j.y:M,width:Math.abs(j.x-C),height:Math.abs(j.y-M)},V=H(),G=ha(T,D,z,t===Lt.Partial,!0,B),W=pa(G,R).map(Z=>Z.id),X=G.map(Z=>Z.id);if(w.current!==X.length){w.current=X.length;const Z=ct(V,X);Z.length&&(F==null||F(Z))}if(y.current!==W.length){y.current=W.length;const Z=ct(R,W);Z.length&&(O==null||O(Z))}h.setState({userSelectionRect:D})},k=L=>{if(L.button!==0)return;const{userSelectionRect:g}=h.getState();!m&&g&&L.target===f.current&&(S==null||S(L)),h.setState({nodesSelectionActive:w.current>0}),v(),r==null||r(L)},N=L=>{m&&(h.setState({nodesSelectionActive:w.current>0}),r==null||r(L)),v()},A=x&&(e||m);return P.createElement("div",{className:de(["react-flow__pane",{dragging:_,selection:e}]),onClick:A?void 0:Cr(S,f),onContextMenu:Cr(I,f),onWheel:Cr($,f),onMouseEnter:A?void 0:u,onMouseDown:A?b:void 0,onMouseMove:A?E:d,onMouseUp:A?k:void 0,onMouseLeave:A?N:a,ref:f,style:li},l,P.createElement(ip,null))});Ra.displayName="Pane";function Ta(e,t){const n=e.parentNode||e.parentId;if(!n)return!1;const i=t.get(n);return i?i.selected?!0:Ta(i,t):!1}function Xo(e,t,n){let i=e;do{if(i!=null&&i.matches(t))return!0;if(i===n.current)return!1;i=i.parentElement}while(i);return!1}function cp(e,t,n,i){return Array.from(e.values()).filter(r=>(r.selected||r.id===i)&&(!r.parentNode||r.parentId||!Ta(r,e))&&(r.draggable||t&&typeof r.draggable>"u")).map(r=>{var s,o;return{id:r.id,position:r.position||{x:0,y:0},positionAbsolute:r.positionAbsolute||{x:0,y:0},distance:{x:n.x-(((s=r.positionAbsolute)==null?void 0:s.x)??0),y:n.y-(((o=r.positionAbsolute)==null?void 0:o.y)??0)},delta:{x:0,y:0},extent:r.extent,parentNode:r.parentNode||r.parentId,parentId:r.parentNode||r.parentId,width:r.width,height:r.height,expandParent:r.expandParent}})}function up(e,t){return!t||t==="parent"?t:[t[0],[t[1][0]-(e.width||0),t[1][1]-(e.height||0)]]}function Oa(e,t,n,i,r=[0,0],s){const o=up(e,e.extent||i);let c=o;const u=e.parentNode||e.parentId;if(e.extent==="parent"&&!e.expandParent)if(u&&e.width&&e.height){const l=n.get(u),{x:f,y:h}=dt(l,r).positionAbsolute;c=l&&ye(f)&&ye(h)&&ye(l.width)&&ye(l.height)?[[f+e.width*r[0],h+e.height*r[1]],[f+l.width-e.width+e.width*r[0],h+l.height-e.height+e.height*r[1]]]:c}else s==null||s("005",Oe.error005()),c=o;else if(e.extent&&u&&e.extent!=="parent"){const l=n.get(u),{x:f,y:h}=dt(l,r).positionAbsolute;c=[[e.extent[0][0]+f,e.extent[0][1]+h],[e.extent[1][0]+f,e.extent[1][1]+h]]}let d={x:0,y:0};if(u){const l=n.get(u);d=dt(l,r).positionAbsolute}const a=c&&c!=="parent"?ei(t,c):t;return{position:{x:a.x-d.x,y:a.y-d.y},positionAbsolute:a}}function Ir({nodeId:e,dragItems:t,nodeInternals:n}){const i=t.map(r=>({...n.get(r.id),position:r.position,positionAbsolute:r.positionAbsolute}));return[e?i.find(r=>r.id===e):i[0],i]}const Zo=(e,t,n,i)=>{const r=t.querySelectorAll(e);if(!r||!r.length)return null;const s=Array.from(r),o=t.getBoundingClientRect(),c={x:o.width*i[0],y:o.height*i[1]};return s.map(u=>{const d=u.getBoundingClientRect();return{id:u.getAttribute("data-handleid"),position:u.getAttribute("data-handlepos"),x:(d.left-o.left-c.x)/n,y:(d.top-o.top-c.y)/n,...Jr(u)}})};function kt(e,t,n){return n===void 0?n:i=>{const r=t().nodeInternals.get(e);r&&n(i,{...r})}}function jr({id:e,store:t,unselect:n=!1,nodeRef:i}){const{addSelectedNodes:r,unselectNodesAndEdges:s,multiSelectionActive:o,nodeInternals:c,onError:u}=t.getState(),d=c.get(e);if(!d){u==null||u("012",Oe.error012(e));return}t.setState({nodesSelectionActive:!1}),d.selected?(n||d.selected&&o)&&(s({nodes:[d],edges:[]}),requestAnimationFrame(()=>{var a;return(a=i==null?void 0:i.current)==null?void 0:a.blur()})):r([e])}function lp(){const e=ce();return q.useCallback(({sourceEvent:n})=>{const{transform:i,snapGrid:r,snapToGrid:s}=e.getState(),o=n.touches?n.touches[0].clientX:n.clientX,c=n.touches?n.touches[0].clientY:n.clientY,u={x:(o-i[0])/i[2],y:(c-i[1])/i[2]};return{xSnapped:s?r[0]*Math.round(u.x/r[0]):u.x,ySnapped:s?r[1]*Math.round(u.y/r[1]):u.y,...u}},[])}function Mr(e){return(t,n,i)=>e==null?void 0:e(t,i)}function $a({nodeRef:e,disabled:t=!1,noDragClassName:n,handleSelector:i,nodeId:r,isSelectable:s,selectNodesOnDrag:o}){const c=ce(),[u,d]=q.useState(!1),a=q.useRef([]),l=q.useRef({x:null,y:null}),f=q.useRef(0),h=q.useRef(null),w=q.useRef({x:0,y:0}),y=q.useRef(null),p=q.useRef(!1),m=q.useRef(!1),x=q.useRef(!1),_=lp();return q.useEffect(()=>{if(e!=null&&e.current){const v=xe(e.current),S=({x:b,y:E})=>{const{nodeInternals:k,onNodeDrag:N,onSelectionDrag:A,updateNodePositions:L,nodeExtent:g,snapGrid:T,snapToGrid:R,nodeOrigin:z,onError:F}=c.getState();l.current={x:b,y:E};let O=!1,B={x:0,y:0,x2:0,y2:0};if(a.current.length>1&&g){const j=si(a.current,z);B=ti(j)}if(a.current=a.current.map(j=>{const C={x:b-j.distance.x,y:E-j.distance.y};R&&(C.x=T[0]*Math.round(C.x/T[0]),C.y=T[1]*Math.round(C.y/T[1]));const M=[[g[0][0],g[0][1]],[g[1][0],g[1][1]]];a.current.length>1&&g&&!j.extent&&(M[0][0]=j.positionAbsolute.x-B.x+g[0][0],M[1][0]=j.positionAbsolute.x+(j.width??0)-B.x2+g[1][0],M[0][1]=j.positionAbsolute.y-B.y+g[0][1],M[1][1]=j.positionAbsolute.y+(j.height??0)-B.y2+g[1][1]);const D=Oa(j,C,k,M,z,F);return O=O||j.position.x!==D.position.x||j.position.y!==D.position.y,j.position=D.position,j.positionAbsolute=D.positionAbsolute,j}),!O)return;L(a.current,!0,!0),d(!0);const H=r?N:Mr(A);if(H&&y.current){const[j,C]=Ir({nodeId:r,dragItems:a.current,nodeInternals:k});H(y.current,j,C)}},I=()=>{if(!h.current)return;const[b,E]=ia(w.current,h.current);if(b!==0||E!==0){const{transform:k,panBy:N}=c.getState();l.current.x=(l.current.x??0)-b/k[2],l.current.y=(l.current.y??0)-E/k[2],N({x:b,y:E})&&S(l.current)}f.current=requestAnimationFrame(I)},$=b=>{var z;const{nodeInternals:E,multiSelectionActive:k,nodesDraggable:N,unselectNodesAndEdges:A,onNodeDragStart:L,onSelectionDragStart:g}=c.getState();m.current=!0;const T=r?L:Mr(g);(!o||!s)&&!k&&r&&((z=E.get(r))!=null&&z.selected||A()),r&&s&&o&&jr({id:r,store:c,nodeRef:e});const R=_(b);if(l.current=R,a.current=cp(E,N,R,r),T&&a.current){const[F,O]=Ir({nodeId:r,dragItems:a.current,nodeInternals:E});T(b.sourceEvent,F,O)}};if(t)v.on(".drag",null);else{const b=yd().on("start",E=>{const{domNode:k,nodeDragThreshold:N}=c.getState();N===0&&$(E),x.current=!1;const A=_(E);l.current=A,h.current=(k==null?void 0:k.getBoundingClientRect())||null,w.current=ze(E.sourceEvent,h.current)}).on("drag",E=>{var L,g;const k=_(E),{autoPanOnNodeDrag:N,nodeDragThreshold:A}=c.getState();if(E.sourceEvent.type==="touchmove"&&E.sourceEvent.touches.length>1&&(x.current=!0),!x.current){if(!p.current&&m.current&&N&&(p.current=!0,I()),!m.current){const T=k.xSnapped-(((L=l==null?void 0:l.current)==null?void 0:L.x)??0),R=k.ySnapped-(((g=l==null?void 0:l.current)==null?void 0:g.y)??0);Math.sqrt(T*T+R*R)>A&&$(E)}(l.current.x!==k.xSnapped||l.current.y!==k.ySnapped)&&a.current&&m.current&&(y.current=E.sourceEvent,w.current=ze(E.sourceEvent,h.current),S(k))}}).on("end",E=>{if(!(!m.current||x.current)&&(d(!1),p.current=!1,m.current=!1,cancelAnimationFrame(f.current),a.current)){const{updateNodePositions:k,nodeInternals:N,onNodeDragStop:A,onSelectionDragStop:L}=c.getState(),g=r?A:Mr(L);if(k(a.current,!1,!1),g){const[T,R]=Ir({nodeId:r,dragItems:a.current,nodeInternals:N});g(E.sourceEvent,T,R)}}}).filter(E=>{const k=E.target;return!E.button&&(!n||!Xo(k,`.${n}`,e))&&(!i||Xo(k,i,e))});return v.call(b),()=>{v.on(".drag",null)}}}},[e,t,n,i,s,c,r,o,_]),u}function Da(){const e=ce();return q.useCallback(n=>{const{nodeInternals:i,nodeExtent:r,updateNodePositions:s,getNodes:o,snapToGrid:c,snapGrid:u,onError:d,nodesDraggable:a}=e.getState(),l=o().filter(x=>x.selected&&(x.draggable||a&&typeof x.draggable>"u")),f=c?u[0]:5,h=c?u[1]:5,w=n.isShiftPressed?4:1,y=n.x*f*w,p=n.y*h*w,m=l.map(x=>{if(x.positionAbsolute){const _={x:x.positionAbsolute.x+y,y:x.positionAbsolute.y+p};c&&(_.x=u[0]*Math.round(_.x/u[0]),_.y=u[1]*Math.round(_.y/u[1]));const{positionAbsolute:v,position:S}=Oa(x,_,i,r,void 0,d);x.position=S,x.positionAbsolute=v}return x});s(m,!0,!1)},[])}const ft={ArrowUp:{x:0,y:-1},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0},ArrowRight:{x:1,y:0}};var Ct=e=>{const t=({id:n,type:i,data:r,xPos:s,yPos:o,xPosOrigin:c,yPosOrigin:u,selected:d,onClick:a,onMouseEnter:l,onMouseMove:f,onMouseLeave:h,onContextMenu:w,onDoubleClick:y,style:p,className:m,isDraggable:x,isSelectable:_,isConnectable:v,isFocusable:S,selectNodesOnDrag:I,sourcePosition:$,targetPosition:b,hidden:E,resizeObserver:k,dragHandle:N,zIndex:A,isParent:L,noDragClassName:g,noPanClassName:T,initialized:R,disableKeyboardA11y:z,ariaLabel:F,rfId:O,hasHandleBounds:B})=>{const H=ce(),j=q.useRef(null),C=q.useRef(null),M=q.useRef($),D=q.useRef(b),V=q.useRef(i),G=_||x||a||l||f||h,W=Da(),X=kt(n,H.getState,l),Z=kt(n,H.getState,f),fe=kt(n,H.getState,h),ee=kt(n,H.getState,w),J=kt(n,H.getState,y),ae=te=>{const{nodeDragThreshold:U}=H.getState();if(_&&(!I||!x||U>0)&&jr({id:n,store:H,nodeRef:j}),a){const ge=H.getState().nodeInternals.get(n);ge&&a(te,{...ge})}},re=te=>{if(!zr(te)&&!z)if(sa.includes(te.key)&&_){const U=te.key==="Escape";jr({id:n,store:H,unselect:U,nodeRef:j})}else x&&d&&Object.prototype.hasOwnProperty.call(ft,te.key)&&(H.setState({ariaLiveMessage:`Moved selected node ${te.key.replace("Arrow","").toLowerCase()}. New position, x: ${~~s}, y: ${~~o}`}),W({x:ft[te.key].x,y:ft[te.key].y,isShiftPressed:te.shiftKey}))};q.useEffect(()=>()=>{C.current&&(k==null||k.unobserve(C.current),C.current=null)},[]),q.useEffect(()=>{if(j.current&&!E){const te=j.current;(!R||!B||C.current!==te)&&(C.current&&(k==null||k.unobserve(C.current)),k==null||k.observe(te),C.current=te)}},[E,R,B]),q.useEffect(()=>{const te=V.current!==i,U=M.current!==$,ge=D.current!==b;j.current&&(te||U||ge)&&(te&&(V.current=i),U&&(M.current=$),ge&&(D.current=b),H.getState().updateNodeDimensions([{id:n,nodeElement:j.current,forceUpdate:!0}]))},[n,i,$,b]);const pe=$a({nodeRef:j,disabled:E||!x,noDragClassName:g,handleSelector:N,nodeId:n,isSelectable:_,selectNodesOnDrag:I});return E?null:P.createElement("div",{className:de(["react-flow__node",`react-flow__node-${i}`,{[T]:x},m,{selected:d,selectable:_,parent:L,dragging:pe}]),ref:j,style:{zIndex:A,transform:`translate(${c}px,${u}px)`,pointerEvents:G?"all":"none",visibility:R?"visible":"hidden",...p},"data-id":n,"data-testid":`rf__node-${n}`,onMouseEnter:X,onMouseMove:Z,onMouseLeave:fe,onContextMenu:ee,onClick:ae,onDoubleClick:J,onKeyDown:S?re:void 0,tabIndex:S?0:void 0,role:S?"button":void 0,"aria-describedby":z?void 0:`${ka}-${O}`,"aria-label":F},P.createElement(_h,{value:n},P.createElement(e,{id:n,data:r,type:i,xPos:s,yPos:o,selected:d,isConnectable:v,sourcePosition:$,targetPosition:b,dragging:pe,dragHandle:N,zIndex:A})))};return t.displayName="NodeWrapper",q.memo(t)};const dp=e=>{const t=e.getNodes().filter(n=>n.selected);return{...si(t,e.nodeOrigin),transformString:`translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]})`,userSelectionActive:e.userSelectionActive}};function fp({onSelectionContextMenu:e,noPanClassName:t,disableKeyboardA11y:n}){const i=ce(),{width:r,height:s,x:o,y:c,transformString:u,userSelectionActive:d}=ne(dp,le),a=Da(),l=q.useRef(null);if(q.useEffect(()=>{var w;n||(w=l.current)==null||w.focus({preventScroll:!0})},[n]),$a({nodeRef:l}),d||!r||!s)return null;const f=e?w=>{const y=i.getState().getNodes().filter(p=>p.selected);e(w,y)}:void 0,h=w=>{Object.prototype.hasOwnProperty.call(ft,w.key)&&a({x:ft[w.key].x,y:ft[w.key].y,isShiftPressed:w.shiftKey})};return P.createElement("div",{className:de(["react-flow__nodesselection","react-flow__container",t]),style:{transform:u}},P.createElement("div",{ref:l,className:"react-flow__nodesselection-rect",onContextMenu:f,tabIndex:n?void 0:-1,onKeyDown:n?void 0:h,style:{width:r,height:s,top:c,left:o}}))}var hp=q.memo(fp);const pp=e=>e.nodesSelectionActive,Pa=({children:e,onPaneClick:t,onPaneMouseEnter:n,onPaneMouseMove:i,onPaneMouseLeave:r,onPaneContextMenu:s,onPaneScroll:o,deleteKeyCode:c,onMove:u,onMoveStart:d,onMoveEnd:a,selectionKeyCode:l,selectionOnDrag:f,selectionMode:h,onSelectionStart:w,onSelectionEnd:y,multiSelectionKeyCode:p,panActivationKeyCode:m,zoomActivationKeyCode:x,elementsSelectable:_,zoomOnScroll:v,zoomOnPinch:S,panOnScroll:I,panOnScrollSpeed:$,panOnScrollMode:b,zoomOnDoubleClick:E,panOnDrag:k,defaultViewport:N,translateExtent:A,minZoom:L,maxZoom:g,preventScrolling:T,onSelectionContextMenu:R,noWheelClassName:z,noPanClassName:F,disableKeyboardA11y:O})=>{const B=ne(pp),H=qt(l),j=qt(m),C=j||k,M=j||I,D=H||f&&C!==!0;return Qh({deleteKeyCode:c,multiSelectionKeyCode:p}),P.createElement(np,{onMove:u,onMoveStart:d,onMoveEnd:a,onPaneContextMenu:s,elementsSelectable:_,zoomOnScroll:v,zoomOnPinch:S,panOnScroll:M,panOnScrollSpeed:$,panOnScrollMode:b,zoomOnDoubleClick:E,panOnDrag:!H&&C,defaultViewport:N,translateExtent:A,minZoom:L,maxZoom:g,zoomActivationKeyCode:x,preventScrolling:T,noWheelClassName:z,noPanClassName:F},P.createElement(Ra,{onSelectionStart:w,onSelectionEnd:y,onPaneClick:t,onPaneMouseEnter:n,onPaneMouseMove:i,onPaneMouseLeave:r,onPaneContextMenu:s,onPaneScroll:o,panOnDrag:C,isSelecting:!!D,selectionMode:h},e,B&&P.createElement(hp,{onSelectionContextMenu:R,noPanClassName:F,disableKeyboardA11y:O})))};Pa.displayName="FlowRenderer";var gp=q.memo(Pa);function mp(e){return ne(q.useCallback(n=>e?ha(n.nodeInternals,{x:0,y:0,width:n.width,height:n.height},n.transform,!0):n.getNodes(),[e]))}function yp(e){const t={input:Ct(e.input||Ea),default:Ct(e.default||Fr),output:Ct(e.output||Sa),group:Ct(e.group||ci)},n={},i=Object.keys(e).filter(r=>!["input","default","output","group"].includes(r)).reduce((r,s)=>(r[s]=Ct(e[s]||Fr),r),n);return{...t,...i}}const wp=({x:e,y:t,width:n,height:i,origin:r})=>!n||!i?{x:e,y:t}:r[0]<0||r[1]<0||r[0]>1||r[1]>1?{x:e,y:t}:{x:e-n*r[0],y:t-i*r[1]},xp=e=>({nodesDraggable:e.nodesDraggable,nodesConnectable:e.nodesConnectable,nodesFocusable:e.nodesFocusable,elementsSelectable:e.elementsSelectable,updateNodeDimensions:e.updateNodeDimensions,onError:e.onError}),La=e=>{const{nodesDraggable:t,nodesConnectable:n,nodesFocusable:i,elementsSelectable:r,updateNodeDimensions:s,onError:o}=ne(xp,le),c=mp(e.onlyRenderVisibleElements),u=q.useRef(),d=q.useMemo(()=>{if(typeof ResizeObserver>"u")return null;const a=new ResizeObserver(l=>{const f=l.map(h=>({id:h.target.getAttribute("data-id"),nodeElement:h.target,forceUpdate:!0}));s(f)});return u.current=a,a},[]);return q.useEffect(()=>()=>{var a;(a=u==null?void 0:u.current)==null||a.disconnect()},[]),P.createElement("div",{className:"react-flow__nodes",style:li},c.map(a=>{var S,I,$;let l=a.type||"default";e.nodeTypes[l]||(o==null||o("003",Oe.error003(l)),l="default");const f=e.nodeTypes[l]||e.nodeTypes.default,h=!!(a.draggable||t&&typeof a.draggable>"u"),w=!!(a.selectable||r&&typeof a.selectable>"u"),y=!!(a.connectable||n&&typeof a.connectable>"u"),p=!!(a.focusable||i&&typeof a.focusable>"u"),m=e.nodeExtent?ei(a.positionAbsolute,e.nodeExtent):a.positionAbsolute,x=(m==null?void 0:m.x)??0,_=(m==null?void 0:m.y)??0,v=wp({x,y:_,width:a.width??0,height:a.height??0,origin:e.nodeOrigin});return P.createElement(f,{key:a.id,id:a.id,className:a.className,style:a.style,type:l,data:a.data,sourcePosition:a.sourcePosition||Y.Bottom,targetPosition:a.targetPosition||Y.Top,hidden:a.hidden,xPos:x,yPos:_,xPosOrigin:v.x,yPosOrigin:v.y,selectNodesOnDrag:e.selectNodesOnDrag,onClick:e.onNodeClick,onMouseEnter:e.onNodeMouseEnter,onMouseMove:e.onNodeMouseMove,onMouseLeave:e.onNodeMouseLeave,onContextMenu:e.onNodeContextMenu,onDoubleClick:e.onNodeDoubleClick,selected:!!a.selected,isDraggable:h,isSelectable:w,isConnectable:y,isFocusable:p,resizeObserver:d,dragHandle:a.dragHandle,zIndex:((S=a[ie])==null?void 0:S.z)??0,isParent:!!((I=a[ie])!=null&&I.isParent),noDragClassName:e.noDragClassName,noPanClassName:e.noPanClassName,initialized:!!a.width&&!!a.height,rfId:e.rfId,disableKeyboardA11y:e.disableKeyboardA11y,ariaLabel:a.ariaLabel,hasHandleBounds:!!(($=a[ie])!=null&&$.handleBounds)})}))};La.displayName="NodeRenderer";var vp=q.memo(La);const bp=(e,t,n)=>n===Y.Left?e-t:n===Y.Right?e+t:e,Ep=(e,t,n)=>n===Y.Top?e-t:n===Y.Bottom?e+t:e,Ko="react-flow__edgeupdater",Qo=({position:e,centerX:t,centerY:n,radius:i=10,onMouseDown:r,onMouseEnter:s,onMouseOut:o,type:c})=>P.createElement("circle",{onMouseDown:r,onMouseEnter:s,onMouseOut:o,className:de([Ko,`${Ko}-${c}`]),cx:bp(t,i,e),cy:Ep(n,i,e),r:i,stroke:"transparent",fill:"transparent"}),_p=()=>!0;var at=e=>{const t=({id:n,className:i,type:r,data:s,onClick:o,onEdgeDoubleClick:c,selected:u,animated:d,label:a,labelStyle:l,labelShowBg:f,labelBgStyle:h,labelBgPadding:w,labelBgBorderRadius:y,style:p,source:m,target:x,sourceX:_,sourceY:v,targetX:S,targetY:I,sourcePosition:$,targetPosition:b,elementsSelectable:E,hidden:k,sourceHandleId:N,targetHandleId:A,onContextMenu:L,onMouseEnter:g,onMouseMove:T,onMouseLeave:R,reconnectRadius:z,onReconnect:F,onReconnectStart:O,onReconnectEnd:B,markerEnd:H,markerStart:j,rfId:C,ariaLabel:M,isFocusable:D,isReconnectable:V,pathOptions:G,interactionWidth:W,disableKeyboardA11y:X})=>{const Z=q.useRef(null),[fe,ee]=q.useState(!1),[J,ae]=q.useState(!1),re=ce(),pe=q.useMemo(()=>`url('#${Vr(j,C)}')`,[j,C]),te=q.useMemo(()=>`url('#${Vr(H,C)}')`,[H,C]);if(k)return null;const U=ue=>{var Se;const{edges:we,addSelectedEdges:Fe,unselectNodesAndEdges:je,multiSelectionActive:Ge}=re.getState(),Me=we.find(vt=>vt.id===n);Me&&(E&&(re.setState({nodesSelectionActive:!1}),Me.selected&&Ge?(je({nodes:[],edges:[Me]}),(Se=Z.current)==null||Se.blur()):Fe([n])),o&&o(ue,Me))},ge=Nt(n,re.getState,c),Be=Nt(n,re.getState,L),wt=Nt(n,re.getState,g),Je=Nt(n,re.getState,T),et=Nt(n,re.getState,R),Ie=(ue,we)=>{if(ue.button!==0)return;const{edges:Fe,isValidConnection:je}=re.getState(),Ge=we?x:m,Me=(we?A:N)||null,Se=we?"target":"source",vt=je||_p,bn=we,bt=Fe.find(Ye=>Ye.id===n);ae(!0),O==null||O(ue,bt,Se);const En=Ye=>{ae(!1),B==null||B(Ye,bt,Se)};wa({event:ue,handleId:Me,nodeId:Ge,onConnect:Ye=>F==null?void 0:F(bt,Ye),isTarget:bn,getState:re.getState,setState:re.setState,isValidConnection:vt,edgeUpdaterType:Se,onReconnectEnd:En})},tt=ue=>Ie(ue,!0),Ve=ue=>Ie(ue,!1),He=()=>ee(!0),nt=()=>ee(!1),rt=!E&&!o,xt=ue=>{var we;if(!X&&sa.includes(ue.key)&&E){const{unselectNodesAndEdges:Fe,addSelectedEdges:je,edges:Ge}=re.getState();ue.key==="Escape"?((we=Z.current)==null||we.blur(),Fe({edges:[Ge.find(Se=>Se.id===n)]})):je([n])}};return P.createElement("g",{className:de(["react-flow__edge",`react-flow__edge-${r}`,i,{selected:u,animated:d,inactive:rt,updating:fe}]),onClick:U,onDoubleClick:ge,onContextMenu:Be,onMouseEnter:wt,onMouseMove:Je,onMouseLeave:et,onKeyDown:D?xt:void 0,tabIndex:D?0:void 0,role:D?"button":"img","data-testid":`rf__edge-${n}`,"aria-label":M===null?void 0:M||`Edge from ${m} to ${x}`,"aria-describedby":D?`${Ca}-${C}`:void 0,ref:Z},!J&&P.createElement(e,{id:n,source:m,target:x,selected:u,animated:d,label:a,labelStyle:l,labelShowBg:f,labelBgStyle:h,labelBgPadding:w,labelBgBorderRadius:y,data:s,style:p,sourceX:_,sourceY:v,targetX:S,targetY:I,sourcePosition:$,targetPosition:b,sourceHandleId:N,targetHandleId:A,markerStart:pe,markerEnd:te,pathOptions:G,interactionWidth:W}),V&&P.createElement(P.Fragment,null,(V==="source"||V===!0)&&P.createElement(Qo,{position:$,centerX:_,centerY:v,radius:z,onMouseDown:tt,onMouseEnter:He,onMouseOut:nt,type:"source"}),(V==="target"||V===!0)&&P.createElement(Qo,{position:b,centerX:S,centerY:I,radius:z,onMouseDown:Ve,onMouseEnter:He,onMouseOut:nt,type:"target"})))};return t.displayName="EdgeWrapper",q.memo(t)};function Sp(e){const t={default:at(e.default||pn),straight:at(e.bezier||ii),step:at(e.step||ri),smoothstep:at(e.step||vn),simplebezier:at(e.simplebezier||ni)},n={},i=Object.keys(e).filter(r=>!["default","bezier"].includes(r)).reduce((r,s)=>(r[s]=at(e[s]||pn),r),n);return{...t,...i}}function Jo(e,t,n=null){const i=((n==null?void 0:n.x)||0)+t.x,r=((n==null?void 0:n.y)||0)+t.y,s=(n==null?void 0:n.width)||t.width,o=(n==null?void 0:n.height)||t.height;switch(e){case Y.Top:return{x:i+s/2,y:r};case Y.Right:return{x:i+s,y:r+o/2};case Y.Bottom:return{x:i+s/2,y:r+o};case Y.Left:return{x:i,y:r+o/2}}}function es(e,t){return e?e.length===1||!t?e[0]:t&&e.find(n=>n.id===t)||null:null}const Np=(e,t,n,i,r,s)=>{const o=Jo(n,e,t),c=Jo(s,i,r);return{sourceX:o.x,sourceY:o.y,targetX:c.x,targetY:c.y}};function kp({sourcePos:e,targetPos:t,sourceWidth:n,sourceHeight:i,targetWidth:r,targetHeight:s,width:o,height:c,transform:u}){const d={x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x+n,t.x+r),y2:Math.max(e.y+i,t.y+s)};d.x===d.x2&&(d.x2+=1),d.y===d.y2&&(d.y2+=1);const a=ti({x:(0-u[0])/u[2],y:(0-u[1])/u[2],width:o/u[2],height:c/u[2]}),l=Math.max(0,Math.min(a.x2,d.x2)-Math.max(a.x,d.x)),f=Math.max(0,Math.min(a.y2,d.y2)-Math.max(a.y,d.y));return Math.ceil(l*f)>0}function ts(e){var i,r,s,o,c;const t=((i=e==null?void 0:e[ie])==null?void 0:i.handleBounds)||null,n=t&&(e==null?void 0:e.width)&&(e==null?void 0:e.height)&&typeof((r=e==null?void 0:e.positionAbsolute)==null?void 0:r.x)<"u"&&typeof((s=e==null?void 0:e.positionAbsolute)==null?void 0:s.y)<"u";return[{x:((o=e==null?void 0:e.positionAbsolute)==null?void 0:o.x)||0,y:((c=e==null?void 0:e.positionAbsolute)==null?void 0:c.y)||0,width:(e==null?void 0:e.width)||0,height:(e==null?void 0:e.height)||0},t,!!n]}const Cp=[{level:0,isMaxLevel:!0,edges:[]}];function Ip(e,t,n=!1){let i=-1;const r=e.reduce((o,c)=>{var a,l;const u=ye(c.zIndex);let d=u?c.zIndex:0;if(n){const f=t.get(c.target),h=t.get(c.source),w=c.selected||(f==null?void 0:f.selected)||(h==null?void 0:h.selected),y=Math.max(((a=h==null?void 0:h[ie])==null?void 0:a.z)||0,((l=f==null?void 0:f[ie])==null?void 0:l.z)||0,1e3);d=(u?c.zIndex:0)+(w?y:0)}return o[d]?o[d].push(c):o[d]=[c],i=d>i?d:i,o},{}),s=Object.entries(r).map(([o,c])=>{const u=+o;return{edges:c,level:u,isMaxLevel:u===i}});return s.length===0?Cp:s}function Mp(e,t,n){const i=ne(q.useCallback(r=>e?r.edges.filter(s=>{const o=t.get(s.source),c=t.get(s.target);return(o==null?void 0:o.width)&&(o==null?void 0:o.height)&&(c==null?void 0:c.width)&&(c==null?void 0:c.height)&&kp({sourcePos:o.positionAbsolute||{x:0,y:0},targetPos:c.positionAbsolute||{x:0,y:0},sourceWidth:o.width,sourceHeight:o.height,targetWidth:c.width,targetHeight:c.height,width:r.width,height:r.height,transform:r.transform})}):r.edges,[e,t]));return Ip(i,t,n)}const Ap=({color:e="none",strokeWidth:t=1})=>P.createElement("polyline",{style:{stroke:e,strokeWidth:t},strokeLinecap:"round",strokeLinejoin:"round",fill:"none",points:"-5,-4 0,0 -5,4"}),Rp=({color:e="none",strokeWidth:t=1})=>P.createElement("polyline",{style:{stroke:e,fill:e,strokeWidth:t},strokeLinecap:"round",strokeLinejoin:"round",points:"-5,-4 0,0 -5,4 -5,-4"}),ns={[mt.Arrow]:Ap,[mt.ArrowClosed]:Rp};function Tp(e){const t=ce();return q.useMemo(()=>{var r,s;return Object.prototype.hasOwnProperty.call(ns,e)?ns[e]:((s=(r=t.getState()).onError)==null||s.call(r,"009",Oe.error009(e)),null)},[e])}const Op=({id:e,type:t,color:n,width:i=12.5,height:r=12.5,markerUnits:s="strokeWidth",strokeWidth:o,orient:c="auto-start-reverse"})=>{const u=Tp(t);return u?P.createElement("marker",{className:"react-flow__arrowhead",id:e,markerWidth:`${i}`,markerHeight:`${r}`,viewBox:"-10 -10 20 20",markerUnits:s,orient:c,refX:"0",refY:"0"},P.createElement(u,{color:n,strokeWidth:o})):null},$p=({defaultColor:e,rfId:t})=>n=>{const i=[];return n.edges.reduce((r,s)=>([s.markerStart,s.markerEnd].forEach(o=>{if(o&&typeof o=="object"){const c=Vr(o,t);i.includes(c)||(r.push({id:c,color:o.color||e,...o}),i.push(c))}}),r),[]).sort((r,s)=>r.id.localeCompare(s.id))},qa=({defaultColor:e,rfId:t})=>{const n=ne(q.useCallback($p({defaultColor:e,rfId:t}),[e,t]),(i,r)=>!(i.length!==r.length||i.some((s,o)=>s.id!==r[o].id)));return P.createElement("defs",null,n.map(i=>P.createElement(Op,{id:i.id,key:i.id,type:i.type,color:i.color,width:i.width,height:i.height,markerUnits:i.markerUnits,strokeWidth:i.strokeWidth,orient:i.orient})))};qa.displayName="MarkerDefinitions";var Dp=q.memo(qa);const Pp=e=>({nodesConnectable:e.nodesConnectable,edgesFocusable:e.edgesFocusable,edgesUpdatable:e.edgesUpdatable,elementsSelectable:e.elementsSelectable,width:e.width,height:e.height,connectionMode:e.connectionMode,nodeInternals:e.nodeInternals,onError:e.onError}),za=({defaultMarkerColor:e,onlyRenderVisibleElements:t,elevateEdgesOnSelect:n,rfId:i,edgeTypes:r,noPanClassName:s,onEdgeContextMenu:o,onEdgeMouseEnter:c,onEdgeMouseMove:u,onEdgeMouseLeave:d,onEdgeClick:a,onEdgeDoubleClick:l,onReconnect:f,onReconnectStart:h,onReconnectEnd:w,reconnectRadius:y,children:p,disableKeyboardA11y:m})=>{const{edgesFocusable:x,edgesUpdatable:_,elementsSelectable:v,width:S,height:I,connectionMode:$,nodeInternals:b,onError:E}=ne(Pp,le),k=Mp(t,b,n);return S?P.createElement(P.Fragment,null,k.map(({level:N,edges:A,isMaxLevel:L})=>P.createElement("svg",{key:N,style:{zIndex:N},width:S,height:I,className:"react-flow__edges react-flow__container"},L&&P.createElement(Dp,{defaultColor:e,rfId:i}),P.createElement("g",null,A.map(g=>{const[T,R,z]=ts(b.get(g.source)),[F,O,B]=ts(b.get(g.target));if(!z||!B)return null;let H=g.type||"default";r[H]||(E==null||E("011",Oe.error011(H)),H="default");const j=r[H]||r.default,C=$===Qe.Strict?O.target:(O.target??[]).concat(O.source??[]),M=es(R.source,g.sourceHandle),D=es(C,g.targetHandle),V=(M==null?void 0:M.position)||Y.Bottom,G=(D==null?void 0:D.position)||Y.Top,W=!!(g.focusable||x&&typeof g.focusable>"u"),X=g.reconnectable||g.updatable,Z=typeof f<"u"&&(X||_&&typeof X>"u");if(!M||!D)return E==null||E("008",Oe.error008(M,g)),null;const{sourceX:fe,sourceY:ee,targetX:J,targetY:ae}=Np(T,M,V,F,D,G);return P.createElement(j,{key:g.id,id:g.id,className:de([g.className,s]),type:H,data:g.data,selected:!!g.selected,animated:!!g.animated,hidden:!!g.hidden,label:g.label,labelStyle:g.labelStyle,labelShowBg:g.labelShowBg,labelBgStyle:g.labelBgStyle,labelBgPadding:g.labelBgPadding,labelBgBorderRadius:g.labelBgBorderRadius,style:g.style,source:g.source,target:g.target,sourceHandleId:g.sourceHandle,targetHandleId:g.targetHandle,markerEnd:g.markerEnd,markerStart:g.markerStart,sourceX:fe,sourceY:ee,targetX:J,targetY:ae,sourcePosition:V,targetPosition:G,elementsSelectable:v,onContextMenu:o,onMouseEnter:c,onMouseMove:u,onMouseLeave:d,onClick:a,onEdgeDoubleClick:l,onReconnect:f,onReconnectStart:h,onReconnectEnd:w,reconnectRadius:y,rfId:i,ariaLabel:g.ariaLabel,isFocusable:W,isReconnectable:Z,pathOptions:"pathOptions"in g?g.pathOptions:void 0,interactionWidth:g.interactionWidth,disableKeyboardA11y:m})})))),p):null};za.displayName="EdgeRenderer";var Lp=q.memo(za);const qp=e=>`translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]})`;function zp({children:e}){const t=ne(qp);return P.createElement("div",{className:"react-flow__viewport react-flow__container",style:{transform:t}},e)}function Bp(e){const t=ui(),n=q.useRef(!1);q.useEffect(()=>{!n.current&&t.viewportInitialized&&e&&(setTimeout(()=>e(t),1),n.current=!0)},[e,t.viewportInitialized])}const Vp={[Y.Left]:Y.Right,[Y.Right]:Y.Left,[Y.Top]:Y.Bottom,[Y.Bottom]:Y.Top},Ba=({nodeId:e,handleType:t,style:n,type:i=Le.Bezier,CustomComponent:r,connectionStatus:s})=>{var I,$,b;const{fromNode:o,handleId:c,toX:u,toY:d,connectionMode:a}=ne(q.useCallback(E=>({fromNode:E.nodeInternals.get(e),handleId:E.connectionHandleId,toX:(E.connectionPosition.x-E.transform[0])/E.transform[2],toY:(E.connectionPosition.y-E.transform[1])/E.transform[2],connectionMode:E.connectionMode}),[e]),le),l=(I=o==null?void 0:o[ie])==null?void 0:I.handleBounds;let f=l==null?void 0:l[t];if(a===Qe.Loose&&(f=f||(l==null?void 0:l[t==="source"?"target":"source"])),!o||!f)return null;const h=c?f.find(E=>E.id===c):f[0],w=h?h.x+h.width/2:(o.width??0)/2,y=h?h.y+h.height/2:o.height??0,p=((($=o.positionAbsolute)==null?void 0:$.x)??0)+w,m=(((b=o.positionAbsolute)==null?void 0:b.y)??0)+y,x=h==null?void 0:h.position,_=x?Vp[x]:null;if(!x||!_)return null;if(r)return P.createElement(r,{connectionLineType:i,connectionLineStyle:n,fromNode:o,fromHandle:h,fromX:p,fromY:m,toX:u,toY:d,fromPosition:x,toPosition:_,connectionStatus:s});let v="";const S={sourceX:p,sourceY:m,sourcePosition:x,targetX:u,targetY:d,targetPosition:_};return i===Le.Bezier?[v]=da(S):i===Le.Step?[v]=Br({...S,borderRadius:0}):i===Le.SmoothStep?[v]=Br(S):i===Le.SimpleBezier?[v]=la(S):v=`M${p},${m} ${u},${d}`,P.createElement("path",{d:v,fill:"none",className:"react-flow__connection-path",style:n})};Ba.displayName="ConnectionLine";const Hp=e=>({nodeId:e.connectionNodeId,handleType:e.connectionHandleType,nodesConnectable:e.nodesConnectable,connectionStatus:e.connectionStatus,width:e.width,height:e.height});function Fp({containerStyle:e,style:t,type:n,component:i}){const{nodeId:r,handleType:s,nodesConnectable:o,width:c,height:u,connectionStatus:d}=ne(Hp,le);return!(r&&s&&c&&o)?null:P.createElement("svg",{style:e,width:c,height:u,className:"react-flow__edges react-flow__connectionline react-flow__container"},P.createElement("g",{className:de(["react-flow__connection",d])},P.createElement(Ba,{nodeId:r,handleType:s,style:t,type:n,CustomComponent:i,connectionStatus:d})))}function rs(e,t){return q.useRef(null),ce(),q.useMemo(()=>t(e),[e])}const Va=({nodeTypes:e,edgeTypes:t,onMove:n,onMoveStart:i,onMoveEnd:r,onInit:s,onNodeClick:o,onEdgeClick:c,onNodeDoubleClick:u,onEdgeDoubleClick:d,onNodeMouseEnter:a,onNodeMouseMove:l,onNodeMouseLeave:f,onNodeContextMenu:h,onSelectionContextMenu:w,onSelectionStart:y,onSelectionEnd:p,connectionLineType:m,connectionLineStyle:x,connectionLineComponent:_,connectionLineContainerStyle:v,selectionKeyCode:S,selectionOnDrag:I,selectionMode:$,multiSelectionKeyCode:b,panActivationKeyCode:E,zoomActivationKeyCode:k,deleteKeyCode:N,onlyRenderVisibleElements:A,elementsSelectable:L,selectNodesOnDrag:g,defaultViewport:T,translateExtent:R,minZoom:z,maxZoom:F,preventScrolling:O,defaultMarkerColor:B,zoomOnScroll:H,zoomOnPinch:j,panOnScroll:C,panOnScrollSpeed:M,panOnScrollMode:D,zoomOnDoubleClick:V,panOnDrag:G,onPaneClick:W,onPaneMouseEnter:X,onPaneMouseMove:Z,onPaneMouseLeave:fe,onPaneScroll:ee,onPaneContextMenu:J,onEdgeContextMenu:ae,onEdgeMouseEnter:re,onEdgeMouseMove:pe,onEdgeMouseLeave:te,onReconnect:U,onReconnectStart:ge,onReconnectEnd:Be,reconnectRadius:wt,noDragClassName:Je,noWheelClassName:et,noPanClassName:Ie,elevateEdgesOnSelect:tt,disableKeyboardA11y:Ve,nodeOrigin:He,nodeExtent:nt,rfId:rt})=>{const xt=rs(e,yp),ue=rs(t,Sp);return Bp(s),P.createElement(gp,{onPaneClick:W,onPaneMouseEnter:X,onPaneMouseMove:Z,onPaneMouseLeave:fe,onPaneContextMenu:J,onPaneScroll:ee,deleteKeyCode:N,selectionKeyCode:S,selectionOnDrag:I,selectionMode:$,onSelectionStart:y,onSelectionEnd:p,multiSelectionKeyCode:b,panActivationKeyCode:E,zoomActivationKeyCode:k,elementsSelectable:L,onMove:n,onMoveStart:i,onMoveEnd:r,zoomOnScroll:H,zoomOnPinch:j,zoomOnDoubleClick:V,panOnScroll:C,panOnScrollSpeed:M,panOnScrollMode:D,panOnDrag:G,defaultViewport:T,translateExtent:R,minZoom:z,maxZoom:F,onSelectionContextMenu:w,preventScrolling:O,noDragClassName:Je,noWheelClassName:et,noPanClassName:Ie,disableKeyboardA11y:Ve},P.createElement(zp,null,P.createElement(Lp,{edgeTypes:ue,onEdgeClick:c,onEdgeDoubleClick:d,onlyRenderVisibleElements:A,onEdgeContextMenu:ae,onEdgeMouseEnter:re,onEdgeMouseMove:pe,onEdgeMouseLeave:te,onReconnect:U,onReconnectStart:ge,onReconnectEnd:Be,reconnectRadius:wt,defaultMarkerColor:B,noPanClassName:Ie,elevateEdgesOnSelect:!!tt,disableKeyboardA11y:Ve,rfId:rt},P.createElement(Fp,{style:x,type:m,component:_,containerStyle:v})),P.createElement("div",{className:"react-flow__edgelabel-renderer"}),P.createElement(vp,{nodeTypes:xt,onNodeClick:o,onNodeDoubleClick:u,onNodeMouseEnter:a,onNodeMouseMove:l,onNodeMouseLeave:f,onNodeContextMenu:h,selectNodesOnDrag:g,onlyRenderVisibleElements:A,noPanClassName:Ie,noDragClassName:Je,disableKeyboardA11y:Ve,nodeOrigin:He,nodeExtent:nt,rfId:rt})))};Va.displayName="GraphView";var jp=q.memo(Va);const Gr=[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],$e={rfId:"1",width:0,height:0,transform:[0,0,1],nodeInternals:new Map,edges:[],onNodesChange:null,onEdgesChange:null,hasDefaultNodes:!1,hasDefaultEdges:!1,d3Zoom:null,d3Selection:null,d3ZoomHandler:void 0,minZoom:.5,maxZoom:2,translateExtent:Gr,nodeExtent:Gr,nodesSelectionActive:!1,userSelectionActive:!1,userSelectionRect:null,connectionNodeId:null,connectionHandleId:null,connectionHandleType:"source",connectionPosition:{x:0,y:0},connectionStatus:null,connectionMode:Qe.Strict,domNode:null,paneDragging:!1,noPanClassName:"nopan",nodeOrigin:[0,0],nodeDragThreshold:0,snapGrid:[15,15],snapToGrid:!1,nodesDraggable:!0,nodesConnectable:!0,nodesFocusable:!0,edgesFocusable:!0,edgesUpdatable:!0,elementsSelectable:!0,elevateNodesOnSelect:!0,fitViewOnInit:!1,fitViewOnInitDone:!1,fitViewOnInitOptions:void 0,onSelectionChange:[],multiSelectionActive:!1,connectionStartHandle:null,connectionEndHandle:null,connectionClickStartHandle:null,connectOnClick:!0,ariaLiveMessage:"",autoPanOnConnect:!0,autoPanOnNodeDrag:!0,connectionRadius:20,onError:yh,isValidConnection:void 0},Gp=()=>Mu((e,t)=>({...$e,setNodes:n=>{const{nodeInternals:i,nodeOrigin:r,elevateNodesOnSelect:s}=t();e({nodeInternals:kr(n,i,r,s)})},getNodes:()=>Array.from(t().nodeInternals.values()),setEdges:n=>{const{defaultEdgeOptions:i={}}=t();e({edges:n.map(r=>({...i,...r}))})},setDefaultNodesAndEdges:(n,i)=>{const r=typeof n<"u",s=typeof i<"u",o=r?kr(n,new Map,t().nodeOrigin,t().elevateNodesOnSelect):new Map;e({nodeInternals:o,edges:s?i:[],hasDefaultNodes:r,hasDefaultEdges:s})},updateNodeDimensions:n=>{const{onNodesChange:i,nodeInternals:r,fitViewOnInit:s,fitViewOnInitDone:o,fitViewOnInitOptions:c,domNode:u,nodeOrigin:d}=t(),a=u==null?void 0:u.querySelector(".react-flow__viewport");if(!a)return;const l=window.getComputedStyle(a),{m22:f}=new window.DOMMatrixReadOnly(l.transform),h=n.reduce((y,p)=>{const m=r.get(p.id);if(m!=null&&m.hidden)r.set(m.id,{...m,[ie]:{...m[ie],handleBounds:void 0}});else if(m){const x=Jr(p.nodeElement);!!(x.width&&x.height&&(m.width!==x.width||m.height!==x.height||p.forceUpdate))&&(r.set(m.id,{...m,[ie]:{...m[ie],handleBounds:{source:Zo(".source",p.nodeElement,f,d),target:Zo(".target",p.nodeElement,f,d)}},...x}),y.push({id:m.id,type:"dimensions",dimensions:x}))}return y},[]);Ma(r,d);const w=o||s&&!o&&Aa(t,{initial:!0,...c});e({nodeInternals:new Map(r),fitViewOnInitDone:w}),(h==null?void 0:h.length)>0&&(i==null||i(h))},updateNodePositions:(n,i=!0,r=!1)=>{const{triggerNodeChanges:s}=t(),o=n.map(c=>{const u={id:c.id,type:"position",dragging:r};return i&&(u.positionAbsolute=c.positionAbsolute,u.position=c.position),u});s(o)},triggerNodeChanges:n=>{const{onNodesChange:i,nodeInternals:r,hasDefaultNodes:s,nodeOrigin:o,getNodes:c,elevateNodesOnSelect:u}=t();if(n!=null&&n.length){if(s){const d=sp(n,c()),a=kr(d,r,o,u);e({nodeInternals:a})}i==null||i(n)}},addSelectedNodes:n=>{const{multiSelectionActive:i,edges:r,getNodes:s}=t();let o,c=null;i?o=n.map(u=>Pe(u,!0)):(o=ct(s(),n),c=ct(r,[])),Zt({changedNodes:o,changedEdges:c,get:t,set:e})},addSelectedEdges:n=>{const{multiSelectionActive:i,edges:r,getNodes:s}=t();let o,c=null;i?o=n.map(u=>Pe(u,!0)):(o=ct(r,n),c=ct(s(),[])),Zt({changedNodes:c,changedEdges:o,get:t,set:e})},unselectNodesAndEdges:({nodes:n,edges:i}={})=>{const{edges:r,getNodes:s}=t(),o=n||s(),c=i||r,u=o.map(a=>(a.selected=!1,Pe(a.id,!1))),d=c.map(a=>Pe(a.id,!1));Zt({changedNodes:u,changedEdges:d,get:t,set:e})},setMinZoom:n=>{const{d3Zoom:i,maxZoom:r}=t();i==null||i.scaleExtent([n,r]),e({minZoom:n})},setMaxZoom:n=>{const{d3Zoom:i,minZoom:r}=t();i==null||i.scaleExtent([r,n]),e({maxZoom:n})},setTranslateExtent:n=>{var i;(i=t().d3Zoom)==null||i.translateExtent(n),e({translateExtent:n})},resetSelectedElements:()=>{const{edges:n,getNodes:i}=t(),s=i().filter(c=>c.selected).map(c=>Pe(c.id,!1)),o=n.filter(c=>c.selected).map(c=>Pe(c.id,!1));Zt({changedNodes:s,changedEdges:o,get:t,set:e})},setNodeExtent:n=>{const{nodeInternals:i}=t();i.forEach(r=>{r.positionAbsolute=ei(r.position,n)}),e({nodeExtent:n,nodeInternals:new Map(i)})},panBy:n=>{const{transform:i,width:r,height:s,d3Zoom:o,d3Selection:c,translateExtent:u}=t();if(!o||!c||!n.x&&!n.y)return!1;const d=qe.translate(i[0]+n.x,i[1]+n.y).scale(i[2]),a=[[0,0],[r,s]],l=o==null?void 0:o.constrain()(d,a,u);return o.transform(c,l),i[0]!==l.x||i[1]!==l.y||i[2]!==l.k},cancelConnection:()=>e({connectionNodeId:$e.connectionNodeId,connectionHandleId:$e.connectionHandleId,connectionHandleType:$e.connectionHandleType,connectionStatus:$e.connectionStatus,connectionStartHandle:$e.connectionStartHandle,connectionEndHandle:$e.connectionEndHandle}),reset:()=>e({...$e})}),Object.is),di=({children:e})=>{const t=q.useRef(null);return t.current||(t.current=Gp()),P.createElement(uh,{value:t.current},e)};di.displayName="ReactFlowProvider";const Ha=({children:e})=>q.useContext(xn)?P.createElement(P.Fragment,null,e):P.createElement(di,null,e);Ha.displayName="ReactFlowWrapper";const Yp={input:Ea,default:Fr,output:Sa,group:ci},Wp={default:pn,straight:ii,step:ri,smoothstep:vn,simplebezier:ni},Up=[0,0],Xp=[15,15],Zp={x:0,y:0,zoom:1},Kp={width:"100%",height:"100%",overflow:"hidden",position:"relative",zIndex:0},Fa=q.forwardRef(({nodes:e,edges:t,defaultNodes:n,defaultEdges:i,className:r,nodeTypes:s=Yp,edgeTypes:o=Wp,onNodeClick:c,onEdgeClick:u,onInit:d,onMove:a,onMoveStart:l,onMoveEnd:f,onConnect:h,onConnectStart:w,onConnectEnd:y,onClickConnectStart:p,onClickConnectEnd:m,onNodeMouseEnter:x,onNodeMouseMove:_,onNodeMouseLeave:v,onNodeContextMenu:S,onNodeDoubleClick:I,onNodeDragStart:$,onNodeDrag:b,onNodeDragStop:E,onNodesDelete:k,onEdgesDelete:N,onSelectionChange:A,onSelectionDragStart:L,onSelectionDrag:g,onSelectionDragStop:T,onSelectionContextMenu:R,onSelectionStart:z,onSelectionEnd:F,connectionMode:O=Qe.Strict,connectionLineType:B=Le.Bezier,connectionLineStyle:H,connectionLineComponent:j,connectionLineContainerStyle:C,deleteKeyCode:M="Backspace",selectionKeyCode:D="Shift",selectionOnDrag:V=!1,selectionMode:G=Lt.Full,panActivationKeyCode:W="Space",multiSelectionKeyCode:X=hn()?"Meta":"Control",zoomActivationKeyCode:Z=hn()?"Meta":"Control",snapToGrid:fe=!1,snapGrid:ee=Xp,onlyRenderVisibleElements:J=!1,selectNodesOnDrag:ae=!0,nodesDraggable:re,nodesConnectable:pe,nodesFocusable:te,nodeOrigin:U=Up,edgesFocusable:ge,edgesUpdatable:Be,elementsSelectable:wt,defaultViewport:Je=Zp,minZoom:et=.5,maxZoom:Ie=2,translateExtent:tt=Gr,preventScrolling:Ve=!0,nodeExtent:He,defaultMarkerColor:nt="#b1b1b7",zoomOnScroll:rt=!0,zoomOnPinch:xt=!0,panOnScroll:ue=!1,panOnScrollSpeed:we=.5,panOnScrollMode:Fe=Xe.Free,zoomOnDoubleClick:je=!0,panOnDrag:Ge=!0,onPaneClick:Me,onPaneMouseEnter:Se,onPaneMouseMove:vt,onPaneMouseLeave:bn,onPaneScroll:bt,onPaneContextMenu:En,children:fi,onEdgeContextMenu:Ye,onEdgeDoubleClick:Wa,onEdgeMouseEnter:Ua,onEdgeMouseMove:Xa,onEdgeMouseLeave:Za,onEdgeUpdate:Ka,onEdgeUpdateStart:Qa,onEdgeUpdateEnd:Ja,onReconnect:ec,onReconnectStart:tc,onReconnectEnd:nc,reconnectRadius:rc=10,edgeUpdaterRadius:ic=10,onNodesChange:oc,onEdgesChange:sc,noDragClassName:ac="nodrag",noWheelClassName:cc="nowheel",noPanClassName:hi="nopan",fitView:uc=!1,fitViewOptions:lc,connectOnClick:dc=!0,attributionPosition:fc,proOptions:hc,defaultEdgeOptions:pc,elevateNodesOnSelect:gc=!0,elevateEdgesOnSelect:mc=!1,disableKeyboardA11y:pi=!1,autoPanOnConnect:yc=!0,autoPanOnNodeDrag:wc=!0,connectionRadius:xc=20,isValidConnection:vc,onError:bc,style:Ec,id:gi,nodeDragThreshold:_c,...Sc},Nc)=>{const _n=gi||"1";return P.createElement("div",{...Sc,style:{...Ec,...Kp},ref:Nc,className:de(["react-flow",r]),"data-testid":"rf__wrapper",id:gi},P.createElement(Ha,null,P.createElement(jp,{onInit:d,onMove:a,onMoveStart:l,onMoveEnd:f,onNodeClick:c,onEdgeClick:u,onNodeMouseEnter:x,onNodeMouseMove:_,onNodeMouseLeave:v,onNodeContextMenu:S,onNodeDoubleClick:I,nodeTypes:s,edgeTypes:o,connectionLineType:B,connectionLineStyle:H,connectionLineComponent:j,connectionLineContainerStyle:C,selectionKeyCode:D,selectionOnDrag:V,selectionMode:G,deleteKeyCode:M,multiSelectionKeyCode:X,panActivationKeyCode:W,zoomActivationKeyCode:Z,onlyRenderVisibleElements:J,selectNodesOnDrag:ae,defaultViewport:Je,translateExtent:tt,minZoom:et,maxZoom:Ie,preventScrolling:Ve,zoomOnScroll:rt,zoomOnPinch:xt,zoomOnDoubleClick:je,panOnScroll:ue,panOnScrollSpeed:we,panOnScrollMode:Fe,panOnDrag:Ge,onPaneClick:Me,onPaneMouseEnter:Se,onPaneMouseMove:vt,onPaneMouseLeave:bn,onPaneScroll:bt,onPaneContextMenu:En,onSelectionContextMenu:R,onSelectionStart:z,onSelectionEnd:F,onEdgeContextMenu:Ye,onEdgeDoubleClick:Wa,onEdgeMouseEnter:Ua,onEdgeMouseMove:Xa,onEdgeMouseLeave:Za,onReconnect:ec??Ka,onReconnectStart:tc??Qa,onReconnectEnd:nc??Ja,reconnectRadius:rc??ic,defaultMarkerColor:nt,noDragClassName:ac,noWheelClassName:cc,noPanClassName:hi,elevateEdgesOnSelect:mc,rfId:_n,disableKeyboardA11y:pi,nodeOrigin:U,nodeExtent:He}),P.createElement(Bh,{nodes:e,edges:t,defaultNodes:n,defaultEdges:i,onConnect:h,onConnectStart:w,onConnectEnd:y,onClickConnectStart:p,onClickConnectEnd:m,nodesDraggable:re,nodesConnectable:pe,nodesFocusable:te,edgesFocusable:ge,edgesUpdatable:Be,elementsSelectable:wt,elevateNodesOnSelect:gc,minZoom:et,maxZoom:Ie,nodeExtent:He,onNodesChange:oc,onEdgesChange:sc,snapToGrid:fe,snapGrid:ee,connectionMode:O,translateExtent:tt,connectOnClick:dc,defaultEdgeOptions:pc,fitView:uc,fitViewOptions:lc,onNodesDelete:k,onEdgesDelete:N,onNodeDragStart:$,onNodeDrag:b,onNodeDragStop:E,onSelectionDrag:g,onSelectionDragStart:L,onSelectionDragStop:T,noPanClassName:hi,nodeOrigin:U,rfId:_n,autoPanOnConnect:yc,autoPanOnNodeDrag:wc,onError:bc,connectionRadius:xc,isValidConnection:vc,nodeDragThreshold:_c}),P.createElement(qh,{onSelectionChange:A}),fi,P.createElement(dh,{proOptions:hc,position:fc}),P.createElement(Gh,{rfId:_n,disableKeyboardA11y:pi})))});Fa.displayName="ReactFlow";function Qp(){return P.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32"},P.createElement("path",{d:"M32 18.133H18.133V32h-4.266V18.133H0v-4.266h13.867V0h4.266v13.867H32z"}))}function Jp(){return P.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 5"},P.createElement("path",{d:"M0 0h32v4.2H0z"}))}function eg(){return P.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 30"},P.createElement("path",{d:"M3.692 4.63c0-.53.4-.938.939-.938h5.215V0H4.708C2.13 0 0 2.054 0 4.63v5.216h3.692V4.631zM27.354 0h-5.2v3.692h5.17c.53 0 .984.4.984.939v5.215H32V4.631A4.624 4.624 0 0027.354 0zm.954 24.83c0 .532-.4.94-.939.94h-5.215v3.768h5.215c2.577 0 4.631-2.13 4.631-4.707v-5.139h-3.692v5.139zm-23.677.94c-.531 0-.939-.4-.939-.94v-5.138H0v5.139c0 2.577 2.13 4.707 4.708 4.707h5.138V25.77H4.631z"}))}function tg(){return P.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32"},P.createElement("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0 8 0 4.571 3.429 4.571 7.619v3.048H3.048A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047zm4.724-13.866H7.467V7.619c0-2.59 2.133-4.724 4.723-4.724 2.591 0 4.724 2.133 4.724 4.724v3.048z"}))}function ng(){return P.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32"},P.createElement("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0c-4.114 1.828-1.37 2.133.305 2.438 1.676.305 4.42 2.59 4.42 5.181v3.048H3.047A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047z"}))}const At=({children:e,className:t,...n})=>P.createElement("button",{type:"button",className:de(["react-flow__controls-button",t]),...n},e);At.displayName="ControlButton";const rg=e=>({isInteractive:e.nodesDraggable||e.nodesConnectable||e.elementsSelectable,minZoomReached:e.transform[2]<=e.minZoom,maxZoomReached:e.transform[2]>=e.maxZoom}),ja=({style:e,showZoom:t=!0,showFitView:n=!0,showInteractive:i=!0,fitViewOptions:r,onZoomIn:s,onZoomOut:o,onFitView:c,onInteractiveChange:u,className:d,children:a,position:l="bottom-left"})=>{const f=ce(),[h,w]=q.useState(!1),{isInteractive:y,minZoomReached:p,maxZoomReached:m}=ne(rg,le),{zoomIn:x,zoomOut:_,fitView:v}=ui();if(q.useEffect(()=>{w(!0)},[]),!h)return null;const S=()=>{x(),s==null||s()},I=()=>{_(),o==null||o()},$=()=>{v(r),c==null||c()},b=()=>{f.setState({nodesDraggable:!y,nodesConnectable:!y,elementsSelectable:!y}),u==null||u(!y)};return P.createElement(ra,{className:de(["react-flow__controls",d]),position:l,style:e,"data-testid":"rf__controls"},t&&P.createElement(P.Fragment,null,P.createElement(At,{onClick:S,className:"react-flow__controls-zoomin",title:"zoom in","aria-label":"zoom in",disabled:m},P.createElement(Qp,null)),P.createElement(At,{onClick:I,className:"react-flow__controls-zoomout",title:"zoom out","aria-label":"zoom out",disabled:p},P.createElement(Jp,null))),n&&P.createElement(At,{className:"react-flow__controls-fitview",onClick:$,title:"fit view","aria-label":"fit view"},P.createElement(eg,null)),i&&P.createElement(At,{className:"react-flow__controls-interactive",onClick:b,title:"toggle interactivity","aria-label":"toggle interactivity"},y?P.createElement(ng,null):P.createElement(tg,null)),a)};ja.displayName="Controls";var ig=q.memo(ja),be;(function(e){e.Lines="lines",e.Dots="dots",e.Cross="cross"})(be||(be={}));function og({color:e,dimensions:t,lineWidth:n}){return P.createElement("path",{stroke:e,strokeWidth:n,d:`M${t[0]/2} 0 V${t[1]} M0 ${t[1]/2} H${t[0]}`})}function sg({color:e,radius:t}){return P.createElement("circle",{cx:t,cy:t,r:t,fill:e})}const ag={[be.Dots]:"#91919a",[be.Lines]:"#eee",[be.Cross]:"#e2e2e2"},cg={[be.Dots]:1,[be.Lines]:1,[be.Cross]:6},ug=e=>({transform:e.transform,patternId:`pattern-${e.rfId}`});function Ga({id:e,variant:t=be.Dots,gap:n=20,size:i,lineWidth:r=1,offset:s=2,color:o,style:c,className:u}){const d=q.useRef(null),{transform:a,patternId:l}=ne(ug,le),f=o||ag[t],h=i||cg[t],w=t===be.Dots,y=t===be.Cross,p=Array.isArray(n)?n:[n,n],m=[p[0]*a[2]||1,p[1]*a[2]||1],x=h*a[2],_=y?[x,x]:m,v=w?[x/s,x/s]:[_[0]/s,_[1]/s];return P.createElement("svg",{className:de(["react-flow__background",u]),style:{...c,position:"absolute",width:"100%",height:"100%",top:0,left:0},ref:d,"data-testid":"rf__background"},P.createElement("pattern",{id:l+e,x:a[0]%m[0],y:a[1]%m[1],width:m[0],height:m[1],patternUnits:"userSpaceOnUse",patternTransform:`translate(-${v[0]},-${v[1]})`},w?P.createElement(sg,{color:f,radius:x/s}):P.createElement(og,{dimensions:_,color:f,lineWidth:r})),P.createElement("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:`url(#${l+e})`}))}Ga.displayName="Background";var lg=q.memo(Ga);const is=280,os=110,Qt="#64748b",dg={planned:vs,"in-progress":Ac,complete:Mc,archived:Ic},fg={critical:Tc,high:Oc,medium:bs,low:Rc},ss={planned:"border-blue-400/70 bg-blue-400/10 text-blue-900 dark:text-blue-200","in-progress":"border-orange-400/70 bg-orange-400/10 text-orange-900 dark:text-orange-200",complete:"border-green-400/70 bg-green-400/10 text-green-900 dark:text-green-200",archived:"border-gray-400/70 bg-gray-400/10 text-gray-600 dark:text-gray-300"},hg={rankdir:"LR",align:"UL",nodesep:60,ranksep:120,marginx:40,marginy:40},Ya=P.memo(function({data:t,statusLabels:n,priorityLabels:i}){const r=t.status?dg[t.status]||vs:null,s=t.priority?fg[t.priority]||bs:null,o=ss[t.status||t.tone]||ss.planned,c=t.tone==="current"?"ring-2 ring-primary/40 shadow-lg":"";return Q.jsxs("div",{className:Et("flex w-[280px] flex-col gap-1.5 rounded-xl border-2 px-5 py-4 text-base shadow-md transition-colors",o,c,t.interactive&&"cursor-pointer hover:border-primary/70 hover:shadow-lg"),children:[Q.jsx(yt,{type:"target",position:Y.Left,className:"opacity-0"}),Q.jsxs("div",{className:"flex items-center justify-between",children:[Q.jsx("span",{className:"text-xs font-semibold uppercase tracking-wider text-muted-foreground/70",children:t.badge}),(r||s)&&Q.jsxs("div",{className:"flex items-center gap-1",children:[r&&Q.jsx("div",{className:Et("rounded p-1 flex items-center justify-center",t.status==="planned"&&"bg-blue-500/20",t.status==="in-progress"&&"bg-orange-500/20",t.status==="complete"&&"bg-green-500/20",t.status==="archived"&&"bg-gray-500/20"),title:(n==null?void 0:n[t.status||""])||t.status,children:Q.jsx(r,{className:Et("h-3 w-3",t.status==="planned"&&"text-blue-600 dark:text-blue-400",t.status==="in-progress"&&"text-orange-600 dark:text-orange-400",t.status==="complete"&&"text-green-600 dark:text-green-400",t.status==="archived"&&"text-gray-500 dark:text-gray-400")})}),s&&Q.jsx("div",{className:Et("rounded p-1 flex items-center justify-center",t.priority==="critical"&&"bg-red-500/20",t.priority==="high"&&"bg-orange-500/20",t.priority==="medium"&&"bg-blue-500/20",t.priority==="low"&&"bg-gray-500/20"),title:(i==null?void 0:i[t.priority||""])||t.priority,children:Q.jsx(s,{className:Et("h-3 w-3",t.priority==="critical"&&"text-red-600 dark:text-red-400",t.priority==="high"&&"text-orange-600 dark:text-orange-400",t.priority==="medium"&&"text-blue-600 dark:text-blue-400",t.priority==="low"&&"text-gray-500 dark:text-gray-400")})})]})]}),Q.jsx("span",{className:"text-base font-semibold leading-snug",children:t.label}),t.subtitle&&Q.jsx("span",{className:"text-sm text-muted-foreground/80",children:t.subtitle}),Q.jsx(yt,{type:"source",position:Y.Right,className:"opacity-0"})]})});Ya.displayName="SpecNode";function as(e){if(e.specNumber){const t=e.specNumber.toString().padStart(3,"0"),n=e.title||e.specName.replace(/[-_]/g," ").trim();return`#${t} ${n}`}return e.title||e.specName}function cs(e,t,n){return`${e}-${n}-${t.trim().toLowerCase().replace(/[^a-z0-9]+/g,"-")||n}`}function pg(e,t){const n=new uo.graphlib.Graph;return n.setGraph(hg),n.setDefaultEdgeLabel(()=>({})),e.forEach(r=>{n.setNode(r.id,{width:is,height:os})}),t.forEach(r=>{n.setEdge(r.source,r.target)}),uo.layout(n),{nodes:e.map(r=>{const{x:s,y:o}=n.node(r.id);return{...r,position:{x:s-is/2,y:o-os/2}}}),edges:t}}function gg(e,t,n,i){var u,d;const r=[],s=[],c={id:"current-spec",type:"specNode",data:{label:t?`#${t.toString().padStart(3,"0")} ${n}`:n,badge:i.currentBadge,subtitle:i.currentSubtitle,tone:"current",status:e.current.status,priority:e.current.priority,interactive:!1,isCurrent:!0},position:{x:0,y:0},draggable:!1,selectable:!1,sourcePosition:Y.Right,targetPosition:Y.Left};return r.push(c),(u=e.dependsOn)==null||u.forEach((a,l)=>{const f=cs("precedence",a.specName,l);let h=i.dependsOnSubtitle;a.status==="complete"?h=i.completedSubtitle||"Completed":a.status==="in-progress"?h=i.inProgressSubtitle||"In progress":a.status==="planned"?h=i.plannedBlockingSubtitle||"Must complete first":a.status==="archived"&&(h=i.archivedSubtitle||"Archived"),r.push({id:f,type:"specNode",data:{label:as(a),badge:i.dependsOnBadge,subtitle:h,tone:"precedence",status:a.status,priority:a.priority,interactive:!0},position:{x:0,y:0},draggable:!1,selectable:!0,sourcePosition:Y.Right,targetPosition:Y.Left}),s.push({id:`edge-${f}-current`,source:f,target:c.id,type:"smoothstep",markerEnd:{type:mt.ArrowClosed,color:Qt,width:28,height:28},style:{stroke:Qt,strokeWidth:3}})}),(d=e.requiredBy)==null||d.forEach((a,l)=>{const f=cs("required-by",a.specName,l);let h=i.requiredBySubtitle;const w=e.current.status==="complete"||e.current.status==="archived";a.status==="complete"?h=i.completedSubtitle||"Completed":a.status==="in-progress"?h=i.inProgressSubtitle||"In progress":a.status==="planned"?h=w?i.plannedCanProceedSubtitle||"Can proceed":i.plannedBlockingSubtitle||"Blocked by this spec":a.status==="archived"&&(h=i.archivedSubtitle||"Archived"),r.push({id:f,type:"specNode",data:{label:as(a),badge:i.requiredByBadge,subtitle:h,tone:"required-by",status:a.status,priority:a.priority,interactive:!0},position:{x:0,y:0},draggable:!1,selectable:!0,sourcePosition:Y.Right,targetPosition:Y.Left}),s.push({id:`edge-current-${f}`,source:c.id,target:f,type:"smoothstep",markerEnd:{type:mt.ArrowClosed,color:Qt,width:28,height:28},style:{stroke:Qt,strokeWidth:3}})}),pg(r,s)}function mg({relationships:e,specNumber:t,specTitle:n,onNodeClick:i,labels:r,statusLabels:s,priorityLabels:o}){const[c,u]=P.useState(null),d={currentBadge:(r==null?void 0:r.currentBadge)||"Current Spec",currentSubtitle:(r==null?void 0:r.currentSubtitle)||"Currently viewing",dependsOnBadge:(r==null?void 0:r.dependsOnBadge)||"Depends On",dependsOnSubtitle:(r==null?void 0:r.dependsOnSubtitle)||"Upstream dependency",requiredByBadge:(r==null?void 0:r.requiredByBadge)||"Required By",requiredBySubtitle:(r==null?void 0:r.requiredBySubtitle)||"Downstream dependency",completedSubtitle:r==null?void 0:r.completedSubtitle,inProgressSubtitle:r==null?void 0:r.inProgressSubtitle,plannedBlockingSubtitle:r==null?void 0:r.plannedBlockingSubtitle,plannedCanProceedSubtitle:r==null?void 0:r.plannedCanProceedSubtitle,archivedSubtitle:r==null?void 0:r.archivedSubtitle},a=P.useMemo(()=>gg(e,t,n,d),[e,t,n,r]),l=P.useMemo(()=>({specNode:w=>Q.jsx(Ya,{...w,statusLabels:s,priorityLabels:o})}),[s,o]),f=P.useCallback(w=>{u(w),requestAnimationFrame(()=>{w.fitView({padding:.4,duration:350})})},[]);P.useEffect(()=>{c&&c.fitView({padding:.4,duration:350})},[c,a.nodes]);const h=P.useCallback((w,y)=>{if(!(y!=null&&y.data)||!y.data.interactive||!i)return;const p=y.id.split("-").pop();p&&i(p)},[i]);return Q.jsxs("div",{className:"flex h-full flex-col gap-4",children:[Q.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-3 text-sm text-muted-foreground",children:[Q.jsxs("div",{children:[Q.jsx("p",{className:"text-xs font-semibold uppercase tracking-wide",children:(r==null?void 0:r.title)||"Dependency Graph"}),Q.jsx("p",{className:"text-base text-foreground",children:(r==null?void 0:r.subtitle)||"Visual representation of spec dependencies"})]}),Q.jsx("div",{className:"rounded-full border border-border px-3 py-1.5 text-sm font-medium uppercase tracking-wide",children:(r==null?void 0:r.badge)||"Interactive"})]}),Q.jsx("div",{className:"flex-1 overflow-hidden rounded-2xl border border-border bg-muted/30",children:Q.jsxs(Fa,{nodes:a.nodes,edges:a.edges,nodeTypes:l,onInit:f,className:"h-full w-full",fitView:!0,proOptions:{hideAttribution:!0},nodesDraggable:!1,nodesConnectable:!1,elementsSelectable:!0,panOnScroll:!0,panOnDrag:!0,zoomOnScroll:!0,zoomOnPinch:!0,minZoom:.4,maxZoom:1.6,onNodeClick:h,children:[Q.jsx(lg,{gap:24,size:1,color:"rgba(148, 163, 184, 0.3)"}),Q.jsx(ig,{showInteractive:!1})]})})]})}function Ht(e){return Q.jsx(di,{children:Q.jsx(mg,{...e})})}Ht.__docgenInfo={description:"",methods:[],displayName:"SpecDependencyGraph",props:{relationships:{required:!0,tsType:{name:"CompleteSpecRelationships"},description:""},specNumber:{required:!1,tsType:{name:"union",raw:"number | null",elements:[{name:"number"},{name:"null"}]},description:""},specTitle:{required:!0,tsType:{name:"string"},description:""},onNodeClick:{required:!1,tsType:{name:"signature",type:"function",raw:"(specId: string) => void",signature:{arguments:[{type:{name:"string"},name:"specId"}],return:{name:"void"}}},description:""},labels:{required:!1,tsType:{name:"signature",type:"object",raw:`{
  title?: string;
  subtitle?: string;
  badge?: string;
  currentBadge?: string;
  currentSubtitle?: string;
  dependsOnBadge?: string;
  dependsOnSubtitle?: string;
  requiredByBadge?: string;
  requiredBySubtitle?: string;
  completedSubtitle?: string;
  inProgressSubtitle?: string;
  plannedBlockingSubtitle?: string;
  plannedCanProceedSubtitle?: string;
  archivedSubtitle?: string;
}`,signature:{properties:[{key:"title",value:{name:"string",required:!1}},{key:"subtitle",value:{name:"string",required:!1}},{key:"badge",value:{name:"string",required:!1}},{key:"currentBadge",value:{name:"string",required:!1}},{key:"currentSubtitle",value:{name:"string",required:!1}},{key:"dependsOnBadge",value:{name:"string",required:!1}},{key:"dependsOnSubtitle",value:{name:"string",required:!1}},{key:"requiredByBadge",value:{name:"string",required:!1}},{key:"requiredBySubtitle",value:{name:"string",required:!1}},{key:"completedSubtitle",value:{name:"string",required:!1}},{key:"inProgressSubtitle",value:{name:"string",required:!1}},{key:"plannedBlockingSubtitle",value:{name:"string",required:!1}},{key:"plannedCanProceedSubtitle",value:{name:"string",required:!1}},{key:"archivedSubtitle",value:{name:"string",required:!1}}]}},description:""},statusLabels:{required:!1,tsType:{name:"Record",elements:[{name:"string"},{name:"string"}],raw:"Record<string, string>"},description:""},priorityLabels:{required:!1,tsType:{name:"Record",elements:[{name:"string"},{name:"string"}],raw:"Record<string, string>"},description:""}}};const Ag={title:"Graph/SpecDependencyGraph",component:Ht,parameters:{layout:"fullscreen"},tags:["autodocs"]},yg={current:{specNumber:185,specName:"185-ui-components-extraction",title:"UI Components Extraction",status:"in-progress",priority:"high"},dependsOn:[{specNumber:184,specName:"184-ui-packages-consolidation",title:"UI Packages Consolidation",status:"complete",priority:"high"}],requiredBy:[{specNumber:186,specName:"186-rust-http-server",title:"Rust HTTP Server",status:"planned",priority:"high"},{specNumber:187,specName:"187-vite-spa-migration",title:"Vite SPA Migration",status:"planned",priority:"high"}]},Rt={args:{relationships:yg,specNumber:185,specTitle:"UI Components Extraction",onNodeClick:e=>console.log("Clicked spec:",e)},render:e=>Q.jsx("div",{style:{width:"100%",height:"600px"},children:Q.jsx(Ht,{...e})})},Jt={args:{relationships:{current:{specNumber:100,specName:"100-example-spec",title:"Example Spec",status:"in-progress",priority:"medium"},dependsOn:[{specNumber:95,specName:"95-prerequisite-1",title:"Prerequisite 1",status:"complete",priority:"high"},{specNumber:96,specName:"96-prerequisite-2",title:"Prerequisite 2",status:"in-progress",priority:"medium"},{specNumber:97,specName:"97-prerequisite-3",title:"Prerequisite 3",status:"planned",priority:"low"}],requiredBy:[{specNumber:101,specName:"101-dependent-1",title:"Dependent 1",status:"planned",priority:"high"},{specNumber:102,specName:"102-dependent-2",title:"Dependent 2",status:"planned",priority:"medium"}]},specNumber:100,specTitle:"Example Spec"},render:e=>Q.jsx("div",{style:{width:"100%",height:"600px"},children:Q.jsx(Ht,{...e})})},en={args:{...Rt.args,labels:{title:"Dependency Visualization",subtitle:"Click on any spec to navigate",badge:"Beta",currentBadge:"THIS SPEC",currentSubtitle:"You are here",dependsOnBadge:"REQUIRED",requiredByBadge:"BLOCKS",completedSubtitle:" Done",inProgressSubtitle:" Working",plannedBlockingSubtitle:" Blocked",plannedCanProceedSubtitle:" Ready"}},render:e=>Q.jsx("div",{style:{width:"100%",height:"600px"},children:Q.jsx(Ht,{...e})})};var us,ls,ds;Rt.parameters={...Rt.parameters,docs:{...(us=Rt.parameters)==null?void 0:us.docs,source:{originalSource:`{
  args: {
    relationships: mockRelationships,
    specNumber: 185,
    specTitle: 'UI Components Extraction',
    onNodeClick: specId => console.log('Clicked spec:', specId)
  },
  render: args => <div style={{
    width: '100%',
    height: '600px'
  }}>
      <SpecDependencyGraph {...args} />
    </div>
}`,...(ds=(ls=Rt.parameters)==null?void 0:ls.docs)==null?void 0:ds.source}}};var fs,hs,ps;Jt.parameters={...Jt.parameters,docs:{...(fs=Jt.parameters)==null?void 0:fs.docs,source:{originalSource:`{
  args: {
    relationships: {
      current: {
        specNumber: 100,
        specName: '100-example-spec',
        title: 'Example Spec',
        status: 'in-progress',
        priority: 'medium'
      },
      dependsOn: [{
        specNumber: 95,
        specName: '95-prerequisite-1',
        title: 'Prerequisite 1',
        status: 'complete',
        priority: 'high'
      }, {
        specNumber: 96,
        specName: '96-prerequisite-2',
        title: 'Prerequisite 2',
        status: 'in-progress',
        priority: 'medium'
      }, {
        specNumber: 97,
        specName: '97-prerequisite-3',
        title: 'Prerequisite 3',
        status: 'planned',
        priority: 'low'
      }],
      requiredBy: [{
        specNumber: 101,
        specName: '101-dependent-1',
        title: 'Dependent 1',
        status: 'planned',
        priority: 'high'
      }, {
        specNumber: 102,
        specName: '102-dependent-2',
        title: 'Dependent 2',
        status: 'planned',
        priority: 'medium'
      }]
    },
    specNumber: 100,
    specTitle: 'Example Spec'
  },
  render: args => <div style={{
    width: '100%',
    height: '600px'
  }}>
      <SpecDependencyGraph {...args} />
    </div>
}`,...(ps=(hs=Jt.parameters)==null?void 0:hs.docs)==null?void 0:ps.source}}};var gs,ms,ys;en.parameters={...en.parameters,docs:{...(gs=en.parameters)==null?void 0:gs.docs,source:{originalSource:`{
  args: {
    ...Default.args,
    labels: {
      title: 'Dependency Visualization',
      subtitle: 'Click on any spec to navigate',
      badge: 'Beta',
      currentBadge: 'THIS SPEC',
      currentSubtitle: 'You are here',
      dependsOnBadge: 'REQUIRED',
      requiredByBadge: 'BLOCKS',
      completedSubtitle: ' Done',
      inProgressSubtitle: ' Working',
      plannedBlockingSubtitle: ' Blocked',
      plannedCanProceedSubtitle: ' Ready'
    }
  },
  render: args => <div style={{
    width: '100%',
    height: '600px'
  }}>
      <SpecDependencyGraph {...args} />
    </div>
}`,...(ys=(ms=en.parameters)==null?void 0:ms.docs)==null?void 0:ys.source}}};const Rg=["Default","WithManyDependencies","CustomLabels"];export{en as CustomLabels,Rt as Default,Jt as WithManyDependencies,Rg as __namedExportsOrder,Ag as default};
